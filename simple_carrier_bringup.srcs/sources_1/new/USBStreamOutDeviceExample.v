/* Generated by Yosys 0.41+108 (git sha1 557968567, x86_64-w64-mingw32-g++ 13.2.1 -Os) */

(* top =  1  *)
(* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:111" *)
(* generator = "Amaranth" *)
module USBStreamOutDeviceExample(NXT, data_I, connect, usb_clk, usb_rst, STP, data_O, data_T, PHY_NRST, DIR);
  wire \$1 ;
  wire \$2 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire [9:0] \$9 ;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input DIR;
  wire DIR;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input NXT;
  wire NXT;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:48" *)
  output PHY_NRST;
  wire PHY_NRST;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  output STP;
  wire STP;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:128" *)
  input connect;
  wire connect;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:128" *)
  wire \connect$20 ;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input [7:0] data_I;
  wire [7:0] data_I;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  output [7:0] data_O;
  wire [7:0] data_O;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:47" *)
  output [7:0] data_T;
  wire [7:0] data_T;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire first;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$19 ;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire [7:0] ulpi__data__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire [7:0] ulpi__data__o;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire ulpi__data__oe;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire ulpi__dir__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire ulpi__nxt__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire ulpi__rst__o;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire ulpi__stp__o;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$13 ;
  assign \$1  = ~ (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:151" *) ulpi__data__oe;
  assign \$2  = ~ (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:151" *) ulpi__data__oe;
  assign \$3  = ~ (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:151" *) ulpi__data__oe;
  assign \$4  = ~ (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:151" *) ulpi__data__oe;
  assign \$5  = ~ (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:151" *) ulpi__data__oe;
  assign \$6  = ~ (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:151" *) ulpi__data__oe;
  assign \$7  = ~ (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:151" *) ulpi__data__oe;
  assign \$8  = ~ (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:151" *) ulpi__data__oe;
  assign PHY_NRST = ~ (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:157" *) usb_rst;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:118" *)
  \USBStreamOutDeviceExample.usb  usb (
    .connect(connect),
    .\port$1347$0 (\$9 ),
    .\ready$196 (ready),
    .ulpi__data__i(data_I),
    .ulpi__data__o(data_O),
    .ulpi__data__oe(ulpi__data__oe),
    .ulpi__dir__i(DIR),
    .ulpi__nxt__i(NXT),
    .ulpi__stp__o(STP),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .\valid$192 (valid)
  );
  assign payload = \$9 [7:0];
  assign \payload$11  = \$9 [7:0];
  assign \valid$13  = valid;
  assign first = \$9 [9];
  assign \first$15  = \$9 [9];
  assign last = \$9 [8];
  assign \last$17  = \$9 [8];
  assign \ready$19  = ready;
  assign \connect$20  = connect;
  assign ulpi__dir__i = DIR;
  assign ulpi__stp__o = STP;
  assign ulpi__nxt__i = NXT;
  assign ulpi__data__o = data_O;
  assign ulpi__data__i = data_I;
  assign ulpi__rst__o = usb_rst;
  assign data_T = { \$8 , \$7 , \$6 , \$5 , \$4 , \$3 , \$2 , \$1  };
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:209" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb (ulpi__nxt__i, ulpi__data__i, connect, usb_clk, usb_rst, ulpi__data__oe, \valid$192 , \port$1347$0 , \ready$196 , ulpi__data__o, ulpi__stp__o, ulpi__dir__i);
  reg \$auto$verilog_backend.cc:2352:dump_module$1  = 0;
  wire [1:0] \$1 ;
  wire \$2 ;
  wire [3:0] \$3 ;
  reg [6:0] \$4 ;
  reg [7:0] \$5 ;
  reg [10:0] \$6 ;
  reg [2:0] \$7 ;
  wire \$8 ;
  wire [9:0] \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$161 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$164 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$187 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$219 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$222 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$38 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$74 ;
  (* init = 7'h00 *)
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:85" *)
  wire [6:0] active_address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:89" *)
  reg [7:0] active_config = 8'h00;
  (* init = 8'h00 *)
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:89" *)
  wire [7:0] \active_config$170 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:707" *)
  wire [3:0] active_pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:239" *)
  reg [6:0] address = 7'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$141 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$18 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$210 ;
  (* init = 7'h00 *)
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:227" *)
  wire [6:0] \address$7 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:86" *)
  wire address_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:86" *)
  wire \address_changed$168 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:122" *)
  wire bus_busy;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:126" *)
  wire bus_reset;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:742" *)
  wire busy;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:90" *)
  wire config_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:90" *)
  wire \config_changed$171 ;
  (* init = 8'h00 *)
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:230" *)
  wire [7:0] configuration;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:128" *)
  input connect;
  wire connect;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] crc;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$129 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$132 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$139 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:711" *)
  wire crc_mismatch;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:129" *)
  wire [1:0] current_speed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire [7:0] data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire [7:0] \data$229 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire [7:0] \data$230 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire [7:0] \data$231 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1101" *)
  wire [1:0] data_pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire dm_pulldown;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire dp_pulldown;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] endpoint;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$142 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$184 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$197 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire first;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$157 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$195 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$199 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$204 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$66 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$145 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$213 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$26 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:132" *)
  reg [10:0] frame_number = 11'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:120" *)
  wire full_speed_only;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:130" *)
  wire \full_speed_only$94 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire is_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$147 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$215 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$30 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire is_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$148 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$185 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$216 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$32 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire is_ping;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$150 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$189 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$218 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$36 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire is_setup;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$149 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$217 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$34 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1268" *)
  wire issue_ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1269" *)
  wire issue_nak;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1270" *)
  wire issue_stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$158 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$194 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$200 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$205 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$68 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:124" *)
  wire [1:0] line_state;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:757" *)
  wire [1:0] \line_state$5 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:119" *)
  wire low_speed_only;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:129" *)
  wire \low_speed_only$92 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:133" *)
  reg [2:0] microframe_number = 3'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire nak;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$162 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$165 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$191 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$220 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$223 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$40 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$76 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:87" *)
  wire [6:0] new_address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:87" *)
  wire [6:0] \new_address$169 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:91" *)
  wire [7:0] new_config;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:91" *)
  wire [7:0] \new_config$172 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire new_frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:135" *)
  reg \new_frame$102 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$146 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$214 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$28 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire new_token;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$143 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$211 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$22 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire next;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$175 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$180 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$52 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire nyet;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$167 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$225 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$44 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire [1:0] op_mode;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:130" *)
  wire [1:0] operating_mode;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:709" *)
  wire packet_complete;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$159 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$176 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$181 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$193 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$201 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$206 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$54 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$69 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$70 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$140 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$209 ;
  output [9:0] \port$1347$0 ;
  wire [9:0] \port$1347$0 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$160 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \ready$196 ;
  wire \ready$196 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$202 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$207 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \ready$232 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \ready$233 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$72 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \ready$85 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$144 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$190 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$212 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$24 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:710" *)
  wire \ready_for_response$60 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:136" *)
  wire reset_detected;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:753" *)
  wire rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:141" *)
  wire rx_activity_led;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:94" *)
  wire rx_complete;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:94" *)
  wire \rx_complete$182 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:558" *)
  wire [7:0] rx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:745" *)
  wire [7:0] \rx_data$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  wire rx_invalid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  wire \rx_invalid$178 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  wire \rx_invalid$183 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:97" *)
  wire [1:0] rx_pid_toggle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:97" *)
  wire [1:0] \rx_pid_toggle$186 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:95" *)
  wire rx_ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:95" *)
  wire \rx_ready_for_response$177 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:95" *)
  wire \rx_ready_for_response$188 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire rx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \rx_timeout$154 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:559" *)
  wire rx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:746" *)
  wire \rx_valid$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:757" *)
  wire session_end;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:134" *)
  wire sof_detected;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:238" *)
  wire [1:0] speed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:138" *)
  wire [1:0] \speed$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1387" *)
  wire [1:0] \speed$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:83" *)
  wire [1:0] \speed$151 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:83" *)
  wire [1:0] \speed$45 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$163 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$166 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$221 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$224 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$42 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$78 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire \start$127 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \start$130 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire \start$136 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \start$137 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire \start$138 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \start$155 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:139" *)
  wire suspended;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:127" *)
  wire \suspended$105 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire term_select;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:131" *)
  wire termination_select;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:140" *)
  wire tx_activity_led;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire tx_allowed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_allowed$133 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_allowed$152 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:748" *)
  wire [7:0] tx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:561" *)
  wire [7:0] \tx_data$88 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:100" *)
  wire [1:0] tx_pid_toggle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:100" *)
  wire [1:0] \tx_pid_toggle$173 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:100" *)
  wire [1:0] \tx_pid_toggle$208 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:750" *)
  wire tx_ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire tx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_timeout$153 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:749" *)
  wire tx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:562" *)
  wire \tx_valid$87 ;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input [7:0] ulpi__data__i;
  wire [7:0] ulpi__data__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  output [7:0] ulpi__data__o;
  wire [7:0] ulpi__data__o;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  output ulpi__data__oe;
  wire ulpi__data__oe;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input ulpi__dir__i;
  wire ulpi__dir__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input ulpi__nxt__i;
  wire ulpi__nxt__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire ulpi__rst__o;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  output ulpi__stp__o;
  wire ulpi__stp__o;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$156 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$174 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$179 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \valid$192 ;
  wire \valid$192 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$198 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$203 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \valid$226 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \valid$227 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \valid$228 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$50 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$63 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$64 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \valid$84 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:123" *)
  wire vbus_connected;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire [1:0] xcvr_select;
  assign vbus_connected = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:244" *) session_end;
  assign \tx_valid$87  = tx_valid & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:361" *) \ready$85 ;
  assign term_select = termination_select & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:389" *) connect;
  assign \$2  = frame != (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:405" *) frame_number;
  assign \$3  = microframe_number + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:413" *) 1'h1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:227" *)
  always @(posedge usb_clk)
    address <= \$4 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:230" *)
  always @(posedge usb_clk)
    active_config <= \$5 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:132" *)
  always @(posedge usb_clk)
    frame_number <= \$6 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:133" *)
  always @(posedge usb_clk)
    microframe_number <= \$7 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:341" *)
  \USBStreamOutDeviceExample.usb.USBControlEndpoint  USBControlEndpoint (
    .ack(\ack$161 ),
    .\ack$80 (ack),
    .active_config(active_config),
    .address(\address$17 ),
    .address_changed(\address_changed$168 ),
    .config_changed(\config_changed$171 ),
    .crc(crc),
    .endpoint(endpoint),
    .first(\first$157 ),
    .frame(frame),
    .is_in(is_in),
    .is_out(is_out),
    .is_ping(is_ping),
    .is_setup(is_setup),
    .last(\last$158 ),
    .nak(\nak$162 ),
    .\nak$82 (nak),
    .new_address(\new_address$169 ),
    .new_config(\new_config$172 ),
    .new_frame(new_frame),
    .new_token(new_token),
    .\next$105 (next),
    .nyet(nyet),
    .payload(\payload$159 ),
    .\payload$107 (payload),
    .pid(pid),
    .ready(ready),
    .ready_for_response(ready_for_response),
    .rx_active(rx_active),
    .rx_data(rx_data),
    .\rx_invalid$111 (rx_invalid),
    .\rx_ready_for_response$109 (rx_ready_for_response),
    .rx_timeout(rx_timeout),
    .rx_valid(rx_valid),
    .speed(speed),
    .stall(\stall$163 ),
    .\stall$84 (stall),
    .start(\start$138 ),
    .\start$34 (\start$155 ),
    .tx_allowed(tx_allowed),
    .tx_data_pid(\$8 ),
    .tx_timeout(tx_timeout),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(\valid$156 ),
    .\valid$103 (valid)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:341" *)
  \USBStreamOutDeviceExample.usb.USBStreamInEndpoint  USBStreamInEndpoint (
    .\ack$58 (ack),
    .address(\address$17 ),
    .endpoint(endpoint),
    .\first$19 (\first$204 ),
    .frame(frame),
    .is_in(is_in),
    .is_out(is_out),
    .is_ping(is_ping),
    .is_setup(is_setup),
    .\last$21 (\last$205 ),
    .nak(\nak$220 ),
    .\nak$60 (nak),
    .new_frame(new_frame),
    .new_token(new_token),
    .\nyet$64 (nyet),
    .\payload$23 (\payload$206 ),
    .pid(pid),
    .\port$1347$0 (\$9 ),
    .ready(\ready$196 ),
    .\ready$25 (ready),
    .ready_for_response(ready_for_response),
    .\stall$62 (stall),
    .tx_pid_toggle(\tx_pid_toggle$208 ),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(\valid$192 ),
    .\valid$17 (\valid$203 )
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:341" *)
  \USBStreamOutDeviceExample.usb.USBStreamOutEndpoint  USBStreamOutEndpoint (
    .ack(\ack$187 ),
    .complete_in(rx_complete),
    .endpoint(endpoint),
    .invalid_in(rx_invalid),
    .is_out(is_out),
    .is_ping(is_ping),
    .nak(\nak$191 ),
    .next(next),
    .payload(payload),
    .\port$1710$3 (active_pid[3]),
    .read_data(\$9 ),
    .read_en(\ready$196 ),
    .ready_for_response(ready_for_response),
    .rx_ready_for_response(rx_ready_for_response),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(valid),
    .\valid$35 (\valid$192 )
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:263" *)
  \USBStreamOutDeviceExample.usb.data_crc  data_crc (
    .output_crc(crc),
    .rx_data(rx_data),
    .rx_valid(rx_valid),
    .start(start),
    .\start$3 (\start$127 ),
    .\start$4 (\start$136 ),
    .tx_data(tx_data),
    .tx_valid(\tx_valid$87 ),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:292" *)
  \USBStreamOutDeviceExample.usb.endpoint_mux  endpoint_mux (
    .ack(ack),
    .\ack$142 (issue_ack),
    .\ack$143 (\ack$161 ),
    .\ack$144 (\ack$187 ),
    .active_address(address),
    .active_config(active_config),
    .address(\address$17 ),
    .address_changed(\address_changed$168 ),
    .\address_changed$119 (address_changed),
    .config_changed(\config_changed$171 ),
    .\config_changed$127 (config_changed),
    .crc(crc),
    .endpoint(endpoint),
    .first(first),
    .\first$172 (\first$157 ),
    .\first$176 (\first$204 ),
    .frame(frame),
    .is_in(is_in),
    .is_out(is_out),
    .is_ping(is_ping),
    .is_setup(is_setup),
    .last(last),
    .\last$173 (\last$158 ),
    .\last$177 (\last$205 ),
    .nak(nak),
    .\nak$146 (issue_nak),
    .\nak$147 (\nak$162 ),
    .\nak$148 (\nak$191 ),
    .\nak$149 (\nak$220 ),
    .new_address(new_address),
    .\new_address$121 (\new_address$169 ),
    .new_config(new_config),
    .\new_config$129 (\new_config$172 ),
    .new_frame(new_frame),
    .new_token(new_token),
    .next(next),
    .nyet(nyet),
    .payload(payload),
    .\payload$138 (\payload$69 ),
    .\payload$174 (\payload$159 ),
    .\payload$178 (\payload$206 ),
    .pid(pid),
    .\port$1710$3 (active_pid[3]),
    .\port$1865$0 (\$8 ),
    .ready(ready),
    .ready_for_response(ready_for_response),
    .rx_complete(rx_complete),
    .rx_invalid(rx_invalid),
    .rx_ready_for_response(rx_ready_for_response),
    .rx_timeout(rx_timeout),
    .speed(speed),
    .stall(stall),
    .\stall$150 (issue_stall),
    .\stall$151 (\stall$163 ),
    .start(\start$136 ),
    .\start$155 (\start$138 ),
    .\start$158 (\start$137 ),
    .\start$159 (\start$155 ),
    .tx_allowed(tx_allowed),
    .tx_pid_toggle(data_pid),
    .\tx_pid_toggle$169 (\tx_pid_toggle$208 ),
    .tx_timeout(tx_timeout),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(valid),
    .\valid$132 (\valid$63 ),
    .\valid$162 (\valid$156 ),
    .\valid$165 (\valid$203 )
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:262" *)
  \USBStreamOutDeviceExample.usb.handshake_detector  handshake_detector (
    .ack(ack),
    .nak(nak),
    .nyet(nyet),
    .rx_active(rx_active),
    .rx_data(rx_data),
    .rx_valid(rx_valid),
    .stall(stall),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:261" *)
  \USBStreamOutDeviceExample.usb.handshake_generator  handshake_generator (
    .data(\data$231 ),
    .issue_ack(issue_ack),
    .issue_nak(issue_nak),
    .issue_stall(issue_stall),
    .ready(\ready$85 ),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(\valid$228 )
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:260" *)
  \USBStreamOutDeviceExample.usb.receiver  receiver (
    .active_pid(active_pid),
    .crc(crc),
    .crc_mismatch(rx_invalid),
    .next(next),
    .packet_complete(rx_complete),
    .payload(payload),
    .ready_for_response(rx_ready_for_response),
    .rx_active(rx_active),
    .rx_data(rx_data),
    .rx_valid(rx_valid),
    .start(\start$127 ),
    .\start$19 (\start$130 ),
    .tx_allowed(tx_allowed),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(valid)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:239" *)
  \USBStreamOutDeviceExample.usb.reset_sequencer  reset_sequencer (
    .bus_busy(bus_busy),
    .bus_reset(reset_detected),
    .current_speed(speed),
    .data(\data$229 ),
    .full_speed_only(1'h0),
    .line_state(line_state),
    .low_speed_only(1'h0),
    .operating_mode(op_mode),
    .suspended(suspended),
    .termination_select(termination_select),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(\valid$226 ),
    .vbus_connected(vbus_connected)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:264" *)
  \USBStreamOutDeviceExample.usb.timer  timer (
    .rx_to_tx_at_max(tx_timeout),
    .rx_to_tx_at_min(tx_allowed),
    .speed(speed),
    .start(\start$130 ),
    .\start$3 (\start$137 ),
    .tx_to_rx_timeout(rx_timeout),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:257" *)
  \USBStreamOutDeviceExample.usb.token_detector  token_detector (
    .address(address),
    .\address$22 (\address$17 ),
    .endpoint(endpoint),
    .frame(frame),
    .is_in(is_in),
    .is_out(is_out),
    .is_ping(is_ping),
    .is_setup(is_setup),
    .new_frame(new_frame),
    .new_token(new_token),
    .pid(pid),
    .ready_for_response(ready_for_response),
    .rx_active(rx_active),
    .rx_data(rx_data),
    .rx_valid(rx_valid),
    .speed(speed),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:219" *)
  \USBStreamOutDeviceExample.usb.translator  translator (
    .busy(bus_busy),
    .line_state(line_state),
    .op_mode(op_mode),
    .rx_active(rx_active),
    .rx_data(rx_data),
    .rx_valid(rx_valid),
    .session_end(session_end),
    .term_select(term_select),
    .tx_data(tx_data),
    .tx_ready(\ready$85 ),
    .tx_valid(tx_valid),
    .ulpi__clk__o(usb_clk),
    .ulpi__data__o(ulpi__data__o),
    .ulpi__data__oe(ulpi__data__oe),
    .ulpi__dir__i(ulpi__dir__i),
    .ulpi__rst__o(usb_rst),
    .ulpi__stp__o(ulpi__stp__o),
    .ulpi_data_in(ulpi__data__i),
    .ulpi_nxt(ulpi__nxt__i),
    .xcvr_select(speed)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:259" *)
  \USBStreamOutDeviceExample.usb.transmitter  transmitter (
    .crc(crc),
    .data(\data$230 ),
    .data_pid(data_pid),
    .first(first),
    .last(last),
    .payload(\payload$69 ),
    .ready(ready),
    .\ready$8 (\ready$85 ),
    .start(start),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(\valid$227 ),
    .\valid$6 (\valid$63 )
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\device.py:349" *)
  \USBStreamOutDeviceExample.usb.tx_multiplexer  tx_multiplexer (
    .data(tx_data),
    .\data$6 (\data$229 ),
    .\data$7 (\data$230 ),
    .\data$8 (\data$231 ),
    .ready(\ready$85 ),
    .valid(\valid$226 ),
    .\valid$2 (\valid$227 ),
    .\valid$3 (\valid$228 ),
    .\valid$9 (tx_valid)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    \new_frame$102  = 1'h0;
    if (new_frame) begin
      \new_frame$102  = \$2 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    \$4  = address;
    if (address_changed) begin
      \$4  = new_address;
    end
    if (reset_detected) begin
      \$4  = 7'h00;
    end
    if (usb_rst) begin
      \$4  = 7'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    \$5  = active_config;
    if (config_changed) begin
      \$5  = new_config;
    end
    if (reset_detected) begin
      \$5  = 8'h00;
    end
    if (usb_rst) begin
      \$5  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    \$6  = frame_number;
    if (new_frame) begin
      \$6  = frame;
    end
    if (usb_rst) begin
      \$6  = 11'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$1 ) begin end
    \$7  = microframe_number;
    if (new_frame) begin
      (* full_case = 32'd1 *)
      if (\new_frame$102 ) begin
        \$7  = 3'h0;
      end else begin
        \$7  = \$3 [2:0];
      end
    end
    if (usb_rst) begin
      \$7  = 3'h0;
    end
  end
  assign busy = bus_busy;
  assign \line_state$5  = line_state;
  assign \address$7  = address;
  assign \rx_data$9  = rx_data;
  assign \rx_valid$11  = rx_valid;
  assign \speed$13  = speed;
  assign \speed$14  = speed;
  assign \pid$16  = pid;
  assign \address$18  = \address$17 ;
  assign \endpoint$20  = endpoint;
  assign \new_token$22  = new_token;
  assign \ready_for_response$24  = ready_for_response;
  assign \frame$26  = frame;
  assign \new_frame$28  = new_frame;
  assign \is_in$30  = is_in;
  assign \is_out$32  = is_out;
  assign \is_setup$34  = is_setup;
  assign \is_ping$36  = is_ping;
  assign \ack$38  = ack;
  assign \nak$40  = nak;
  assign \stall$42  = stall;
  assign \nyet$44  = nyet;
  assign \speed$45  = speed;
  assign configuration = active_config;
  assign active_address = address;
  assign \valid$50  = valid;
  assign \next$52  = next;
  assign \payload$54  = payload;
  assign packet_complete = rx_complete;
  assign crc_mismatch = rx_invalid;
  assign \ready_for_response$60  = rx_ready_for_response;
  assign rx_pid_toggle = { 1'h0, active_pid[3] };
  assign \valid$64  = \valid$63 ;
  assign \first$66  = first;
  assign \last$68  = last;
  assign \payload$70  = \payload$69 ;
  assign \ready$72  = ready;
  assign \ack$74  = issue_ack;
  assign \nak$76  = issue_nak;
  assign \stall$78  = issue_stall;
  assign tx_pid_toggle = data_pid;
  assign data = tx_data;
  assign \valid$84  = tx_valid;
  assign tx_ready = \ready$85 ;
  assign \tx_data$88  = tx_data;
  assign dm_pulldown = 1'h0;
  assign dp_pulldown = 1'h0;
  assign low_speed_only = \$1 [0];
  assign \low_speed_only$92  = 1'h0;
  assign \full_speed_only$94  = 1'h0;
  assign operating_mode = op_mode;
  assign xcvr_select = speed;
  assign current_speed = speed;
  assign \suspended$105  = suspended;
  assign sof_detected = new_frame;
  assign bus_reset = reset_detected;
  assign tx_activity_led = tx_valid;
  assign rx_activity_led = rx_valid;
  assign ulpi__rst__o = usb_rst;
  assign \crc$129  = crc;
  assign \crc$132  = crc;
  assign \tx_allowed$133  = tx_allowed;
  assign \crc$139  = crc;
  assign \pid$140  = pid;
  assign \address$141  = \address$17 ;
  assign \endpoint$142  = endpoint;
  assign \new_token$143  = new_token;
  assign \ready_for_response$144  = ready_for_response;
  assign \frame$145  = frame;
  assign \new_frame$146  = new_frame;
  assign \is_in$147  = is_in;
  assign \is_out$148  = is_out;
  assign \is_setup$149  = is_setup;
  assign \is_ping$150  = is_ping;
  assign \speed$151  = speed;
  assign \tx_allowed$152  = tx_allowed;
  assign \tx_timeout$153  = tx_timeout;
  assign \rx_timeout$154  = rx_timeout;
  assign \ready$160  = ready;
  assign \ack$164  = ack;
  assign \nak$165  = nak;
  assign \stall$166  = stall;
  assign \nyet$167  = nyet;
  assign \active_config$170  = active_config;
  assign \tx_pid_toggle$173  = { 1'h0, \$8  };
  assign \valid$174  = valid;
  assign \next$175  = next;
  assign \payload$176  = payload;
  assign \rx_ready_for_response$177  = rx_ready_for_response;
  assign \rx_invalid$178  = rx_invalid;
  assign \valid$179  = valid;
  assign \next$180  = next;
  assign \payload$181  = payload;
  assign \rx_complete$182  = rx_complete;
  assign \rx_invalid$183  = rx_invalid;
  assign \endpoint$184  = endpoint;
  assign \is_out$185  = is_out;
  assign \rx_pid_toggle$186  = { 1'h0, active_pid[3] };
  assign \rx_ready_for_response$188  = rx_ready_for_response;
  assign \is_ping$189  = is_ping;
  assign \ready_for_response$190  = ready_for_response;
  assign \payload$193  = \$9 [7:0];
  assign \last$194  = \$9 [8];
  assign \first$195  = \$9 [9];
  assign \endpoint$197  = endpoint;
  assign \valid$198  = \valid$192 ;
  assign \first$199  = \$9 [9];
  assign \last$200  = \$9 [8];
  assign \payload$201  = \$9 [7:0];
  assign \ready$202  = \ready$196 ;
  assign \ready$207  = ready;
  assign \pid$209  = pid;
  assign \address$210  = \address$17 ;
  assign \new_token$211  = new_token;
  assign \ready_for_response$212  = ready_for_response;
  assign \frame$213  = frame;
  assign \new_frame$214  = new_frame;
  assign \is_in$215  = is_in;
  assign \is_out$216  = is_out;
  assign \is_setup$217  = is_setup;
  assign \is_ping$218  = is_ping;
  assign \ack$219  = 1'h0;
  assign \stall$221  = 1'h0;
  assign \ack$222  = ack;
  assign \nak$223  = nak;
  assign \stall$224  = stall;
  assign \nyet$225  = nyet;
  assign \ready$232  = \ready$85 ;
  assign \ready$233  = \ready$85 ;
  assign \port$1347$0  = \$9 ;
  assign \$1  = 2'h0;
  assign full_speed_only = 1'h0;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:101" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBControlEndpoint (usb_rst, is_in, is_out, is_setup, is_ping, crc, active_config, rx_active, rx_data, rx_valid, speed, new_frame, new_token, frame, pid, address, endpoint, ready_for_response, ready, \rx_invalid$111 , \next$105 
, \valid$103 , \payload$107 , \rx_ready_for_response$109 , \ack$80 , \nak$82 , \stall$84 , nyet, tx_allowed, tx_timeout, rx_timeout, ack, \start$34 , start, valid, first, last, payload, tx_data_pid, nak, stall, address_changed
, new_address, config_changed, new_config, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$2  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  wire \$14 ;
  wire \$15 ;
  wire \$16 ;
  wire \$17 ;
  wire \$18 ;
  wire \$19 ;
  wire \$2 ;
  wire \$20 ;
  wire \$21 ;
  wire \$22 ;
  wire \$23 ;
  wire \$24 ;
  wire \$25 ;
  wire \$26 ;
  wire \$27 ;
  wire \$28 ;
  wire \$29 ;
  wire \$3 ;
  wire \$30 ;
  wire \$31 ;
  wire \$32 ;
  wire \$33 ;
  wire \$34 ;
  wire \$35 ;
  wire \$36 ;
  wire \$37 ;
  reg [2:0] \$38 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output ack;
  reg ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$129 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$131 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:156" *)
  wire \ack$74 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$75 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \ack$80 ;
  wire \ack$80 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$81 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:72" *)
  input [7:0] active_config;
  wire [7:0] active_config;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:72" *)
  wire [7:0] \active_config$136 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:89" *)
  wire [7:0] \active_config$93 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [6:0] address;
  wire [6:0] address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$53 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$7 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:69" *)
  output address_changed;
  wire address_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:69" *)
  wire \address_changed$132 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:69" *)
  wire \address_changed$89 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:64" *)
  wire claim;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:73" *)
  output config_changed;
  wire config_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:73" *)
  wire \config_changed$134 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:73" *)
  wire \config_changed$95 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input [15:0] crc;
  wire [15:0] crc;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:66" *)
  reg data_requested;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:66" *)
  wire \data_requested$127 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] endpoint;
  wire [3:0] endpoint;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$54 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output first;
  wire first;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$123 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$66 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [10:0] frame;
  wire [10:0] frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$57 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [2:0] fsm_state = 3'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] index;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \index$47 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_in;
  wire is_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$59 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire is_in_request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire \is_in_request$41 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_out;
  wire is_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$60 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_ping;
  wire is_ping;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$25 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$62 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_setup;
  wire is_setup;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$23 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$61 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output last;
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$124 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$68 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] length;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \length$119 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \length$49 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output nak;
  wire nak;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$77 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \nak$82 ;
  wire \nak$82 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$83 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:70" *)
  output [6:0] new_address;
  wire [6:0] new_address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:70" *)
  wire [6:0] \new_address$133 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:70" *)
  wire [6:0] \new_address$91 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:74" *)
  output [7:0] new_config;
  wire [7:0] new_config;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:74" *)
  wire [7:0] \new_config$135 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:74" *)
  wire [7:0] \new_config$97 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_frame;
  wire new_frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$58 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_token;
  wire new_token;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$55 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  reg next;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input \next$105 ;
  wire \next$105 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input nyet;
  wire nyet;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$87 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output [7:0] payload;
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  reg [7:0] \payload$106 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input [7:0] \payload$107 ;
  wire [7:0] \payload$107 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$125 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$70 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] pid;
  wire [3:0] pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$5 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$52 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$126 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$72 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input ready_for_response;
  wire ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$56 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire received;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire \received$138 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire \received$51 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [4:0] recipient;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [4:0] \recipient$37 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [7:0] request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [7:0] \request$139 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [7:0] \request$43 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:753" *)
  input rx_active;
  wire rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:745" *)
  input [7:0] rx_data;
  wire [7:0] rx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:79" *)
  reg rx_invalid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  input \rx_invalid$111 ;
  wire \rx_invalid$111 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:78" *)
  reg rx_ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:95" *)
  input \rx_ready_for_response$109 ;
  wire \rx_ready_for_response$109 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input rx_timeout;
  wire rx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \rx_timeout$33 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:746" *)
  input rx_valid;
  wire rx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:83" *)
  input [1:0] speed;
  wire [1:0] speed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:83" *)
  wire [1:0] \speed$27 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output stall;
  wire stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$130 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$79 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \stall$84 ;
  wire \stall$84 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$85 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  output start;
  wire start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire \start$1 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  output \start$34 ;
  wire \start$34 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \start$35 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:67" *)
  reg status_requested;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:67" *)
  wire \status_requested$128 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input tx_allowed;
  wire tx_allowed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_allowed$29 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:84" *)
  output tx_data_pid;
  wire tx_data_pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:84" *)
  wire \tx_data_pid$137 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:100" *)
  wire [1:0] tx_pid_toggle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input tx_timeout;
  wire tx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_timeout$31 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [1:0] \type ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [1:0] \type$120 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [1:0] \type$39 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output valid;
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  reg \valid$102 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input \valid$103 ;
  wire \valid$103 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$122 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$64 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] value;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \value$118 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \value$45 ;
  assign \$1  = \ack$74  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:173" *) \ack$75 ;
  assign \$2  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:195" *) endpoint;
  assign \$3  = ready_for_response & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:226" *) \$2 ;
  assign \$4  = \$3  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:227" *) is_in;
  assign \$5  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:195" *) endpoint;
  assign \$6  = \$5  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:244" *) is_out;
  assign \$7  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:195" *) endpoint;
  assign \$8  = \$7  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:256" *) ready_for_response;
  assign \$9  = \$8  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:256" *) is_ping;
  assign \$10  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:195" *) endpoint;
  assign \$11  = ready_for_response & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:269" *) \$10 ;
  assign \$12  = \$11  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:270" *) is_in;
  assign \$13  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:195" *) endpoint;
  assign \$14  = \rx_ready_for_response$109  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:280" *) \$13 ;
  assign \$15  = \$14  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:281" *) is_out;
  assign \$16  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:195" *) endpoint;
  assign \$17  = \$16  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:285" *) ready_for_response;
  assign \$18  = \$17  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:285" *) is_ping;
  assign \$19  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$20  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$21  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$22  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  assign \$23  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h4;
  assign \$24  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:195" *) endpoint;
  assign \$25  = received & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:203" *) \$24 ;
  assign \$26  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:555" *) length;
  assign \$27  = new_token & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:96" *) is_setup;
  assign \$28  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:195" *) endpoint;
  assign \$29  = \$28  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:233" *) new_token;
  assign \$30  = is_out | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:233" *) is_ping;
  assign \$31  = \$29  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:233" *) \$30 ;
  assign \$32  = new_token & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:96" *) is_setup;
  assign \$33  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:195" *) endpoint;
  assign \$34  = \$33  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:252" *) new_token;
  assign \$35  = \$34  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:252" *) is_in;
  assign \$36  = new_token & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:96" *) is_setup;
  assign \$37  = new_token & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:96" *) is_setup;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$38 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:163" *)
  \USBStreamOutDeviceExample.usb.USBControlEndpoint.StandardRequestHandler  StandardRequestHandler (
    .ack(\ack$129 ),
    .\ack$25 (\ack$80 ),
    .active_config(active_config),
    .address_changed(\address_changed$132 ),
    .claim(claim),
    .config_changed(\config_changed$134 ),
    .data_requested(data_requested),
    .first(\first$123 ),
    .last(\last$124 ),
    .length(length),
    .new_address(\new_address$133 ),
    .new_config(\new_config$135 ),
    .payload(\payload$125 ),
    .\ready$16 (\ready$126 ),
    .received(received),
    .request(request),
    .stall(\stall$130 ),
    .status_requested(status_requested),
    .tx_data_pid(\tx_data_pid$137 ),
    .\type (\type ),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(\valid$122 ),
    .value(value)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:151" *)
  \USBStreamOutDeviceExample.usb.USBControlEndpoint.request_mux  request_mux (
    .ack(\ack$80 ),
    .\ack$108 (\ack$75 ),
    .\ack$112 (\ack$129 ),
    .active_config(active_config),
    .address(address),
    .address_changed(address_changed),
    .\address_changed$117 (\address_changed$132 ),
    .config_changed(config_changed),
    .\config_changed$121 (\config_changed$134 ),
    .data_requested(data_requested),
    .endpoint(endpoint),
    .first(first),
    .\first$99 (\first$123 ),
    .frame(frame),
    .i(claim),
    .index(index),
    .is_in(is_in),
    .is_in_request(is_in_request),
    .is_out(is_out),
    .is_ping(is_ping),
    .is_setup(is_setup),
    .last(last),
    .\last$101 (\last$124 ),
    .length(length),
    .nak(\nak$82 ),
    .\nak$109 (nak),
    .new_address(new_address),
    .\new_address$119 (\new_address$133 ),
    .new_config(new_config),
    .\new_config$123 (\new_config$135 ),
    .new_frame(new_frame),
    .new_token(new_token),
    .next(next),
    .nyet(nyet),
    .payload(\payload$106 ),
    .\payload$102 (payload),
    .\payload$103 (\payload$125 ),
    .pid(pid),
    .ready(\ready$126 ),
    .\ready$105 (ready),
    .ready_for_response(ready_for_response),
    .received(received),
    .recipient(recipient),
    .request(request),
    .rx_invalid(rx_invalid),
    .rx_ready_for_response(rx_ready_for_response),
    .stall(\stall$84 ),
    .\stall$110 (stall),
    .\stall$114 (\stall$130 ),
    .status_requested(status_requested),
    .tx_data_pid(tx_data_pid),
    .\tx_data_pid$107 (\tx_data_pid$137 ),
    .\type (\type ),
    .valid(\valid$102 ),
    .\valid$96 (valid),
    .\valid$97 (\valid$122 ),
    .value(value)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\control.py:133" *)
  \USBStreamOutDeviceExample.usb.USBControlEndpoint.setup_decoder  setup_decoder (
    .ack(\ack$74 ),
    .crc(crc),
    .index(index),
    .is_in_request(is_in_request),
    .\length$28 (length),
    .new_token(new_token),
    .pid(pid),
    .received(received),
    .recipient(recipient),
    .request(request),
    .rx_active(rx_active),
    .rx_data(rx_data),
    .rx_valid(rx_valid),
    .speed(speed),
    .start(start),
    .\start$4 (\start$34 ),
    .tx_allowed(tx_allowed),
    .\type (\type ),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .value(value)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    ack = \$1 ;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          if (\$9 ) begin
            ack = 1'h1;
          end
      3'h3:
          /* empty */;
      3'h4:
          if (\$18 ) begin
            ack = 1'h1;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    data_requested = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          if (\$4 ) begin
            data_requested = 1'h1;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    \valid$102  = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          if (\$6 ) begin
            \valid$102  = \valid$103 ;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    next = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          if (\$6 ) begin
            next = \next$105 ;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    \payload$106  = 8'h00;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          if (\$6 ) begin
            \payload$106  = \payload$107 ;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    rx_ready_for_response = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          if (\$6 ) begin
            rx_ready_for_response = \rx_ready_for_response$109 ;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    rx_invalid = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          if (\$6 ) begin
            rx_invalid = \rx_invalid$111 ;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    status_requested = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h3:
          if (\$12 ) begin
            status_requested = 1'h1;
          end
      3'h4:
          if (\$15 ) begin
            status_requested = 1'h1;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$2 ) begin end
    \$38  = fsm_state;
    casez (fsm_state)
      3'h0:
          if (\$25 ) begin
            (* full_case = 32'd1 *)
            if (\$26 ) begin
              (* full_case = 32'd1 *)
              if (is_in_request) begin
                \$38  = 3'h1;
              end else begin
                \$38  = 3'h2;
              end
            end else begin
              \$38  = 3'h3;
            end
          end
      3'h1:
        begin
          if (\$27 ) begin
            \$38  = 3'h0;
          end
          if (\$31 ) begin
            \$38  = 3'h4;
          end
        end
      3'h2:
        begin
          if (\$32 ) begin
            \$38  = 3'h0;
          end
          if (\$35 ) begin
            \$38  = 3'h3;
          end
        end
      3'h3:
          if (\$36 ) begin
            \$38  = 3'h0;
          end
      3'h4:
          if (\$37 ) begin
            \$38  = 3'h0;
          end
    endcase
    if (usb_rst) begin
      \$38  = 3'h0;
    end
  end
  assign \start$1  = start;
  assign \crc$3  = crc;
  assign \pid$5  = pid;
  assign \address$7  = address;
  assign \endpoint$9  = endpoint;
  assign \new_token$11  = new_token;
  assign \ready_for_response$13  = ready_for_response;
  assign \frame$15  = frame;
  assign \new_frame$17  = new_frame;
  assign \is_in$19  = is_in;
  assign \is_out$21  = is_out;
  assign \is_setup$23  = is_setup;
  assign \is_ping$25  = is_ping;
  assign \speed$27  = speed;
  assign \tx_allowed$29  = tx_allowed;
  assign \tx_timeout$31  = tx_timeout;
  assign \rx_timeout$33  = rx_timeout;
  assign \start$35  = \start$34 ;
  assign \recipient$37  = recipient;
  assign \type$39  = \type ;
  assign \is_in_request$41  = is_in_request;
  assign \request$43  = request;
  assign \value$45  = value;
  assign \index$47  = index;
  assign \length$49  = length;
  assign \received$51  = received;
  assign \pid$52  = pid;
  assign \address$53  = address;
  assign \endpoint$54  = endpoint;
  assign \new_token$55  = new_token;
  assign \ready_for_response$56  = ready_for_response;
  assign \frame$57  = frame;
  assign \new_frame$58  = new_frame;
  assign \is_in$59  = is_in;
  assign \is_out$60  = is_out;
  assign \is_setup$61  = is_setup;
  assign \is_ping$62  = is_ping;
  assign \valid$64  = valid;
  assign \first$66  = first;
  assign \last$68  = last;
  assign \payload$70  = payload;
  assign \ready$72  = ready;
  assign \nak$77  = nak;
  assign \stall$79  = stall;
  assign \ack$81  = \ack$80 ;
  assign \nak$83  = \nak$82 ;
  assign \stall$85  = \stall$84 ;
  assign \nyet$87  = nyet;
  assign \address_changed$89  = address_changed;
  assign \new_address$91  = new_address;
  assign \active_config$93  = active_config;
  assign \config_changed$95  = config_changed;
  assign \new_config$97  = new_config;
  assign tx_pid_toggle = { 1'h0, tx_data_pid };
  assign \value$118  = value;
  assign \length$119  = length;
  assign \type$120  = \type ;
  assign \data_requested$127  = data_requested;
  assign \status_requested$128  = status_requested;
  assign \ack$131  = \ack$80 ;
  assign \active_config$136  = active_config;
  assign \received$138  = received;
  assign \request$139  = request;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:86" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBControlEndpoint.StandardRequestHandler (usb_rst, active_config, \ack$25 , data_requested, status_requested, received, \type , request, value, length, \ready$16 , claim, valid, first, last, payload, ack, stall, address_changed, new_address, config_changed
, new_config, tx_data_pid, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$3  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  wire [11:0] \$14 ;
  wire \$15 ;
  wire \$16 ;
  reg [10:0] \$17 ;
  reg \$18 ;
  reg [2:0] \$19 ;
  wire \$2 ;
  reg \$20 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output ack;
  reg ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \ack$25 ;
  wire \ack$25 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:72" *)
  input [7:0] active_config;
  wire [7:0] active_config;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:69" *)
  output address_changed;
  reg address_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:64" *)
  output claim;
  reg claim;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:73" *)
  output config_changed;
  reg config_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:66" *)
  input data_requested;
  wire data_requested;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:386" *)
  reg [7:0] datum_0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:386" *)
  reg [7:0] datum_1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:176" *)
  reg expecting_ack = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output first;
  reg first;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$10 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$31 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [2:0] fsm_state = 3'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output last;
  reg last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$32 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [15:0] length;
  wire [15:0] length;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \length$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:394" *)
  reg [1:0] max_length;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:70" *)
  output [6:0] new_address;
  reg [6:0] new_address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:74" *)
  output [7:0] new_config;
  reg [7:0] new_config;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output [7:0] payload;
  reg [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$33 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  reg ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \ready$16 ;
  wire \ready$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  reg \ready$34 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input received;
  wire received;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [7:0] request;
  wire [7:0] request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output stall;
  reg stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:193" *)
  wire \stall$35 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:383" *)
  reg start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:189" *)
  reg \start$36 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:190" *)
  reg [10:0] start_position = 11'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:67" *)
  input status_requested;
  wire status_requested;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:84" *)
  output tx_data_pid;
  reg tx_data_pid = 1'h1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [1:0] \type ;
  wire [1:0] \type ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output valid;
  reg valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$30 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$8 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [15:0] value;
  wire [15:0] value;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \value$1 ;
  assign \$1  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:113" *) \type ;
  assign \$3  = data_requested | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:229" *) status_requested;
  assign \$4  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$5  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$6  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$7  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  assign \$8  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h4;
  assign \$9  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h5;
  assign \$10  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h6;
  assign \$11  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:113" *) \type ;
  assign \$13  = \ack$25  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:190" *) expecting_ack;
  assign \$14  = start_position + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:195" *) 7'h40;
  assign \$15  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:203" *) tx_data_pid;
  assign \$16  = data_requested | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:229" *) status_requested;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:190" *)
  always @(posedge usb_clk)
    start_position <= \$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:84" *)
  always @(posedge usb_clk)
    tx_data_pid <= \$18 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:176" *)
  always @(posedge usb_clk)
    expecting_ack <= \$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:99" *)
  \USBStreamOutDeviceExample.usb.USBControlEndpoint.StandardRequestHandler.get_descriptor  get_descriptor (
    .first(\first$31 ),
    .last(\last$32 ),
    .\length$20 (length),
    .payload(\payload$33 ),
    .ready(\ready$34 ),
    .stall(\stall$35 ),
    .start(\start$36 ),
    .start_position(start_position),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(\valid$30 ),
    .value(value)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\standard.py:106" *)
  \USBStreamOutDeviceExample.usb.USBControlEndpoint.StandardRequestHandler.transmitter  transmitter (
    .datum_0(datum_0),
    .datum_1(datum_1),
    .first(\first$10 ),
    .last(\last$12 ),
    .max_length(max_length),
    .payload(\payload$14 ),
    .ready(ready),
    .start(start),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(\valid$8 )
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    claim = 1'h0;
    if (\$1 ) begin
      claim = \$2 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    valid = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            valid = \valid$8 ;
        3'h2:
            if (status_requested) begin
              valid = 1'h1;
            end
        3'h3:
            if (status_requested) begin
              valid = 1'h1;
            end
        3'h4:
            valid = \valid$30 ;
        3'h5:
            valid = \valid$8 ;
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    first = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            first = \first$10 ;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            first = \first$31 ;
        3'h5:
            first = \first$10 ;
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    last = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            last = \last$12 ;
        3'h2:
            if (status_requested) begin
              last = 1'h1;
            end
        3'h3:
            if (status_requested) begin
              last = 1'h1;
            end
        3'h4:
            last = \last$32 ;
        3'h5:
            last = \last$12 ;
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    payload = 8'h00;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            payload = \payload$14 ;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            payload = \payload$33 ;
        3'h5:
            payload = \payload$14 ;
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    ready = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            ready = \ready$16 ;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            /* empty */;
        3'h5:
            ready = \ready$16 ;
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    datum_0 = 8'h00;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            datum_0 = 8'h00;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            /* empty */;
        3'h5:
            datum_0 = active_config;
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    datum_1 = 8'h00;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            datum_1 = 8'h00;
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    max_length = 2'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            max_length = 2'h2;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            /* empty */;
        3'h5:
            max_length = 2'h1;
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    start = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            if (data_requested) begin
              start = 1'h1;
            end
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            /* empty */;
        3'h5:
            if (data_requested) begin
              start = 1'h1;
            end
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    ack = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            if (status_requested) begin
              ack = 1'h1;
            end
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            if (status_requested) begin
              ack = 1'h1;
            end
        3'h5:
            if (status_requested) begin
              ack = 1'h1;
            end
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    stall = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            /* empty */;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            stall = \stall$35 ;
        3'h5:
            /* empty */;
        3'h6:
            if (\$3 ) begin
              stall = 1'h1;
            end
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    address_changed = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            /* empty */;
        3'h2:
            if (\ack$25 ) begin
              address_changed = 1'h1;
            end
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    new_address = 7'h00;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            /* empty */;
        3'h2:
            if (\ack$25 ) begin
              new_address = value[6:0];
            end
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    config_changed = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            /* empty */;
        3'h2:
            /* empty */;
        3'h3:
            if (\ack$25 ) begin
              config_changed = 1'h1;
            end
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    new_config = 8'h00;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            /* empty */;
        3'h2:
            /* empty */;
        3'h3:
            if (\ack$25 ) begin
              new_config = { 1'h0, value[6:0] };
            end
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    \ready$34  = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            /* empty */;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            \ready$34  = \ready$16 ;
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    \start$36  = 1'h0;
    if (\$1 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            /* empty */;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            if (data_requested) begin
              \start$36  = 1'h1;
            end
      endcase
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    \$17  = start_position;
    if (\$11 ) begin
      casez (fsm_state)
        3'h0:
            \$17  = 11'h000;
        3'h1:
            /* empty */;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            if (\$13 ) begin
              \$17  = \$14 [10:0];
            end
      endcase
    end
    if (usb_rst) begin
      \$17  = 11'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    \$18  = tx_data_pid;
    if (\$11 ) begin
      casez (fsm_state)
        3'h0:
            \$18  = 1'h1;
        3'h1:
            /* empty */;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
            if (\$13 ) begin
              \$18  = \$15 ;
            end
      endcase
    end
    if (usb_rst) begin
      \$18  = 1'h1;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    \$19  = fsm_state;
    if (\$11 ) begin
      casez (fsm_state)
        3'h0:
            if (received) begin
              if (\$12 ) begin
                (* full_case = 32'd1 *)
                casez (request)
                  8'h00:
                      \$19  = 3'h1;
                  8'h05:
                      \$19  = 3'h2;
                  8'h09:
                      \$19  = 3'h3;
                  8'h06:
                      \$19  = 3'h4;
                  8'h08:
                      \$19  = 3'h5;
                  default:
                      \$19  = 3'h6;
                endcase
              end
            end
        3'h1:
            if (status_requested) begin
              \$19  = 3'h0;
            end
        3'h2:
            if (\ack$25 ) begin
              \$19  = 3'h0;
            end
        3'h3:
            if (\ack$25 ) begin
              \$19  = 3'h0;
            end
        3'h4:
          begin
            if (status_requested) begin
              \$19  = 3'h0;
            end
            if (\stall$35 ) begin
              \$19  = 3'h0;
            end
          end
        3'h5:
            if (status_requested) begin
              \$19  = 3'h0;
            end
        3'h6:
            if (\$16 ) begin
              \$19  = 3'h0;
            end
      endcase
    end
    if (usb_rst) begin
      \$19  = 3'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$3 ) begin end
    \$20  = expecting_ack;
    if (\$11 ) begin
      casez (fsm_state)
        3'h0:
            /* empty */;
        3'h1:
            /* empty */;
        3'h2:
            /* empty */;
        3'h3:
            /* empty */;
        3'h4:
          begin
            if (data_requested) begin
              \$20  = 1'h1;
            end
            if (\$13 ) begin
              \$20  = 1'h0;
            end
            if (\stall$35 ) begin
              \$20  = 1'h0;
            end
          end
      endcase
    end
    if (usb_rst) begin
      \$20  = 1'h0;
    end
  end
  assign \value$1  = value;
  assign \length$3  = length;
  assign \$2  = 1'h1;
  assign \$12  = 1'h1;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:355" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBControlEndpoint.StandardRequestHandler.get_descriptor (usb_rst, value, \length$20 , ready, start, start_position, stall, valid, payload, first, last, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$4  = 0;
  wire \$1 ;
  wire \$10 ;
  wire [16:0] \$11 ;
  wire \$12 ;
  wire [16:0] \$13 ;
  wire \$14 ;
  wire \$15 ;
  wire [16:0] \$16 ;
  wire \$17 ;
  wire [16:0] \$18 ;
  wire \$19 ;
  wire \$2 ;
  wire \$20 ;
  wire \$21 ;
  wire [6:0] \$22 ;
  wire [6:0] \$23 ;
  wire \$24 ;
  wire \$25 ;
  wire \$26 ;
  wire \$27 ;
  wire \$28 ;
  wire \$29 ;
  wire [8:0] \$3 ;
  wire [16:0] \$30 ;
  wire \$31 ;
  wire [16:0] \$32 ;
  wire \$33 ;
  wire \$34 ;
  wire \$35 ;
  wire \$36 ;
  wire [16:0] \$37 ;
  wire \$38 ;
  wire [16:0] \$39 ;
  wire [32:0] \$4 ;
  wire \$40 ;
  wire \$41 ;
  wire \$42 ;
  wire [6:0] \$43 ;
  wire [16:0] \$44 ;
  reg [15:0] \$45 ;
  reg [15:0] \$46 ;
  reg [2:0] \$47 ;
  reg [5:0] \$48 ;
  reg [5:0] \$49 ;
  wire [32:0] \$5 ;
  reg [15:0] \$50 ;
  wire [5:0] \$59 ;
  wire [5:0] \$6 ;
  wire [6:0] \$7 ;
  wire [1:0] \$8 ;
  wire [7:0] \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:406" *)
  reg [15:0] bytes_sent = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:410" *)
  reg [5:0] descriptor_data_base_address = 6'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:409" *)
  reg [15:0] descriptor_length = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output first;
  reg first;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [2:0] fsm_state = 3'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:359" *)
  wire [7:0] index;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output last;
  reg last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:390" *)
  reg [15:0] length = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:187" *)
  input [15:0] \length$20 ;
  wire [15:0] \length$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output [7:0] payload;
  reg [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:405" *)
  reg [5:0] position_in_stream = 6'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:372" *)
  reg [5:0] rom_r_addr;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:372" *)
  wire [31:0] rom_r_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:193" *)
  output stall;
  reg stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:189" *)
  input start;
  wire start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:190" *)
  input [10:0] start_position;
  wire [10:0] start_position;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:358" *)
  wire [7:0] type_number;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output valid;
  reg valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:186" *)
  input [15:0] value;
  wire [15:0] value;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:371" *)
  reg [31:0] rom_read_port [40:0];
  initial begin
    rom_read_port[0] = 32'd0;
    rom_read_port[1] = 32'd65552;
    rom_read_port[2] = 32'd65556;
    rom_read_port[3] = 32'd262168;
    rom_read_port[4] = 32'd1179688;
    rom_read_port[5] = 32'd2097212;
    rom_read_port[6] = 32'd262236;
    rom_read_port[7] = 32'd655456;
    rom_read_port[8] = 32'd2228332;
    rom_read_port[9] = 32'd1310864;
    rom_read_port[10] = 32'd302055426;
    rom_read_port[11] = 32'd64;
    rom_read_port[12] = 32'd3491117839;
    rom_read_port[13] = 32'd258;
    rom_read_port[14] = 32'd50397184;
    rom_read_port[15] = 32'd151134208;
    rom_read_port[16] = 32'd16842880;
    rom_read_port[17] = 32'd4194894848;
    rom_read_port[18] = 32'd196607;
    rom_read_port[19] = 32'd4278191877;
    rom_read_port[20] = 32'd16908290;
    rom_read_port[21] = 32'd4278650241;
    rom_read_port[22] = 32'd33555199;
    rom_read_port[23] = 32'd67307780;
    rom_read_port[24] = 32'd167988224;
    rom_read_port[25] = 32'd1426083328;
    rom_read_port[26] = 32'd1090519040;
    rom_read_port[27] = 32'd570643712;
    rom_read_port[28] = 32'd1929405696;
    rom_read_port[29] = 32'd1912610816;
    rom_read_port[30] = 32'd1224756992;
    rom_read_port[31] = 32'd536900352;
    rom_read_port[32] = 32'd1946186240;
    rom_read_port[33] = 32'd1694523648;
    rom_read_port[34] = 32'd1828742400;
    rom_read_port[35] = 32'd1912602624;
    rom_read_port[36] = 32'd335769088;
    rom_read_port[37] = 32'd1862279168;
    rom_read_port[38] = 32'd1929405696;
    rom_read_port[39] = 32'd1912629504;
    rom_read_port[40] = 32'd1627417600;
  end
  reg [31:0] _0_;
  always @(posedge usb_clk) begin
    _0_ <= rom_read_port[rom_r_addr];
  end
  assign rom_r_data = _0_;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:390" *)
  always @(posedge usb_clk)
    length <= \$45 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:406" *)
  always @(posedge usb_clk)
    bytes_sent <= \$46 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$47 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:405" *)
  always @(posedge usb_clk)
    position_in_stream <= \$48 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:410" *)
  always @(posedge usb_clk)
    descriptor_data_base_address <= \$49 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:409" *)
  always @(posedge usb_clk)
    descriptor_length <= \$50 ;
  assign \$1  = value[15:8] <= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:445" *) 2'h3;
  assign \$2  = value[7:0] >= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:466" *) rom_r_data[31:16];
  assign \$3  = rom_r_data[7:2] + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:472" *) value[7:0];
  assign \$4  = rom_r_data + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:487" *) position_in_stream;
  assign \$7  = descriptor_data_base_address + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:514" *) \$6 ;
  assign \$8  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:515" *) position_in_stream[1:0];
  assign \$59  = \$8  * (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:515" *) 4'h8;
  assign \$9  = rom_r_data >> \$59 ;
  assign \$10  = position_in_stream == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:413" *) start_position;
  assign \$11  = descriptor_length - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:415" *) 1'h1;
  assign \$12  = position_in_stream == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:415" *) \$11 ;
  assign \$13  = bytes_sent + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:416" *) 1'h1;
  assign \$14  = \$13  >= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:416" *) length;
  assign \$15  = \$12  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:415" *) \$14 ;
  assign \$16  = descriptor_length - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:415" *) 1'h1;
  assign \$17  = position_in_stream == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:415" *) \$16 ;
  assign \$18  = bytes_sent + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:416" *) 1'h1;
  assign \$19  = \$18  >= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:416" *) length;
  assign \$20  = \$17  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:415" *) \$19 ;
  assign \$21  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:526" *) \$20 ;
  assign \$22  = position_in_stream + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:531" *) 1'h1;
  assign \$23  = descriptor_data_base_address + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:531" *) \$22 [5:2];
  assign \$24  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$25  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$26  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$27  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  assign \$28  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h4;
  assign \$29  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h5;
  assign \$30  = \length$20  - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:395" *) start_position;
  assign \$31  = $signed(\$30 ) <= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:396" *) $signed(8'h40);
  assign \$32  = \length$20  - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:395" *) start_position;
  assign \$33  = value[15:8] <= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:445" *) 2'h3;
  assign \$34  = value[7:0] >= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:466" *) rom_r_data[31:16];
  assign \$35  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:473" *) length;
  assign \$36  = position_in_stream >= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:498" *) rom_r_data[31:16];
  assign \$37  = descriptor_length - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:415" *) 1'h1;
  assign \$38  = position_in_stream == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:415" *) \$37 ;
  assign \$39  = bytes_sent + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:416" *) 1'h1;
  assign \$40  = \$39  >= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:416" *) length;
  assign \$41  = \$38  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:415" *) \$40 ;
  assign \$42  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:526" *) \$41 ;
  assign \$43  = position_in_stream + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:528" *) 1'h1;
  assign \$44  = bytes_sent + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\descriptor.py:529" *) 1'h1;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    stall = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          (* full_case = 32'd1 *)
          if (\$1 ) begin
          end else begin
            stall = 1'h1;
          end
      3'h2:
          if (\$2 ) begin
            stall = 1'h1;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    valid = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          valid = 1'h1;
      3'h3:
          valid = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    payload = 8'h00;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          payload = \$9 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    first = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          first = \$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    last = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          last = \$15 ;
      3'h3:
          last = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    (* full_case = 32'd1 *)
    if (\$31 ) begin
      \$45  = \$32 [15:0];
    end else begin
      \$45  = 16'h0040;
    end
    if (usb_rst) begin
      \$45  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    \$46  = bytes_sent;
    casez (fsm_state)
      3'h0:
          \$46  = 16'h0000;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (ready) begin
            if (\$42 ) begin
              \$46  = \$44 [15:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$46  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    \$47  = fsm_state;
    casez (fsm_state)
      3'h0:
          if (start) begin
            \$47  = 3'h1;
          end
      3'h1:
          (* full_case = 32'd1 *)
          if (\$33 ) begin
            \$47  = 3'h2;
          end else begin
            \$47  = 3'h0;
          end
      3'h2:
          (* full_case = 32'd1 *)
          if (\$34 ) begin
            \$47  = 3'h0;
          end else begin
            (* full_case = 32'd1 *)
            if (\$35 ) begin
              \$47  = 3'h3;
            end else begin
              \$47  = 3'h4;
            end
          end
      3'h4:
          (* full_case = 32'd1 *)
          if (\$36 ) begin
            \$47  = 3'h3;
          end else begin
            \$47  = 3'h5;
          end
      3'h5:
          if (ready) begin
            (* full_case = 32'd1 *)
            if (\$42 ) begin
            end else begin
              \$47  = 3'h0;
            end
          end
      3'h3:
          \$47  = 3'h0;
    endcase
    if (usb_rst) begin
      \$47  = 3'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    \$48  = position_in_stream;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          \$48  = start_position[5:0];
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (ready) begin
            if (\$42 ) begin
              \$48  = \$43 [5:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$48  = 6'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    \$49  = descriptor_data_base_address;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          \$49  = rom_r_data[7:2];
      3'h5:
          if (ready) begin
            (* full_case = 32'd1 *)
            if (\$42 ) begin
            end else begin
              \$49  = 6'h00;
            end
          end
    endcase
    if (usb_rst) begin
      \$49  = 6'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    \$50  = descriptor_length;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          \$50  = rom_r_data[31:16];
      3'h5:
          if (ready) begin
            (* full_case = 32'd1 *)
            if (\$42 ) begin
            end else begin
              \$50  = 16'h0000;
            end
          end
    endcase
    if (usb_rst) begin
      \$50  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$4 ) begin end
    rom_r_addr = 6'h00;
    casez (fsm_state)
      3'h0:
          rom_r_addr = value[13:8];
      3'h1:
          rom_r_addr = value[13:8];
      3'h2:
          (* full_case = 32'd1 *)
          if (\$2 ) begin
          end else begin
            rom_r_addr = \$3 [5:0];
          end
      3'h4:
          rom_r_addr = \$5 [5:0];
      3'h5:
        begin
          rom_r_addr = \$7 [5:0];
          if (ready) begin
            if (\$21 ) begin
              rom_r_addr = \$23 [5:0];
            end
          end
        end
    endcase
  end
  assign index = value[7:0];
  assign type_number = value[15:8];
  assign \$5  = { 2'h0, \$4 [32:2] };
  assign \$6  = { 2'h0, position_in_stream[5:2] };
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:401" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBControlEndpoint.StandardRequestHandler.transmitter (usb_rst, first, last, valid, ready, datum_0, datum_1, max_length, start, payload, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$5  = 0;
  wire \$1 ;
  wire [1:0] \$10 ;
  wire \$11 ;
  wire [1:0] \$12 ;
  wire \$13 ;
  wire \$14 ;
  wire [1:0] \$15 ;
  wire \$16 ;
  wire \$17 ;
  wire [1:0] \$18 ;
  wire \$19 ;
  wire \$2 ;
  wire [1:0] \$20 ;
  wire \$21 ;
  wire \$22 ;
  reg \$23 ;
  reg [1:0] \$24 ;
  wire [2:0] \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  reg [7:0] \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:386" *)
  input [7:0] datum_0;
  wire [7:0] datum_0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:386" *)
  input [7:0] datum_1;
  wire [7:0] datum_1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:384" *)
  reg done;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output first;
  wire first;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [1:0] fsm_state = 2'h1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output last;
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:394" *)
  input [1:0] max_length;
  wire [1:0] max_length;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output [7:0] payload;
  reg [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:404" *)
  reg position_in_stream = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:383" *)
  input start;
  wire start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:389" *)
  wire start_position;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:422" *)
  reg \start_position$6 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output valid;
  wire valid;
  assign \$1  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:407" *) position_in_stream;
  assign first = \$1  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:414" *) valid;
  assign \$3  = max_length - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:410" *) 1'h1;
  assign \$4  = position_in_stream == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:410" *) \$3 ;
  assign \$5  = \$2  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:409" *) \$4 ;
  assign last = \$5  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:415" *) valid;
  assign valid = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$8  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$9  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$10  = position_in_stream + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:458" *) 1'h1;
  assign \$11  = \$10  < (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:458" *) max_length;
  assign \$12  = position_in_stream + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:459" *) 1'h1;
  assign \$13  = \$12  < (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:459" *) 2'h2;
  assign \$14  = \$11  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:458" *) \$13 ;
  assign \$15  = position_in_stream + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:463" *) 1'h1;
  assign \$16  = max_length > (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:446" *) 1'h0;
  assign \$17  = start & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:446" *) \$16 ;
  assign \$18  = position_in_stream + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:458" *) 1'h1;
  assign \$19  = \$18  < (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:458" *) max_length;
  assign \$20  = position_in_stream + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:459" *) 1'h1;
  assign \$21  = \$20  < (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:459" *) 2'h2;
  assign \$22  = \$19  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:458" *) \$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\generator.py:404" *)
  always @(posedge usb_clk)
    position_in_stream <= \$23 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$24 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    (* full_case = 32'd1 *)
    casez (position_in_stream)
      1'h0:
          \$7  = datum_0;
      1'h1:
          \$7  = datum_1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    (* full_case = 32'd1 *)
    if (\$6 ) begin
      \start_position$6  = 1'h1;
    end else begin
      \start_position$6  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    payload = 8'h00;
    casez (fsm_state)
      2'h1:
          /* empty */;
      2'h0:
          payload = \$7 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    done = 1'h0;
    casez (fsm_state)
      2'h1:
          /* empty */;
      2'h0:
          /* empty */;
      2'h2:
          done = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    \$23  = position_in_stream;
    casez (fsm_state)
      2'h1:
          \$23  = \start_position$6 ;
      2'h0:
          if (ready) begin
            if (\$14 ) begin
              \$23  = \$15 [0];
            end
          end
    endcase
    if (usb_rst) begin
      \$23  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$5 ) begin end
    \$24  = fsm_state;
    casez (fsm_state)
      2'h1:
          if (\$17 ) begin
            \$24  = 2'h0;
          end
      2'h0:
          if (ready) begin
            (* full_case = 32'd1 *)
            if (\$22 ) begin
            end else begin
              \$24  = 2'h2;
            end
          end
      2'h2:
          \$24  = 2'h1;
    endcase
    if (usb_rst) begin
      \$24  = 2'h1;
    end
  end
  assign start_position = 1'h0;
  assign \$2  = position_in_stream;
  assign \$6  = 1'h0;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:349" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBControlEndpoint.request_mux (is_out, is_setup, is_ping, active_config, new_frame, new_token, frame, pid, address, endpoint, ready_for_response, \ready$105 , ack, nak, stall, nyet, data_requested, valid, next, payload, rx_ready_for_response
, rx_invalid, status_requested, received, recipient, \type , is_in_request, request, value, index, length, \valid$96 , first, last, \payload$102 , ready, tx_data_pid, \ack$108 , \nak$109 , \stall$110 , address_changed, new_address
, config_changed, new_config, i, \valid$97 , \first$99 , \last$101 , \payload$103 , \ack$112 , \stall$114 , \address_changed$117 , \new_address$119 , \config_changed$121 , \new_config$123 , \tx_data_pid$107 , is_in);
  reg \$auto$verilog_backend.cc:2352:dump_module$6  = 0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input ack;
  wire ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output \ack$108 ;
  reg \ack$108 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \ack$112 ;
  wire \ack$112 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$131 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$43 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$83 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:72" *)
  input [7:0] active_config;
  wire [7:0] active_config;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:72" *)
  wire [7:0] \active_config$51 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:72" *)
  wire [7:0] \active_config$87 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [6:0] address;
  wire [6:0] address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$71 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:69" *)
  output address_changed;
  reg address_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:69" *)
  input \address_changed$117 ;
  wire \address_changed$117 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:69" *)
  wire \address_changed$135 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:64" *)
  wire claim;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:73" *)
  output config_changed;
  reg config_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:73" *)
  input \config_changed$121 ;
  wire \config_changed$121 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:73" *)
  wire \config_changed$137 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:66" *)
  input data_requested;
  wire data_requested;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:66" *)
  wire \data_requested$39 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:66" *)
  wire \data_requested$81 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] endpoint;
  wire [3:0] endpoint;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$72 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output first;
  reg first;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$126 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \first$99 ;
  wire \first$99 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [10:0] frame;
  wire [10:0] frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$27 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$75 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:64" *)
  input i;
  wire i;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [15:0] index;
  wire [15:0] index;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \index$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \index$67 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_in;
  wire is_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$31 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$77 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input is_in_request;
  wire is_in_request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire \is_in_request$5 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire \is_in_request$64 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_out;
  wire is_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$33 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$78 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_ping;
  wire is_ping;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$37 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$80 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_setup;
  wire is_setup;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$35 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$79 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output last;
  reg last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \last$101 ;
  wire \last$101 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$127 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [15:0] length;
  wire [15:0] length;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \length$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \length$68 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:43" *)
  wire n;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input nak;
  wire nak;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output \nak$109 ;
  reg \nak$109 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$113 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$132 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$45 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$84 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:70" *)
  output [6:0] new_address;
  reg [6:0] new_address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:70" *)
  input [6:0] \new_address$119 ;
  wire [6:0] \new_address$119 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:70" *)
  wire [6:0] \new_address$136 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:74" *)
  output [7:0] new_config;
  reg [7:0] new_config;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:74" *)
  input [7:0] \new_config$123 ;
  wire [7:0] \new_config$123 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:74" *)
  wire [7:0] \new_config$138 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_frame;
  wire new_frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$29 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$76 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_token;
  wire new_token;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$23 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$73 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input next;
  wire next;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$55 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$89 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input nyet;
  wire nyet;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  reg \nyet$111 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$115 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$134 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$49 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$86 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:42" *)
  wire [-1:0] o;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input [7:0] payload;
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output [7:0] \payload$102 ;
  reg [7:0] \payload$102 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input [7:0] \payload$103 ;
  wire [7:0] \payload$103 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$128 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$57 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$90 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] pid;
  wire [3:0] pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$70 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \ready$105 ;
  wire \ready$105 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  reg \ready$129 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input ready_for_response;
  wire ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$25 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$74 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input received;
  wire received;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire \received$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire \received$69 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [4:0] recipient;
  wire [4:0] recipient;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [4:0] \recipient$1 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [4:0] \recipient$62 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [7:0] request;
  wire [7:0] request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [7:0] \request$65 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [7:0] \request$7 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:79" *)
  input rx_invalid;
  wire rx_invalid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:79" *)
  wire \rx_invalid$61 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:79" *)
  wire \rx_invalid$92 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:78" *)
  input rx_ready_for_response;
  wire rx_ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:78" *)
  wire \rx_ready_for_response$59 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:78" *)
  wire \rx_ready_for_response$91 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input stall;
  wire stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output \stall$110 ;
  reg \stall$110 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \stall$114 ;
  wire \stall$114 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$133 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$47 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$85 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:67" *)
  input status_requested;
  wire status_requested;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:67" *)
  wire \status_requested$41 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:67" *)
  wire \status_requested$82 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:84" *)
  output tx_data_pid;
  reg tx_data_pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:84" *)
  input \tx_data_pid$107 ;
  wire \tx_data_pid$107 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:84" *)
  wire \tx_data_pid$130 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [1:0] \type ;
  wire [1:0] \type ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [1:0] \type$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [1:0] \type$63 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input valid;
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$125 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$53 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$88 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \valid$96 ;
  reg \valid$96 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \valid$97 ;
  wire \valid$97 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  input [15:0] value;
  wire [15:0] value;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \value$66 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  wire [15:0] \value$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:395" *)
  \USBStreamOutDeviceExample.usb.USBControlEndpoint.request_mux.encoder  encoder (
    .i(i),
    .n(n)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:354" *)
  \USBStreamOutDeviceExample.usb.USBControlEndpoint.request_mux.stall_handler  stall_handler (
    .data_requested(data_requested),
    .stall(\stall$133 ),
    .status_requested(status_requested)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \valid$96  = \valid$97 ;
    if (n) begin
      \valid$96  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \nyet$111  = 1'h0;
    if (n) begin
      \nyet$111  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    address_changed = \address_changed$117 ;
    if (n) begin
      address_changed = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    new_address = \new_address$119 ;
    if (n) begin
      new_address = 7'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    config_changed = \config_changed$121 ;
    if (n) begin
      config_changed = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    new_config = \new_config$123 ;
    if (n) begin
      new_config = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \ready$129  = 1'h0;
    if (n) begin
      \ready$129  = \ready$105 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    first = \first$99 ;
    if (n) begin
      first = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    last = \last$101 ;
    if (n) begin
      last = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \payload$102  = \payload$103 ;
    if (n) begin
      \payload$102  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    tx_data_pid = \tx_data_pid$107 ;
    if (n) begin
      tx_data_pid = 1'h1;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \ack$108  = \ack$112 ;
    if (n) begin
      \ack$108  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \nak$109  = 1'h0;
    if (n) begin
      \nak$109  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$6 ) begin end
    \stall$110  = \stall$114 ;
    if (n) begin
      \stall$110  = \stall$133 ;
    end
  end
  assign \recipient$1  = recipient;
  assign \type$3  = \type ;
  assign \is_in_request$5  = is_in_request;
  assign \request$7  = request;
  assign \value$9  = value;
  assign \index$11  = index;
  assign \length$13  = length;
  assign \received$15  = received;
  assign \pid$17  = pid;
  assign \address$19  = address;
  assign \endpoint$21  = endpoint;
  assign \new_token$23  = new_token;
  assign \ready_for_response$25  = ready_for_response;
  assign \frame$27  = frame;
  assign \new_frame$29  = new_frame;
  assign \is_in$31  = is_in;
  assign \is_out$33  = is_out;
  assign \is_setup$35  = is_setup;
  assign \is_ping$37  = is_ping;
  assign \data_requested$39  = data_requested;
  assign \status_requested$41  = status_requested;
  assign \ack$43  = ack;
  assign \nak$45  = nak;
  assign \stall$47  = stall;
  assign \nyet$49  = nyet;
  assign \active_config$51  = active_config;
  assign \valid$53  = valid;
  assign \next$55  = next;
  assign \payload$57  = payload;
  assign \rx_ready_for_response$59  = rx_ready_for_response;
  assign \rx_invalid$61  = rx_invalid;
  assign \recipient$62  = recipient;
  assign \type$63  = \type ;
  assign \is_in_request$64  = is_in_request;
  assign \request$65  = request;
  assign \value$66  = value;
  assign \index$67  = index;
  assign \length$68  = length;
  assign \received$69  = received;
  assign \pid$70  = pid;
  assign \address$71  = address;
  assign \endpoint$72  = endpoint;
  assign \new_token$73  = new_token;
  assign \ready_for_response$74  = ready_for_response;
  assign \frame$75  = frame;
  assign \new_frame$76  = new_frame;
  assign \is_in$77  = is_in;
  assign \is_out$78  = is_out;
  assign \is_setup$79  = is_setup;
  assign \is_ping$80  = is_ping;
  assign \data_requested$81  = data_requested;
  assign \status_requested$82  = status_requested;
  assign \ack$83  = ack;
  assign \nak$84  = nak;
  assign \stall$85  = stall;
  assign \nyet$86  = nyet;
  assign \active_config$87  = active_config;
  assign \valid$88  = valid;
  assign \next$89  = next;
  assign \payload$90  = payload;
  assign \rx_ready_for_response$91  = rx_ready_for_response;
  assign \rx_invalid$92  = rx_invalid;
  assign claim = i;
  assign \nak$113  = 1'h0;
  assign \nyet$115  = 1'h0;
  assign \valid$125  = 1'h0;
  assign \first$126  = 1'h0;
  assign \last$127  = 1'h0;
  assign \payload$128  = 8'h00;
  assign \tx_data_pid$130  = 1'h1;
  assign \ack$131  = 1'h0;
  assign \nak$132  = 1'h0;
  assign \nyet$134  = 1'h0;
  assign \address_changed$135  = 1'h0;
  assign \new_address$136  = 7'h00;
  assign \config_changed$137  = 1'h0;
  assign \new_config$138  = 8'h00;
  assign ready = \ready$105 ;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:46" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBControlEndpoint.request_mux.encoder (i, n);
  reg \$auto$verilog_backend.cc:2352:dump_module$7  = 0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:41" *)
  input i;
  wire i;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:43" *)
  output n;
  reg n;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:42" *)
  wire [-1:0] o;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$7 ) begin end
    n = 1'h0;
    (* full_case = 32'd1 *)
    if (i) begin
    end else begin
      n = 1'h1;
    end
  end
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:435" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBControlEndpoint.request_mux.stall_handler (status_requested, stall, data_requested);
  reg \$auto$verilog_backend.cc:2352:dump_module$8  = 0;
  wire \$1 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:66" *)
  input data_requested;
  wire data_requested;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output stall;
  reg stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:67" *)
  input status_requested;
  wire status_requested;
  assign \$1  = data_requested | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:438" *) status_requested;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$8 ) begin end
    stall = 1'h0;
    if (\$1 ) begin
      stall = 1'h1;
    end
  end
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:160" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBControlEndpoint.setup_decoder (usb_rst, crc, rx_active, rx_data, rx_valid, speed, new_token, pid, tx_allowed, ack, received, recipient, \type , is_in_request, request, value, index, \length$28 , \start$4 , start, usb_clk
);
  reg \$auto$verilog_backend.cc:2352:dump_module$9  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  reg \$12 ;
  reg [1:0] \$13 ;
  reg [4:0] \$14 ;
  reg [1:0] \$15 ;
  reg \$16 ;
  reg [7:0] \$17 ;
  reg [15:0] \$18 ;
  reg [15:0] \$19 ;
  wire \$2 ;
  reg [15:0] \$20 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:156" *)
  output ack;
  reg ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input [15:0] crc;
  wire [15:0] crc;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$3 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [1:0] fsm_state = 2'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  output [15:0] index;
  reg [15:0] index = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  output is_in_request;
  reg is_in_request = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:948" *)
  wire [3:0] length;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  output [15:0] \length$28 ;
  reg [15:0] \length$28  = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:944" *)
  wire new_packet;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_token;
  wire new_token;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  wire [7:0] packet_0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  wire [7:0] packet_1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  wire [7:0] packet_2;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  wire [7:0] packet_3;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  wire [7:0] packet_4;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  wire [7:0] packet_5;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  wire [7:0] packet_6;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  wire [7:0] packet_7;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] pid;
  wire [3:0] pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  output received;
  reg received = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  output [4:0] recipient;
  reg [4:0] recipient = 5'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  output [7:0] request;
  reg [7:0] request = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:753" *)
  input rx_active;
  wire rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:745" *)
  input [7:0] rx_data;
  wire [7:0] rx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:746" *)
  input rx_valid;
  wire rx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:152" *)
  input [1:0] speed;
  wire [1:0] speed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  output start;
  wire start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire \start$1 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:944" *)
  output \start$4 ;
  wire \start$4 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input tx_allowed;
  wire tx_allowed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  output [1:0] \type ;
  reg [1:0] \type  = 2'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  output [15:0] value;
  reg [15:0] value = 16'h0000;
  assign \$1  = length == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:217" *) 4'h8;
  assign \$2  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:241" *) speed;
  assign \$3  = tx_allowed | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:241" *) \$2 ;
  assign \$4  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$5  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$6  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$7  = pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:196" *) 4'hd;
  assign \$8  = \$7  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:200" *) new_token;
  assign \$9  = length == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:217" *) 4'h8;
  assign \$10  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:241" *) speed;
  assign \$11  = tx_allowed | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:241" *) \$10 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  always @(posedge usb_clk)
    received <= \$12 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  always @(posedge usb_clk)
    recipient <= \$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  always @(posedge usb_clk)
    \type  <= \$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  always @(posedge usb_clk)
    is_in_request <= \$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  always @(posedge usb_clk)
    request <= \$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  always @(posedge usb_clk)
    value <= \$18 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  always @(posedge usb_clk)
    index <= \$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\request\\interface.py:30" *)
  always @(posedge usb_clk)
    \length$28  <= \$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\request.py:178" *)
  \USBStreamOutDeviceExample.usb.USBControlEndpoint.setup_decoder.data_handler  data_handler (
    .crc(crc),
    .length(length),
    .new_packet(\start$4 ),
    .packet_0(packet_0),
    .packet_1(packet_1),
    .packet_2(packet_2),
    .packet_3(packet_3),
    .packet_4(packet_4),
    .packet_5(packet_5),
    .packet_6(packet_6),
    .packet_7(packet_7),
    .rx_active(rx_active),
    .rx_data(rx_data),
    .rx_valid(rx_valid),
    .start(start),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    ack = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\start$4 ) begin
            if (\$1 ) begin
              if (\$3 ) begin
                ack = 1'h1;
              end
            end
          end
      2'h2:
          if (tx_allowed) begin
            ack = 1'h1;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    \$12  = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\start$4 ) begin
            if (\$9 ) begin
              \$12  = 1'h1;
            end
          end
    endcase
    if (usb_rst) begin
      \$12  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    \$13  = fsm_state;
    casez (fsm_state)
      2'h0:
          if (\$8 ) begin
            \$13  = 2'h1;
          end
      2'h1:
        begin
          if (new_token) begin
            \$13  = 2'h0;
          end
          if (\start$4 ) begin
            (* full_case = 32'd1 *)
            if (\$9 ) begin
              (* full_case = 32'd1 *)
              if (\$11 ) begin
                \$13  = 2'h0;
              end else begin
                \$13  = 2'h2;
              end
            end else begin
              \$13  = 2'h0;
            end
          end
        end
      2'h2:
          if (tx_allowed) begin
            \$13  = 2'h0;
          end
    endcase
    if (usb_rst) begin
      \$13  = 2'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    \$14  = recipient;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\start$4 ) begin
            if (\$9 ) begin
              \$14  = packet_0[4:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$14  = 5'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    \$15  = \type ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\start$4 ) begin
            if (\$9 ) begin
              \$15  = packet_0[6:5];
            end
          end
    endcase
    if (usb_rst) begin
      \$15  = 2'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    \$16  = is_in_request;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\start$4 ) begin
            if (\$9 ) begin
              \$16  = packet_0[7];
            end
          end
    endcase
    if (usb_rst) begin
      \$16  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    \$17  = request;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\start$4 ) begin
            if (\$9 ) begin
              \$17  = packet_1;
            end
          end
    endcase
    if (usb_rst) begin
      \$17  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    \$18  = value;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\start$4 ) begin
            if (\$9 ) begin
              \$18  = { packet_3, packet_2 };
            end
          end
    endcase
    if (usb_rst) begin
      \$18  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    \$19  = index;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\start$4 ) begin
            if (\$9 ) begin
              \$19  = { packet_5, packet_4 };
            end
          end
    endcase
    if (usb_rst) begin
      \$19  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$9 ) begin end
    \$20  = \length$28 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\start$4 ) begin
            if (\$9 ) begin
              \$20  = { packet_7, packet_6 };
            end
          end
    endcase
    if (usb_rst) begin
      \$20  = 16'h0000;
    end
  end
  assign \start$1  = start;
  assign \crc$3  = crc;
  assign new_packet = \start$4 ;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:952" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBControlEndpoint.setup_decoder.data_handler (usb_rst, crc, rx_active, rx_data, rx_valid, new_packet, length, packet_0, packet_1, packet_2, packet_3, packet_4, packet_5, packet_6, packet_7, start, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$10  = 0;
  wire \$1 ;
  wire [4:0] \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  wire \$14 ;
  wire \$15 ;
  reg \$16 ;
  reg [1:0] \$17 ;
  reg [3:0] \$18 ;
  reg [3:0] \$19 ;
  wire [3:0] \$2 ;
  reg [7:0] \$20 ;
  reg [7:0] \$21 ;
  reg [7:0] \$22 ;
  reg [7:0] \$23 ;
  reg [7:0] \$24 ;
  reg [7:0] \$25 ;
  reg [7:0] \$26 ;
  reg [7:0] \$27 ;
  reg [7:0] \$28 ;
  reg [7:0] \$29 ;
  wire \$3 ;
  reg [15:0] \$30 ;
  reg [15:0] \$31 ;
  reg [15:0] \$32 ;
  reg [3:0] \$33 ;
  reg [3:0] \$34 ;
  reg [7:0] \$35 ;
  reg [7:0] \$36 ;
  reg [7:0] \$37 ;
  reg [7:0] \$38 ;
  reg [7:0] \$39 ;
  wire \$4 ;
  reg [7:0] \$40 ;
  reg [7:0] \$41 ;
  reg [7:0] \$42 ;
  wire \$5 ;
  wire \$6 ;
  wire [4:0] \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal$10  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal$11  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal$12  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal$13  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal$14  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal$15  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal$16  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal$17  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  reg [7:0] \$signal$18  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:973" *)
  reg [3:0] active_pid = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input [15:0] crc;
  wire [15:0] crc;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [1:0] fsm_state = 2'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:969" *)
  reg [15:0] last_byte_crc = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:980" *)
  reg [15:0] last_word = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:970" *)
  reg [15:0] last_word_crc = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:948" *)
  output [3:0] length;
  reg [3:0] length = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:944" *)
  output new_packet;
  reg new_packet = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  output [7:0] packet_0;
  reg [7:0] packet_0 = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  output [7:0] packet_1;
  reg [7:0] packet_1 = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  output [7:0] packet_2;
  reg [7:0] packet_2 = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  output [7:0] packet_3;
  reg [7:0] packet_3 = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  output [7:0] packet_4;
  reg [7:0] packet_4 = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  output [7:0] packet_5;
  reg [7:0] packet_5 = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  output [7:0] packet_6;
  reg [7:0] packet_6 = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  output [7:0] packet_7;
  reg [7:0] packet_7 = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:946" *)
  reg [3:0] packet_id = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:977" *)
  reg [3:0] position_in_packet = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:753" *)
  input rx_active;
  wire rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:745" *)
  input [7:0] rx_data;
  wire [7:0] rx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:746" *)
  input rx_valid;
  wire rx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  output start;
  reg start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  always @(posedge usb_clk)
    packet_2 <= \$37 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  always @(posedge usb_clk)
    packet_3 <= \$38 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  always @(posedge usb_clk)
    packet_4 <= \$39 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  always @(posedge usb_clk)
    packet_5 <= \$40 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  always @(posedge usb_clk)
    packet_6 <= \$41 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  always @(posedge usb_clk)
    packet_7 <= \$42 ;
  assign \$1  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:999" *) rx_active;
  assign \$2  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1004" *) rx_data[7:4];
  assign \$3  = rx_data[3:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1004" *) \$2 ;
  assign \$4  = rx_data[1:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1003" *) 2'h3;
  assign \$5  = \$3  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1007" *) \$4 ;
  assign \$6  = position_in_packet >= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1025" *) 4'ha;
  assign \$7  = position_in_packet + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1032" *) 1'h1;
  assign \$8  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1042" *) rx_active;
  assign \$9  = last_word_crc == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1044" *) last_word;
  assign \$10  = position_in_packet - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1047" *) 2'h2;
  assign \$11  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1059" *) rx_active;
  assign \$12  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$13  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$14  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$15  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:944" *)
  always @(posedge usb_clk)
    new_packet <= \$16 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:973" *)
  always @(posedge usb_clk)
    active_pid <= \$18 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:977" *)
  always @(posedge usb_clk)
    position_in_packet <= \$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal  <= \$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal$10  <= \$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal$11  <= \$22 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal$12  <= \$23 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal$13  <= \$24 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal$14  <= \$25 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal$15  <= \$26 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal$16  <= \$27 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal$17  <= \$28 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:976" *)
  always @(posedge usb_clk)
    \$signal$18  <= \$29 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:980" *)
  always @(posedge usb_clk)
    last_word <= \$30 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:970" *)
  always @(posedge usb_clk)
    last_word_crc <= \$31 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:969" *)
  always @(posedge usb_clk)
    last_byte_crc <= \$32 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:946" *)
  always @(posedge usb_clk)
    packet_id <= \$33 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:948" *)
  always @(posedge usb_clk)
    length <= \$34 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  always @(posedge usb_clk)
    packet_0 <= \$35 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:947" *)
  always @(posedge usb_clk)
    packet_1 <= \$36 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$37  = packet_2;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$37  = \$signal$11 ;
            end
          end
    endcase
    if (usb_rst) begin
      \$37  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$38  = packet_3;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$38  = \$signal$12 ;
            end
          end
    endcase
    if (usb_rst) begin
      \$38  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$39  = packet_4;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$39  = \$signal$13 ;
            end
          end
    endcase
    if (usb_rst) begin
      \$39  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$40  = packet_5;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$40  = \$signal$14 ;
            end
          end
    endcase
    if (usb_rst) begin
      \$40  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$41  = packet_6;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$41  = \$signal$15 ;
            end
          end
    endcase
    if (usb_rst) begin
      \$41  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$42  = packet_7;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$42  = \$signal$16 ;
            end
          end
    endcase
    if (usb_rst) begin
      \$42  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    start = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          start = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$16  = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$16  = 1'h1;
            end
          end
    endcase
    if (usb_rst) begin
      \$16  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$17  = fsm_state;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      2'h0:
          if (rx_active) begin
            \$17  = 2'h1;
          end
      2'h1:
          if (\$1 ) begin
            \$17  = 2'h0;
          end else if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$5 ) begin
              \$17  = 2'h2;
            end else begin
              \$17  = 2'h3;
            end
          end
      2'h2:
        begin
          if (rx_valid) begin
            if (\$6 ) begin
              \$17  = 2'h3;
            end
          end
          if (\$8 ) begin
            if (\$9 ) begin
              \$17  = 2'h0;
            end
          end
        end
      2'h3:
          if (\$11 ) begin
            \$17  = 2'h0;
          end
    endcase
    if (usb_rst) begin
      \$17  = 2'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$18  = active_pid;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\$1 ) begin
          end else if (rx_valid) begin
            if (\$5 ) begin
              \$18  = rx_data[3:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$18  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$19  = position_in_packet;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\$1 ) begin
          end else if (rx_valid) begin
            if (\$5 ) begin
              \$19  = 4'h0;
            end
          end
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              \$19  = \$7 [3:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$19  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$20  = \$signal ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    \$20  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$20  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$21  = \$signal$10 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    /* empty */;
                4'h1:
                    \$21  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$21  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$22  = \$signal$11 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    /* empty */;
                4'h1:
                    /* empty */;
                4'h2:
                    \$22  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$22  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$23  = \$signal$12 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    /* empty */;
                4'h1:
                    /* empty */;
                4'h2:
                    /* empty */;
                4'h3:
                    \$23  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$23  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$24  = \$signal$13 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    /* empty */;
                4'h1:
                    /* empty */;
                4'h2:
                    /* empty */;
                4'h3:
                    /* empty */;
                4'h4:
                    \$24  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$24  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$25  = \$signal$14 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    /* empty */;
                4'h1:
                    /* empty */;
                4'h2:
                    /* empty */;
                4'h3:
                    /* empty */;
                4'h4:
                    /* empty */;
                4'h5:
                    \$25  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$25  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$26  = \$signal$15 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    /* empty */;
                4'h1:
                    /* empty */;
                4'h2:
                    /* empty */;
                4'h3:
                    /* empty */;
                4'h4:
                    /* empty */;
                4'h5:
                    /* empty */;
                4'h6:
                    \$26  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$26  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$27  = \$signal$16 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    /* empty */;
                4'h1:
                    /* empty */;
                4'h2:
                    /* empty */;
                4'h3:
                    /* empty */;
                4'h4:
                    /* empty */;
                4'h5:
                    /* empty */;
                4'h6:
                    /* empty */;
                4'h7:
                    \$27  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$27  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$28  = \$signal$17 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    /* empty */;
                4'h1:
                    /* empty */;
                4'h2:
                    /* empty */;
                4'h3:
                    /* empty */;
                4'h4:
                    /* empty */;
                4'h5:
                    /* empty */;
                4'h6:
                    /* empty */;
                4'h7:
                    /* empty */;
                4'h8:
                    \$28  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$28  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$29  = \$signal$18 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              casez (position_in_packet)
                4'h0:
                    /* empty */;
                4'h1:
                    /* empty */;
                4'h2:
                    /* empty */;
                4'h3:
                    /* empty */;
                4'h4:
                    /* empty */;
                4'h5:
                    /* empty */;
                4'h6:
                    /* empty */;
                4'h7:
                    /* empty */;
                4'h8:
                    /* empty */;
                4'h9:
                    \$29  = rx_data;
              endcase
            end
          end
    endcase
    if (usb_rst) begin
      \$29  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$30  = last_word;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              \$30  = { rx_data, last_word[15:8] };
            end
          end
    endcase
    if (usb_rst) begin
      \$30  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$31  = last_word_crc;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              \$31  = last_byte_crc;
            end
          end
    endcase
    if (usb_rst) begin
      \$31  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$32  = last_byte_crc;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$6 ) begin
            end else begin
              \$32  = crc;
            end
          end
    endcase
    if (usb_rst) begin
      \$32  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$33  = packet_id;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$33  = active_pid;
            end
          end
    endcase
    if (usb_rst) begin
      \$33  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$34  = length;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$34  = \$10 [3:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$34  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$35  = packet_0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$35  = \$signal ;
            end
          end
    endcase
    if (usb_rst) begin
      \$35  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$10 ) begin end
    \$36  = packet_1;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$8 ) begin
            if (\$9 ) begin
              \$36  = \$signal$10 ;
            end
          end
    endcase
    if (usb_rst) begin
      \$36  = 8'h00;
    end
  end
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:78" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBStreamInEndpoint (usb_rst, is_in, is_out, is_setup, is_ping, valid, \port$1347$0 , \payload$23 , ready, new_frame, new_token, frame, pid, address, endpoint, ready_for_response, \ready$25 , \ack$58 , \nak$60 , \stall$62 , \nyet$64 
, tx_pid_toggle, \first$19 , nak, \valid$17 , \last$21 , usb_clk);
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$51 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \ack$58 ;
  wire \ack$58 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$59 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:86" *)
  wire active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [6:0] address;
  wire [6:0] address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$32 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:96" *)
  wire [1:0] data_pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:92" *)
  wire discard;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:74" *)
  wire \discard$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] endpoint;
  wire [3:0] endpoint;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$33 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire first;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \first$19 ;
  wire \first$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$6 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:91" *)
  wire flush;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:73" *)
  wire \flush$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [10:0] frame;
  wire [10:0] frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$39 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:103" *)
  wire generate_zlps;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_in;
  wire is_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$43 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_out;
  wire is_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$45 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_ping;
  wire is_ping;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$49 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_setup;
  wire is_setup;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$47 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \last$21 ;
  wire \last$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$22 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$8 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output nak;
  wire nak;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$53 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \nak$60 ;
  wire \nak$60 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$61 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_frame;
  wire new_frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$41 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_token;
  wire new_token;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$35 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire nyet;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$57 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \nyet$64 ;
  wire \nyet$64 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$65 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$10 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output [7:0] \payload$23 ;
  wire [7:0] \payload$23 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$24 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] pid;
  wire [3:0] pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$30 ;
  input [9:0] \port$1347$0 ;
  wire [9:0] \port$1347$0 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \ready$25 ;
  wire \ready$25 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$26 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input ready_for_response;
  wire ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$37 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$55 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \stall$62 ;
  wire \stall$62 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$63 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:96" *)
  output [1:0] tx_pid_toggle;
  wire [1:0] tx_pid_toggle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input valid;
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \valid$17 ;
  wire \valid$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$18 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$4 ;
  assign active = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:90" *) 1'h1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:82" *)
  \USBStreamOutDeviceExample.usb.USBStreamInEndpoint.tx_manager  tx_manager (
    .ack(\ack$58 ),
    .active(active),
    .data_pid(tx_pid_toggle),
    .first(\first$19 ),
    .is_in(is_in),
    .\last$39 (\last$21 ),
    .nak(nak),
    .new_token(new_token),
    .\payload$34 (\payload$23 ),
    .\port$1347$0 (\port$1347$0 [8:0]),
    .ready(\ready$25 ),
    .\ready$25 (ready),
    .ready_for_response(ready_for_response),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(valid),
    .\valid$38 (\valid$17 )
  );
  assign generate_zlps = 1'h1;
  assign \valid$4  = valid;
  assign first = \port$1347$0 [9];
  assign \first$6  = \port$1347$0 [9];
  assign last = \port$1347$0 [8];
  assign \last$8  = \port$1347$0 [8];
  assign payload = \port$1347$0 [7:0];
  assign \payload$10  = \port$1347$0 [7:0];
  assign \ready$12  = ready;
  assign flush = 1'h0;
  assign \flush$14  = 1'h0;
  assign discard = 1'h0;
  assign \discard$16  = 1'h0;
  assign \valid$18  = \valid$17 ;
  assign \first$20  = \first$19 ;
  assign \last$22  = \last$21 ;
  assign \payload$24  = \payload$23 ;
  assign \ready$26  = \ready$25 ;
  assign data_pid = tx_pid_toggle;
  assign \pid$30  = pid;
  assign \address$32  = address;
  assign \endpoint$33  = endpoint;
  assign \new_token$35  = new_token;
  assign \ready_for_response$37  = ready_for_response;
  assign \frame$39  = frame;
  assign \new_frame$41  = new_frame;
  assign \is_in$43  = is_in;
  assign \is_out$45  = is_out;
  assign \is_setup$47  = is_setup;
  assign \is_ping$49  = is_ping;
  assign ack = 1'h0;
  assign \ack$51  = 1'h0;
  assign \nak$53  = nak;
  assign stall = 1'h0;
  assign \stall$55  = 1'h0;
  assign nyet = 1'h0;
  assign \nyet$57  = 1'h0;
  assign \ack$59  = \ack$58 ;
  assign \nak$61  = \nak$60 ;
  assign \stall$63  = \stall$62 ;
  assign \nyet$65  = \nyet$64 ;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:109" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBStreamInEndpoint.tx_manager (usb_rst, is_in, valid, \port$1347$0 , active, \payload$34 , \ready$25 , new_token, ready_for_response, ready, ack, data_pid, first, nak, \valid$38 , \last$39 , usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$11  = 0;
  wire \$1 ;
  wire [10:0] \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  reg [9:0] \$14 ;
  wire \$15 ;
  wire \$16 ;
  wire \$17 ;
  wire \$18 ;
  wire \$19 ;
  reg \$2 ;
  wire \$20 ;
  wire \$21 ;
  wire \$22 ;
  wire \$23 ;
  wire \$24 ;
  wire \$25 ;
  wire \$26 ;
  reg [9:0] \$27 ;
  wire \$28 ;
  wire \$29 ;
  wire \$3 ;
  wire [10:0] \$30 ;
  wire \$31 ;
  reg [9:0] \$32 ;
  wire [10:0] \$33 ;
  wire \$34 ;
  wire \$35 ;
  wire \$36 ;
  reg [9:0] \$37 ;
  wire \$38 ;
  wire \$39 ;
  wire \$4 ;
  wire \$40 ;
  reg \$41 ;
  wire \$42 ;
  wire \$43 ;
  reg [9:0] \$44 ;
  wire [10:0] \$45 ;
  wire \$46 ;
  wire \$47 ;
  wire \$48 ;
  reg [9:0] \$49 ;
  reg [9:0] \$5 ;
  wire \$50 ;
  wire \$51 ;
  wire \$52 ;
  wire \$53 ;
  wire \$54 ;
  wire \$55 ;
  wire \$56 ;
  wire \$57 ;
  wire \$58 ;
  wire \$59 ;
  wire [10:0] \$6 ;
  wire \$60 ;
  wire \$61 ;
  reg [9:0] \$62 ;
  reg [9:0] \$63 ;
  wire \$64 ;
  wire \$65 ;
  reg [9:0] \$66 ;
  wire \$67 ;
  reg \$68 ;
  wire \$69 ;
  reg \$7 ;
  wire \$70 ;
  wire \$71 ;
  wire \$72 ;
  wire \$73 ;
  wire \$74 ;
  wire \$75 ;
  reg [9:0] \$76 ;
  wire \$77 ;
  wire \$78 ;
  reg [9:0] \$79 ;
  wire \$8 ;
  wire [10:0] \$80 ;
  wire \$81 ;
  wire [10:0] \$82 ;
  wire \$83 ;
  wire \$84 ;
  wire \$85 ;
  wire \$86 ;
  wire \$87 ;
  reg [1:0] \$88 ;
  reg [9:0] \$89 ;
  reg [9:0] \$9 ;
  reg [9:0] \$90 ;
  reg \$91 ;
  reg \$92 ;
  reg [1:0] \$93 ;
  reg \$94 ;
  reg [9:0] \$95 ;
  reg \$96 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:161" *)
  reg [9:0] \$signal  = 10'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:161" *)
  reg [9:0] \$signal$10  = 10'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input ack;
  wire ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:86" *)
  input active;
  wire active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:97" *)
  reg buffer_toggle = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:96" *)
  output [1:0] data_pid;
  reg [1:0] data_pid = 2'h1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:92" *)
  wire discard;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output first;
  reg first = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:91" *)
  wire flush;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [1:0] fsm_state = 2'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:103" *)
  wire generate_zlps;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_in;
  wire is_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \last$39 ;
  reg \last$39 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output nak;
  reg nak;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_token;
  wire new_token;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output [7:0] \payload$34 ;
  reg [7:0] \payload$34 ;
  input [8:0] \port$1347$0 ;
  wire [8:0] \port$1347$0 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \ready$25 ;
  wire \ready$25 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input ready_for_response;
  wire ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:105" *)
  wire reset_sequence;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:173" *)
  reg [9:0] send_position = 10'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:104" *)
  wire start_with_data1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:162" *)
  reg stream_ended_in_buffer0 = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:162" *)
  reg stream_ended_in_buffer1 = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:140" *)
  reg [8:0] transmit_buffer_0_r_addr;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:140" *)
  wire [7:0] transmit_buffer_0_r_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:139" *)
  wire [8:0] transmit_buffer_0_w_addr;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:139" *)
  wire [7:0] transmit_buffer_0_w_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:139" *)
  reg transmit_buffer_0_w_en;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:140" *)
  reg [8:0] transmit_buffer_1_r_addr;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:140" *)
  wire [7:0] transmit_buffer_1_r_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:139" *)
  wire [8:0] transmit_buffer_1_w_addr;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:139" *)
  wire [7:0] transmit_buffer_1_w_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:139" *)
  reg transmit_buffer_1_w_en;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input valid;
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \valid$38 ;
  reg \valid$38 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:138" *)
  reg [7:0] read_port_0 [511:0];
  initial begin
    read_port_0[0] = 8'h00;
    read_port_0[1] = 8'h00;
    read_port_0[2] = 8'h00;
    read_port_0[3] = 8'h00;
    read_port_0[4] = 8'h00;
    read_port_0[5] = 8'h00;
    read_port_0[6] = 8'h00;
    read_port_0[7] = 8'h00;
    read_port_0[8] = 8'h00;
    read_port_0[9] = 8'h00;
    read_port_0[10] = 8'h00;
    read_port_0[11] = 8'h00;
    read_port_0[12] = 8'h00;
    read_port_0[13] = 8'h00;
    read_port_0[14] = 8'h00;
    read_port_0[15] = 8'h00;
    read_port_0[16] = 8'h00;
    read_port_0[17] = 8'h00;
    read_port_0[18] = 8'h00;
    read_port_0[19] = 8'h00;
    read_port_0[20] = 8'h00;
    read_port_0[21] = 8'h00;
    read_port_0[22] = 8'h00;
    read_port_0[23] = 8'h00;
    read_port_0[24] = 8'h00;
    read_port_0[25] = 8'h00;
    read_port_0[26] = 8'h00;
    read_port_0[27] = 8'h00;
    read_port_0[28] = 8'h00;
    read_port_0[29] = 8'h00;
    read_port_0[30] = 8'h00;
    read_port_0[31] = 8'h00;
    read_port_0[32] = 8'h00;
    read_port_0[33] = 8'h00;
    read_port_0[34] = 8'h00;
    read_port_0[35] = 8'h00;
    read_port_0[36] = 8'h00;
    read_port_0[37] = 8'h00;
    read_port_0[38] = 8'h00;
    read_port_0[39] = 8'h00;
    read_port_0[40] = 8'h00;
    read_port_0[41] = 8'h00;
    read_port_0[42] = 8'h00;
    read_port_0[43] = 8'h00;
    read_port_0[44] = 8'h00;
    read_port_0[45] = 8'h00;
    read_port_0[46] = 8'h00;
    read_port_0[47] = 8'h00;
    read_port_0[48] = 8'h00;
    read_port_0[49] = 8'h00;
    read_port_0[50] = 8'h00;
    read_port_0[51] = 8'h00;
    read_port_0[52] = 8'h00;
    read_port_0[53] = 8'h00;
    read_port_0[54] = 8'h00;
    read_port_0[55] = 8'h00;
    read_port_0[56] = 8'h00;
    read_port_0[57] = 8'h00;
    read_port_0[58] = 8'h00;
    read_port_0[59] = 8'h00;
    read_port_0[60] = 8'h00;
    read_port_0[61] = 8'h00;
    read_port_0[62] = 8'h00;
    read_port_0[63] = 8'h00;
    read_port_0[64] = 8'h00;
    read_port_0[65] = 8'h00;
    read_port_0[66] = 8'h00;
    read_port_0[67] = 8'h00;
    read_port_0[68] = 8'h00;
    read_port_0[69] = 8'h00;
    read_port_0[70] = 8'h00;
    read_port_0[71] = 8'h00;
    read_port_0[72] = 8'h00;
    read_port_0[73] = 8'h00;
    read_port_0[74] = 8'h00;
    read_port_0[75] = 8'h00;
    read_port_0[76] = 8'h00;
    read_port_0[77] = 8'h00;
    read_port_0[78] = 8'h00;
    read_port_0[79] = 8'h00;
    read_port_0[80] = 8'h00;
    read_port_0[81] = 8'h00;
    read_port_0[82] = 8'h00;
    read_port_0[83] = 8'h00;
    read_port_0[84] = 8'h00;
    read_port_0[85] = 8'h00;
    read_port_0[86] = 8'h00;
    read_port_0[87] = 8'h00;
    read_port_0[88] = 8'h00;
    read_port_0[89] = 8'h00;
    read_port_0[90] = 8'h00;
    read_port_0[91] = 8'h00;
    read_port_0[92] = 8'h00;
    read_port_0[93] = 8'h00;
    read_port_0[94] = 8'h00;
    read_port_0[95] = 8'h00;
    read_port_0[96] = 8'h00;
    read_port_0[97] = 8'h00;
    read_port_0[98] = 8'h00;
    read_port_0[99] = 8'h00;
    read_port_0[100] = 8'h00;
    read_port_0[101] = 8'h00;
    read_port_0[102] = 8'h00;
    read_port_0[103] = 8'h00;
    read_port_0[104] = 8'h00;
    read_port_0[105] = 8'h00;
    read_port_0[106] = 8'h00;
    read_port_0[107] = 8'h00;
    read_port_0[108] = 8'h00;
    read_port_0[109] = 8'h00;
    read_port_0[110] = 8'h00;
    read_port_0[111] = 8'h00;
    read_port_0[112] = 8'h00;
    read_port_0[113] = 8'h00;
    read_port_0[114] = 8'h00;
    read_port_0[115] = 8'h00;
    read_port_0[116] = 8'h00;
    read_port_0[117] = 8'h00;
    read_port_0[118] = 8'h00;
    read_port_0[119] = 8'h00;
    read_port_0[120] = 8'h00;
    read_port_0[121] = 8'h00;
    read_port_0[122] = 8'h00;
    read_port_0[123] = 8'h00;
    read_port_0[124] = 8'h00;
    read_port_0[125] = 8'h00;
    read_port_0[126] = 8'h00;
    read_port_0[127] = 8'h00;
    read_port_0[128] = 8'h00;
    read_port_0[129] = 8'h00;
    read_port_0[130] = 8'h00;
    read_port_0[131] = 8'h00;
    read_port_0[132] = 8'h00;
    read_port_0[133] = 8'h00;
    read_port_0[134] = 8'h00;
    read_port_0[135] = 8'h00;
    read_port_0[136] = 8'h00;
    read_port_0[137] = 8'h00;
    read_port_0[138] = 8'h00;
    read_port_0[139] = 8'h00;
    read_port_0[140] = 8'h00;
    read_port_0[141] = 8'h00;
    read_port_0[142] = 8'h00;
    read_port_0[143] = 8'h00;
    read_port_0[144] = 8'h00;
    read_port_0[145] = 8'h00;
    read_port_0[146] = 8'h00;
    read_port_0[147] = 8'h00;
    read_port_0[148] = 8'h00;
    read_port_0[149] = 8'h00;
    read_port_0[150] = 8'h00;
    read_port_0[151] = 8'h00;
    read_port_0[152] = 8'h00;
    read_port_0[153] = 8'h00;
    read_port_0[154] = 8'h00;
    read_port_0[155] = 8'h00;
    read_port_0[156] = 8'h00;
    read_port_0[157] = 8'h00;
    read_port_0[158] = 8'h00;
    read_port_0[159] = 8'h00;
    read_port_0[160] = 8'h00;
    read_port_0[161] = 8'h00;
    read_port_0[162] = 8'h00;
    read_port_0[163] = 8'h00;
    read_port_0[164] = 8'h00;
    read_port_0[165] = 8'h00;
    read_port_0[166] = 8'h00;
    read_port_0[167] = 8'h00;
    read_port_0[168] = 8'h00;
    read_port_0[169] = 8'h00;
    read_port_0[170] = 8'h00;
    read_port_0[171] = 8'h00;
    read_port_0[172] = 8'h00;
    read_port_0[173] = 8'h00;
    read_port_0[174] = 8'h00;
    read_port_0[175] = 8'h00;
    read_port_0[176] = 8'h00;
    read_port_0[177] = 8'h00;
    read_port_0[178] = 8'h00;
    read_port_0[179] = 8'h00;
    read_port_0[180] = 8'h00;
    read_port_0[181] = 8'h00;
    read_port_0[182] = 8'h00;
    read_port_0[183] = 8'h00;
    read_port_0[184] = 8'h00;
    read_port_0[185] = 8'h00;
    read_port_0[186] = 8'h00;
    read_port_0[187] = 8'h00;
    read_port_0[188] = 8'h00;
    read_port_0[189] = 8'h00;
    read_port_0[190] = 8'h00;
    read_port_0[191] = 8'h00;
    read_port_0[192] = 8'h00;
    read_port_0[193] = 8'h00;
    read_port_0[194] = 8'h00;
    read_port_0[195] = 8'h00;
    read_port_0[196] = 8'h00;
    read_port_0[197] = 8'h00;
    read_port_0[198] = 8'h00;
    read_port_0[199] = 8'h00;
    read_port_0[200] = 8'h00;
    read_port_0[201] = 8'h00;
    read_port_0[202] = 8'h00;
    read_port_0[203] = 8'h00;
    read_port_0[204] = 8'h00;
    read_port_0[205] = 8'h00;
    read_port_0[206] = 8'h00;
    read_port_0[207] = 8'h00;
    read_port_0[208] = 8'h00;
    read_port_0[209] = 8'h00;
    read_port_0[210] = 8'h00;
    read_port_0[211] = 8'h00;
    read_port_0[212] = 8'h00;
    read_port_0[213] = 8'h00;
    read_port_0[214] = 8'h00;
    read_port_0[215] = 8'h00;
    read_port_0[216] = 8'h00;
    read_port_0[217] = 8'h00;
    read_port_0[218] = 8'h00;
    read_port_0[219] = 8'h00;
    read_port_0[220] = 8'h00;
    read_port_0[221] = 8'h00;
    read_port_0[222] = 8'h00;
    read_port_0[223] = 8'h00;
    read_port_0[224] = 8'h00;
    read_port_0[225] = 8'h00;
    read_port_0[226] = 8'h00;
    read_port_0[227] = 8'h00;
    read_port_0[228] = 8'h00;
    read_port_0[229] = 8'h00;
    read_port_0[230] = 8'h00;
    read_port_0[231] = 8'h00;
    read_port_0[232] = 8'h00;
    read_port_0[233] = 8'h00;
    read_port_0[234] = 8'h00;
    read_port_0[235] = 8'h00;
    read_port_0[236] = 8'h00;
    read_port_0[237] = 8'h00;
    read_port_0[238] = 8'h00;
    read_port_0[239] = 8'h00;
    read_port_0[240] = 8'h00;
    read_port_0[241] = 8'h00;
    read_port_0[242] = 8'h00;
    read_port_0[243] = 8'h00;
    read_port_0[244] = 8'h00;
    read_port_0[245] = 8'h00;
    read_port_0[246] = 8'h00;
    read_port_0[247] = 8'h00;
    read_port_0[248] = 8'h00;
    read_port_0[249] = 8'h00;
    read_port_0[250] = 8'h00;
    read_port_0[251] = 8'h00;
    read_port_0[252] = 8'h00;
    read_port_0[253] = 8'h00;
    read_port_0[254] = 8'h00;
    read_port_0[255] = 8'h00;
    read_port_0[256] = 8'h00;
    read_port_0[257] = 8'h00;
    read_port_0[258] = 8'h00;
    read_port_0[259] = 8'h00;
    read_port_0[260] = 8'h00;
    read_port_0[261] = 8'h00;
    read_port_0[262] = 8'h00;
    read_port_0[263] = 8'h00;
    read_port_0[264] = 8'h00;
    read_port_0[265] = 8'h00;
    read_port_0[266] = 8'h00;
    read_port_0[267] = 8'h00;
    read_port_0[268] = 8'h00;
    read_port_0[269] = 8'h00;
    read_port_0[270] = 8'h00;
    read_port_0[271] = 8'h00;
    read_port_0[272] = 8'h00;
    read_port_0[273] = 8'h00;
    read_port_0[274] = 8'h00;
    read_port_0[275] = 8'h00;
    read_port_0[276] = 8'h00;
    read_port_0[277] = 8'h00;
    read_port_0[278] = 8'h00;
    read_port_0[279] = 8'h00;
    read_port_0[280] = 8'h00;
    read_port_0[281] = 8'h00;
    read_port_0[282] = 8'h00;
    read_port_0[283] = 8'h00;
    read_port_0[284] = 8'h00;
    read_port_0[285] = 8'h00;
    read_port_0[286] = 8'h00;
    read_port_0[287] = 8'h00;
    read_port_0[288] = 8'h00;
    read_port_0[289] = 8'h00;
    read_port_0[290] = 8'h00;
    read_port_0[291] = 8'h00;
    read_port_0[292] = 8'h00;
    read_port_0[293] = 8'h00;
    read_port_0[294] = 8'h00;
    read_port_0[295] = 8'h00;
    read_port_0[296] = 8'h00;
    read_port_0[297] = 8'h00;
    read_port_0[298] = 8'h00;
    read_port_0[299] = 8'h00;
    read_port_0[300] = 8'h00;
    read_port_0[301] = 8'h00;
    read_port_0[302] = 8'h00;
    read_port_0[303] = 8'h00;
    read_port_0[304] = 8'h00;
    read_port_0[305] = 8'h00;
    read_port_0[306] = 8'h00;
    read_port_0[307] = 8'h00;
    read_port_0[308] = 8'h00;
    read_port_0[309] = 8'h00;
    read_port_0[310] = 8'h00;
    read_port_0[311] = 8'h00;
    read_port_0[312] = 8'h00;
    read_port_0[313] = 8'h00;
    read_port_0[314] = 8'h00;
    read_port_0[315] = 8'h00;
    read_port_0[316] = 8'h00;
    read_port_0[317] = 8'h00;
    read_port_0[318] = 8'h00;
    read_port_0[319] = 8'h00;
    read_port_0[320] = 8'h00;
    read_port_0[321] = 8'h00;
    read_port_0[322] = 8'h00;
    read_port_0[323] = 8'h00;
    read_port_0[324] = 8'h00;
    read_port_0[325] = 8'h00;
    read_port_0[326] = 8'h00;
    read_port_0[327] = 8'h00;
    read_port_0[328] = 8'h00;
    read_port_0[329] = 8'h00;
    read_port_0[330] = 8'h00;
    read_port_0[331] = 8'h00;
    read_port_0[332] = 8'h00;
    read_port_0[333] = 8'h00;
    read_port_0[334] = 8'h00;
    read_port_0[335] = 8'h00;
    read_port_0[336] = 8'h00;
    read_port_0[337] = 8'h00;
    read_port_0[338] = 8'h00;
    read_port_0[339] = 8'h00;
    read_port_0[340] = 8'h00;
    read_port_0[341] = 8'h00;
    read_port_0[342] = 8'h00;
    read_port_0[343] = 8'h00;
    read_port_0[344] = 8'h00;
    read_port_0[345] = 8'h00;
    read_port_0[346] = 8'h00;
    read_port_0[347] = 8'h00;
    read_port_0[348] = 8'h00;
    read_port_0[349] = 8'h00;
    read_port_0[350] = 8'h00;
    read_port_0[351] = 8'h00;
    read_port_0[352] = 8'h00;
    read_port_0[353] = 8'h00;
    read_port_0[354] = 8'h00;
    read_port_0[355] = 8'h00;
    read_port_0[356] = 8'h00;
    read_port_0[357] = 8'h00;
    read_port_0[358] = 8'h00;
    read_port_0[359] = 8'h00;
    read_port_0[360] = 8'h00;
    read_port_0[361] = 8'h00;
    read_port_0[362] = 8'h00;
    read_port_0[363] = 8'h00;
    read_port_0[364] = 8'h00;
    read_port_0[365] = 8'h00;
    read_port_0[366] = 8'h00;
    read_port_0[367] = 8'h00;
    read_port_0[368] = 8'h00;
    read_port_0[369] = 8'h00;
    read_port_0[370] = 8'h00;
    read_port_0[371] = 8'h00;
    read_port_0[372] = 8'h00;
    read_port_0[373] = 8'h00;
    read_port_0[374] = 8'h00;
    read_port_0[375] = 8'h00;
    read_port_0[376] = 8'h00;
    read_port_0[377] = 8'h00;
    read_port_0[378] = 8'h00;
    read_port_0[379] = 8'h00;
    read_port_0[380] = 8'h00;
    read_port_0[381] = 8'h00;
    read_port_0[382] = 8'h00;
    read_port_0[383] = 8'h00;
    read_port_0[384] = 8'h00;
    read_port_0[385] = 8'h00;
    read_port_0[386] = 8'h00;
    read_port_0[387] = 8'h00;
    read_port_0[388] = 8'h00;
    read_port_0[389] = 8'h00;
    read_port_0[390] = 8'h00;
    read_port_0[391] = 8'h00;
    read_port_0[392] = 8'h00;
    read_port_0[393] = 8'h00;
    read_port_0[394] = 8'h00;
    read_port_0[395] = 8'h00;
    read_port_0[396] = 8'h00;
    read_port_0[397] = 8'h00;
    read_port_0[398] = 8'h00;
    read_port_0[399] = 8'h00;
    read_port_0[400] = 8'h00;
    read_port_0[401] = 8'h00;
    read_port_0[402] = 8'h00;
    read_port_0[403] = 8'h00;
    read_port_0[404] = 8'h00;
    read_port_0[405] = 8'h00;
    read_port_0[406] = 8'h00;
    read_port_0[407] = 8'h00;
    read_port_0[408] = 8'h00;
    read_port_0[409] = 8'h00;
    read_port_0[410] = 8'h00;
    read_port_0[411] = 8'h00;
    read_port_0[412] = 8'h00;
    read_port_0[413] = 8'h00;
    read_port_0[414] = 8'h00;
    read_port_0[415] = 8'h00;
    read_port_0[416] = 8'h00;
    read_port_0[417] = 8'h00;
    read_port_0[418] = 8'h00;
    read_port_0[419] = 8'h00;
    read_port_0[420] = 8'h00;
    read_port_0[421] = 8'h00;
    read_port_0[422] = 8'h00;
    read_port_0[423] = 8'h00;
    read_port_0[424] = 8'h00;
    read_port_0[425] = 8'h00;
    read_port_0[426] = 8'h00;
    read_port_0[427] = 8'h00;
    read_port_0[428] = 8'h00;
    read_port_0[429] = 8'h00;
    read_port_0[430] = 8'h00;
    read_port_0[431] = 8'h00;
    read_port_0[432] = 8'h00;
    read_port_0[433] = 8'h00;
    read_port_0[434] = 8'h00;
    read_port_0[435] = 8'h00;
    read_port_0[436] = 8'h00;
    read_port_0[437] = 8'h00;
    read_port_0[438] = 8'h00;
    read_port_0[439] = 8'h00;
    read_port_0[440] = 8'h00;
    read_port_0[441] = 8'h00;
    read_port_0[442] = 8'h00;
    read_port_0[443] = 8'h00;
    read_port_0[444] = 8'h00;
    read_port_0[445] = 8'h00;
    read_port_0[446] = 8'h00;
    read_port_0[447] = 8'h00;
    read_port_0[448] = 8'h00;
    read_port_0[449] = 8'h00;
    read_port_0[450] = 8'h00;
    read_port_0[451] = 8'h00;
    read_port_0[452] = 8'h00;
    read_port_0[453] = 8'h00;
    read_port_0[454] = 8'h00;
    read_port_0[455] = 8'h00;
    read_port_0[456] = 8'h00;
    read_port_0[457] = 8'h00;
    read_port_0[458] = 8'h00;
    read_port_0[459] = 8'h00;
    read_port_0[460] = 8'h00;
    read_port_0[461] = 8'h00;
    read_port_0[462] = 8'h00;
    read_port_0[463] = 8'h00;
    read_port_0[464] = 8'h00;
    read_port_0[465] = 8'h00;
    read_port_0[466] = 8'h00;
    read_port_0[467] = 8'h00;
    read_port_0[468] = 8'h00;
    read_port_0[469] = 8'h00;
    read_port_0[470] = 8'h00;
    read_port_0[471] = 8'h00;
    read_port_0[472] = 8'h00;
    read_port_0[473] = 8'h00;
    read_port_0[474] = 8'h00;
    read_port_0[475] = 8'h00;
    read_port_0[476] = 8'h00;
    read_port_0[477] = 8'h00;
    read_port_0[478] = 8'h00;
    read_port_0[479] = 8'h00;
    read_port_0[480] = 8'h00;
    read_port_0[481] = 8'h00;
    read_port_0[482] = 8'h00;
    read_port_0[483] = 8'h00;
    read_port_0[484] = 8'h00;
    read_port_0[485] = 8'h00;
    read_port_0[486] = 8'h00;
    read_port_0[487] = 8'h00;
    read_port_0[488] = 8'h00;
    read_port_0[489] = 8'h00;
    read_port_0[490] = 8'h00;
    read_port_0[491] = 8'h00;
    read_port_0[492] = 8'h00;
    read_port_0[493] = 8'h00;
    read_port_0[494] = 8'h00;
    read_port_0[495] = 8'h00;
    read_port_0[496] = 8'h00;
    read_port_0[497] = 8'h00;
    read_port_0[498] = 8'h00;
    read_port_0[499] = 8'h00;
    read_port_0[500] = 8'h00;
    read_port_0[501] = 8'h00;
    read_port_0[502] = 8'h00;
    read_port_0[503] = 8'h00;
    read_port_0[504] = 8'h00;
    read_port_0[505] = 8'h00;
    read_port_0[506] = 8'h00;
    read_port_0[507] = 8'h00;
    read_port_0[508] = 8'h00;
    read_port_0[509] = 8'h00;
    read_port_0[510] = 8'h00;
    read_port_0[511] = 8'h00;
  end
  always @(posedge usb_clk) begin
    if (transmit_buffer_0_w_en)
      read_port_0[\$62 [8:0]] <= \port$1347$0 [7:0];
  end
  reg [8:0] _0_;
  always @(posedge usb_clk) begin
    _0_ <= transmit_buffer_0_r_addr;
  end
  assign transmit_buffer_0_r_data = read_port_0[_0_];
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:138" *)
  reg [7:0] read_port_1 [511:0];
  initial begin
    read_port_1[0] = 8'h00;
    read_port_1[1] = 8'h00;
    read_port_1[2] = 8'h00;
    read_port_1[3] = 8'h00;
    read_port_1[4] = 8'h00;
    read_port_1[5] = 8'h00;
    read_port_1[6] = 8'h00;
    read_port_1[7] = 8'h00;
    read_port_1[8] = 8'h00;
    read_port_1[9] = 8'h00;
    read_port_1[10] = 8'h00;
    read_port_1[11] = 8'h00;
    read_port_1[12] = 8'h00;
    read_port_1[13] = 8'h00;
    read_port_1[14] = 8'h00;
    read_port_1[15] = 8'h00;
    read_port_1[16] = 8'h00;
    read_port_1[17] = 8'h00;
    read_port_1[18] = 8'h00;
    read_port_1[19] = 8'h00;
    read_port_1[20] = 8'h00;
    read_port_1[21] = 8'h00;
    read_port_1[22] = 8'h00;
    read_port_1[23] = 8'h00;
    read_port_1[24] = 8'h00;
    read_port_1[25] = 8'h00;
    read_port_1[26] = 8'h00;
    read_port_1[27] = 8'h00;
    read_port_1[28] = 8'h00;
    read_port_1[29] = 8'h00;
    read_port_1[30] = 8'h00;
    read_port_1[31] = 8'h00;
    read_port_1[32] = 8'h00;
    read_port_1[33] = 8'h00;
    read_port_1[34] = 8'h00;
    read_port_1[35] = 8'h00;
    read_port_1[36] = 8'h00;
    read_port_1[37] = 8'h00;
    read_port_1[38] = 8'h00;
    read_port_1[39] = 8'h00;
    read_port_1[40] = 8'h00;
    read_port_1[41] = 8'h00;
    read_port_1[42] = 8'h00;
    read_port_1[43] = 8'h00;
    read_port_1[44] = 8'h00;
    read_port_1[45] = 8'h00;
    read_port_1[46] = 8'h00;
    read_port_1[47] = 8'h00;
    read_port_1[48] = 8'h00;
    read_port_1[49] = 8'h00;
    read_port_1[50] = 8'h00;
    read_port_1[51] = 8'h00;
    read_port_1[52] = 8'h00;
    read_port_1[53] = 8'h00;
    read_port_1[54] = 8'h00;
    read_port_1[55] = 8'h00;
    read_port_1[56] = 8'h00;
    read_port_1[57] = 8'h00;
    read_port_1[58] = 8'h00;
    read_port_1[59] = 8'h00;
    read_port_1[60] = 8'h00;
    read_port_1[61] = 8'h00;
    read_port_1[62] = 8'h00;
    read_port_1[63] = 8'h00;
    read_port_1[64] = 8'h00;
    read_port_1[65] = 8'h00;
    read_port_1[66] = 8'h00;
    read_port_1[67] = 8'h00;
    read_port_1[68] = 8'h00;
    read_port_1[69] = 8'h00;
    read_port_1[70] = 8'h00;
    read_port_1[71] = 8'h00;
    read_port_1[72] = 8'h00;
    read_port_1[73] = 8'h00;
    read_port_1[74] = 8'h00;
    read_port_1[75] = 8'h00;
    read_port_1[76] = 8'h00;
    read_port_1[77] = 8'h00;
    read_port_1[78] = 8'h00;
    read_port_1[79] = 8'h00;
    read_port_1[80] = 8'h00;
    read_port_1[81] = 8'h00;
    read_port_1[82] = 8'h00;
    read_port_1[83] = 8'h00;
    read_port_1[84] = 8'h00;
    read_port_1[85] = 8'h00;
    read_port_1[86] = 8'h00;
    read_port_1[87] = 8'h00;
    read_port_1[88] = 8'h00;
    read_port_1[89] = 8'h00;
    read_port_1[90] = 8'h00;
    read_port_1[91] = 8'h00;
    read_port_1[92] = 8'h00;
    read_port_1[93] = 8'h00;
    read_port_1[94] = 8'h00;
    read_port_1[95] = 8'h00;
    read_port_1[96] = 8'h00;
    read_port_1[97] = 8'h00;
    read_port_1[98] = 8'h00;
    read_port_1[99] = 8'h00;
    read_port_1[100] = 8'h00;
    read_port_1[101] = 8'h00;
    read_port_1[102] = 8'h00;
    read_port_1[103] = 8'h00;
    read_port_1[104] = 8'h00;
    read_port_1[105] = 8'h00;
    read_port_1[106] = 8'h00;
    read_port_1[107] = 8'h00;
    read_port_1[108] = 8'h00;
    read_port_1[109] = 8'h00;
    read_port_1[110] = 8'h00;
    read_port_1[111] = 8'h00;
    read_port_1[112] = 8'h00;
    read_port_1[113] = 8'h00;
    read_port_1[114] = 8'h00;
    read_port_1[115] = 8'h00;
    read_port_1[116] = 8'h00;
    read_port_1[117] = 8'h00;
    read_port_1[118] = 8'h00;
    read_port_1[119] = 8'h00;
    read_port_1[120] = 8'h00;
    read_port_1[121] = 8'h00;
    read_port_1[122] = 8'h00;
    read_port_1[123] = 8'h00;
    read_port_1[124] = 8'h00;
    read_port_1[125] = 8'h00;
    read_port_1[126] = 8'h00;
    read_port_1[127] = 8'h00;
    read_port_1[128] = 8'h00;
    read_port_1[129] = 8'h00;
    read_port_1[130] = 8'h00;
    read_port_1[131] = 8'h00;
    read_port_1[132] = 8'h00;
    read_port_1[133] = 8'h00;
    read_port_1[134] = 8'h00;
    read_port_1[135] = 8'h00;
    read_port_1[136] = 8'h00;
    read_port_1[137] = 8'h00;
    read_port_1[138] = 8'h00;
    read_port_1[139] = 8'h00;
    read_port_1[140] = 8'h00;
    read_port_1[141] = 8'h00;
    read_port_1[142] = 8'h00;
    read_port_1[143] = 8'h00;
    read_port_1[144] = 8'h00;
    read_port_1[145] = 8'h00;
    read_port_1[146] = 8'h00;
    read_port_1[147] = 8'h00;
    read_port_1[148] = 8'h00;
    read_port_1[149] = 8'h00;
    read_port_1[150] = 8'h00;
    read_port_1[151] = 8'h00;
    read_port_1[152] = 8'h00;
    read_port_1[153] = 8'h00;
    read_port_1[154] = 8'h00;
    read_port_1[155] = 8'h00;
    read_port_1[156] = 8'h00;
    read_port_1[157] = 8'h00;
    read_port_1[158] = 8'h00;
    read_port_1[159] = 8'h00;
    read_port_1[160] = 8'h00;
    read_port_1[161] = 8'h00;
    read_port_1[162] = 8'h00;
    read_port_1[163] = 8'h00;
    read_port_1[164] = 8'h00;
    read_port_1[165] = 8'h00;
    read_port_1[166] = 8'h00;
    read_port_1[167] = 8'h00;
    read_port_1[168] = 8'h00;
    read_port_1[169] = 8'h00;
    read_port_1[170] = 8'h00;
    read_port_1[171] = 8'h00;
    read_port_1[172] = 8'h00;
    read_port_1[173] = 8'h00;
    read_port_1[174] = 8'h00;
    read_port_1[175] = 8'h00;
    read_port_1[176] = 8'h00;
    read_port_1[177] = 8'h00;
    read_port_1[178] = 8'h00;
    read_port_1[179] = 8'h00;
    read_port_1[180] = 8'h00;
    read_port_1[181] = 8'h00;
    read_port_1[182] = 8'h00;
    read_port_1[183] = 8'h00;
    read_port_1[184] = 8'h00;
    read_port_1[185] = 8'h00;
    read_port_1[186] = 8'h00;
    read_port_1[187] = 8'h00;
    read_port_1[188] = 8'h00;
    read_port_1[189] = 8'h00;
    read_port_1[190] = 8'h00;
    read_port_1[191] = 8'h00;
    read_port_1[192] = 8'h00;
    read_port_1[193] = 8'h00;
    read_port_1[194] = 8'h00;
    read_port_1[195] = 8'h00;
    read_port_1[196] = 8'h00;
    read_port_1[197] = 8'h00;
    read_port_1[198] = 8'h00;
    read_port_1[199] = 8'h00;
    read_port_1[200] = 8'h00;
    read_port_1[201] = 8'h00;
    read_port_1[202] = 8'h00;
    read_port_1[203] = 8'h00;
    read_port_1[204] = 8'h00;
    read_port_1[205] = 8'h00;
    read_port_1[206] = 8'h00;
    read_port_1[207] = 8'h00;
    read_port_1[208] = 8'h00;
    read_port_1[209] = 8'h00;
    read_port_1[210] = 8'h00;
    read_port_1[211] = 8'h00;
    read_port_1[212] = 8'h00;
    read_port_1[213] = 8'h00;
    read_port_1[214] = 8'h00;
    read_port_1[215] = 8'h00;
    read_port_1[216] = 8'h00;
    read_port_1[217] = 8'h00;
    read_port_1[218] = 8'h00;
    read_port_1[219] = 8'h00;
    read_port_1[220] = 8'h00;
    read_port_1[221] = 8'h00;
    read_port_1[222] = 8'h00;
    read_port_1[223] = 8'h00;
    read_port_1[224] = 8'h00;
    read_port_1[225] = 8'h00;
    read_port_1[226] = 8'h00;
    read_port_1[227] = 8'h00;
    read_port_1[228] = 8'h00;
    read_port_1[229] = 8'h00;
    read_port_1[230] = 8'h00;
    read_port_1[231] = 8'h00;
    read_port_1[232] = 8'h00;
    read_port_1[233] = 8'h00;
    read_port_1[234] = 8'h00;
    read_port_1[235] = 8'h00;
    read_port_1[236] = 8'h00;
    read_port_1[237] = 8'h00;
    read_port_1[238] = 8'h00;
    read_port_1[239] = 8'h00;
    read_port_1[240] = 8'h00;
    read_port_1[241] = 8'h00;
    read_port_1[242] = 8'h00;
    read_port_1[243] = 8'h00;
    read_port_1[244] = 8'h00;
    read_port_1[245] = 8'h00;
    read_port_1[246] = 8'h00;
    read_port_1[247] = 8'h00;
    read_port_1[248] = 8'h00;
    read_port_1[249] = 8'h00;
    read_port_1[250] = 8'h00;
    read_port_1[251] = 8'h00;
    read_port_1[252] = 8'h00;
    read_port_1[253] = 8'h00;
    read_port_1[254] = 8'h00;
    read_port_1[255] = 8'h00;
    read_port_1[256] = 8'h00;
    read_port_1[257] = 8'h00;
    read_port_1[258] = 8'h00;
    read_port_1[259] = 8'h00;
    read_port_1[260] = 8'h00;
    read_port_1[261] = 8'h00;
    read_port_1[262] = 8'h00;
    read_port_1[263] = 8'h00;
    read_port_1[264] = 8'h00;
    read_port_1[265] = 8'h00;
    read_port_1[266] = 8'h00;
    read_port_1[267] = 8'h00;
    read_port_1[268] = 8'h00;
    read_port_1[269] = 8'h00;
    read_port_1[270] = 8'h00;
    read_port_1[271] = 8'h00;
    read_port_1[272] = 8'h00;
    read_port_1[273] = 8'h00;
    read_port_1[274] = 8'h00;
    read_port_1[275] = 8'h00;
    read_port_1[276] = 8'h00;
    read_port_1[277] = 8'h00;
    read_port_1[278] = 8'h00;
    read_port_1[279] = 8'h00;
    read_port_1[280] = 8'h00;
    read_port_1[281] = 8'h00;
    read_port_1[282] = 8'h00;
    read_port_1[283] = 8'h00;
    read_port_1[284] = 8'h00;
    read_port_1[285] = 8'h00;
    read_port_1[286] = 8'h00;
    read_port_1[287] = 8'h00;
    read_port_1[288] = 8'h00;
    read_port_1[289] = 8'h00;
    read_port_1[290] = 8'h00;
    read_port_1[291] = 8'h00;
    read_port_1[292] = 8'h00;
    read_port_1[293] = 8'h00;
    read_port_1[294] = 8'h00;
    read_port_1[295] = 8'h00;
    read_port_1[296] = 8'h00;
    read_port_1[297] = 8'h00;
    read_port_1[298] = 8'h00;
    read_port_1[299] = 8'h00;
    read_port_1[300] = 8'h00;
    read_port_1[301] = 8'h00;
    read_port_1[302] = 8'h00;
    read_port_1[303] = 8'h00;
    read_port_1[304] = 8'h00;
    read_port_1[305] = 8'h00;
    read_port_1[306] = 8'h00;
    read_port_1[307] = 8'h00;
    read_port_1[308] = 8'h00;
    read_port_1[309] = 8'h00;
    read_port_1[310] = 8'h00;
    read_port_1[311] = 8'h00;
    read_port_1[312] = 8'h00;
    read_port_1[313] = 8'h00;
    read_port_1[314] = 8'h00;
    read_port_1[315] = 8'h00;
    read_port_1[316] = 8'h00;
    read_port_1[317] = 8'h00;
    read_port_1[318] = 8'h00;
    read_port_1[319] = 8'h00;
    read_port_1[320] = 8'h00;
    read_port_1[321] = 8'h00;
    read_port_1[322] = 8'h00;
    read_port_1[323] = 8'h00;
    read_port_1[324] = 8'h00;
    read_port_1[325] = 8'h00;
    read_port_1[326] = 8'h00;
    read_port_1[327] = 8'h00;
    read_port_1[328] = 8'h00;
    read_port_1[329] = 8'h00;
    read_port_1[330] = 8'h00;
    read_port_1[331] = 8'h00;
    read_port_1[332] = 8'h00;
    read_port_1[333] = 8'h00;
    read_port_1[334] = 8'h00;
    read_port_1[335] = 8'h00;
    read_port_1[336] = 8'h00;
    read_port_1[337] = 8'h00;
    read_port_1[338] = 8'h00;
    read_port_1[339] = 8'h00;
    read_port_1[340] = 8'h00;
    read_port_1[341] = 8'h00;
    read_port_1[342] = 8'h00;
    read_port_1[343] = 8'h00;
    read_port_1[344] = 8'h00;
    read_port_1[345] = 8'h00;
    read_port_1[346] = 8'h00;
    read_port_1[347] = 8'h00;
    read_port_1[348] = 8'h00;
    read_port_1[349] = 8'h00;
    read_port_1[350] = 8'h00;
    read_port_1[351] = 8'h00;
    read_port_1[352] = 8'h00;
    read_port_1[353] = 8'h00;
    read_port_1[354] = 8'h00;
    read_port_1[355] = 8'h00;
    read_port_1[356] = 8'h00;
    read_port_1[357] = 8'h00;
    read_port_1[358] = 8'h00;
    read_port_1[359] = 8'h00;
    read_port_1[360] = 8'h00;
    read_port_1[361] = 8'h00;
    read_port_1[362] = 8'h00;
    read_port_1[363] = 8'h00;
    read_port_1[364] = 8'h00;
    read_port_1[365] = 8'h00;
    read_port_1[366] = 8'h00;
    read_port_1[367] = 8'h00;
    read_port_1[368] = 8'h00;
    read_port_1[369] = 8'h00;
    read_port_1[370] = 8'h00;
    read_port_1[371] = 8'h00;
    read_port_1[372] = 8'h00;
    read_port_1[373] = 8'h00;
    read_port_1[374] = 8'h00;
    read_port_1[375] = 8'h00;
    read_port_1[376] = 8'h00;
    read_port_1[377] = 8'h00;
    read_port_1[378] = 8'h00;
    read_port_1[379] = 8'h00;
    read_port_1[380] = 8'h00;
    read_port_1[381] = 8'h00;
    read_port_1[382] = 8'h00;
    read_port_1[383] = 8'h00;
    read_port_1[384] = 8'h00;
    read_port_1[385] = 8'h00;
    read_port_1[386] = 8'h00;
    read_port_1[387] = 8'h00;
    read_port_1[388] = 8'h00;
    read_port_1[389] = 8'h00;
    read_port_1[390] = 8'h00;
    read_port_1[391] = 8'h00;
    read_port_1[392] = 8'h00;
    read_port_1[393] = 8'h00;
    read_port_1[394] = 8'h00;
    read_port_1[395] = 8'h00;
    read_port_1[396] = 8'h00;
    read_port_1[397] = 8'h00;
    read_port_1[398] = 8'h00;
    read_port_1[399] = 8'h00;
    read_port_1[400] = 8'h00;
    read_port_1[401] = 8'h00;
    read_port_1[402] = 8'h00;
    read_port_1[403] = 8'h00;
    read_port_1[404] = 8'h00;
    read_port_1[405] = 8'h00;
    read_port_1[406] = 8'h00;
    read_port_1[407] = 8'h00;
    read_port_1[408] = 8'h00;
    read_port_1[409] = 8'h00;
    read_port_1[410] = 8'h00;
    read_port_1[411] = 8'h00;
    read_port_1[412] = 8'h00;
    read_port_1[413] = 8'h00;
    read_port_1[414] = 8'h00;
    read_port_1[415] = 8'h00;
    read_port_1[416] = 8'h00;
    read_port_1[417] = 8'h00;
    read_port_1[418] = 8'h00;
    read_port_1[419] = 8'h00;
    read_port_1[420] = 8'h00;
    read_port_1[421] = 8'h00;
    read_port_1[422] = 8'h00;
    read_port_1[423] = 8'h00;
    read_port_1[424] = 8'h00;
    read_port_1[425] = 8'h00;
    read_port_1[426] = 8'h00;
    read_port_1[427] = 8'h00;
    read_port_1[428] = 8'h00;
    read_port_1[429] = 8'h00;
    read_port_1[430] = 8'h00;
    read_port_1[431] = 8'h00;
    read_port_1[432] = 8'h00;
    read_port_1[433] = 8'h00;
    read_port_1[434] = 8'h00;
    read_port_1[435] = 8'h00;
    read_port_1[436] = 8'h00;
    read_port_1[437] = 8'h00;
    read_port_1[438] = 8'h00;
    read_port_1[439] = 8'h00;
    read_port_1[440] = 8'h00;
    read_port_1[441] = 8'h00;
    read_port_1[442] = 8'h00;
    read_port_1[443] = 8'h00;
    read_port_1[444] = 8'h00;
    read_port_1[445] = 8'h00;
    read_port_1[446] = 8'h00;
    read_port_1[447] = 8'h00;
    read_port_1[448] = 8'h00;
    read_port_1[449] = 8'h00;
    read_port_1[450] = 8'h00;
    read_port_1[451] = 8'h00;
    read_port_1[452] = 8'h00;
    read_port_1[453] = 8'h00;
    read_port_1[454] = 8'h00;
    read_port_1[455] = 8'h00;
    read_port_1[456] = 8'h00;
    read_port_1[457] = 8'h00;
    read_port_1[458] = 8'h00;
    read_port_1[459] = 8'h00;
    read_port_1[460] = 8'h00;
    read_port_1[461] = 8'h00;
    read_port_1[462] = 8'h00;
    read_port_1[463] = 8'h00;
    read_port_1[464] = 8'h00;
    read_port_1[465] = 8'h00;
    read_port_1[466] = 8'h00;
    read_port_1[467] = 8'h00;
    read_port_1[468] = 8'h00;
    read_port_1[469] = 8'h00;
    read_port_1[470] = 8'h00;
    read_port_1[471] = 8'h00;
    read_port_1[472] = 8'h00;
    read_port_1[473] = 8'h00;
    read_port_1[474] = 8'h00;
    read_port_1[475] = 8'h00;
    read_port_1[476] = 8'h00;
    read_port_1[477] = 8'h00;
    read_port_1[478] = 8'h00;
    read_port_1[479] = 8'h00;
    read_port_1[480] = 8'h00;
    read_port_1[481] = 8'h00;
    read_port_1[482] = 8'h00;
    read_port_1[483] = 8'h00;
    read_port_1[484] = 8'h00;
    read_port_1[485] = 8'h00;
    read_port_1[486] = 8'h00;
    read_port_1[487] = 8'h00;
    read_port_1[488] = 8'h00;
    read_port_1[489] = 8'h00;
    read_port_1[490] = 8'h00;
    read_port_1[491] = 8'h00;
    read_port_1[492] = 8'h00;
    read_port_1[493] = 8'h00;
    read_port_1[494] = 8'h00;
    read_port_1[495] = 8'h00;
    read_port_1[496] = 8'h00;
    read_port_1[497] = 8'h00;
    read_port_1[498] = 8'h00;
    read_port_1[499] = 8'h00;
    read_port_1[500] = 8'h00;
    read_port_1[501] = 8'h00;
    read_port_1[502] = 8'h00;
    read_port_1[503] = 8'h00;
    read_port_1[504] = 8'h00;
    read_port_1[505] = 8'h00;
    read_port_1[506] = 8'h00;
    read_port_1[507] = 8'h00;
    read_port_1[508] = 8'h00;
    read_port_1[509] = 8'h00;
    read_port_1[510] = 8'h00;
    read_port_1[511] = 8'h00;
  end
  always @(posedge usb_clk) begin
    if (transmit_buffer_1_w_en)
      read_port_1[\$63 [8:0]] <= \port$1347$0 [7:0];
  end
  reg [8:0] _1_;
  always @(posedge usb_clk) begin
    _1_ <= transmit_buffer_1_r_addr;
  end
  assign transmit_buffer_1_r_data = read_port_1[_1_];
  assign \$4  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$6  = \$5  + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) 1'h1;
  assign \$8  = \port$1347$0 [8] & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) \$7 ;
  assign \$10  = \$9  + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) 1'h1;
  assign \$11  = \$10  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:220" *) 10'h200;
  assign \$12  = \port$1347$0 [8] | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:221" *) \$11 ;
  assign \$13  = valid & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:221" *) \$12 ;
  assign \$15  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) \$14 ;
  assign \$20  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:252" *) buffer_toggle;
  assign \$21  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:253" *) data_pid[0];
  assign \$22  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$23  = active & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:233" *) is_in;
  assign \$24  = \$23  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:233" *) ready_for_response;
  assign \$25  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:268" *) data_pid[0];
  assign \$26  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$28  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:555" *) \$27 ;
  assign \$29  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$30  = send_position + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:308" *) 1'h1;
  assign \$31  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$33  = send_position + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:292" *) 1'h1;
  assign \$34  = \$32  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) \$33 ;
  assign \$35  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$36  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$38  = \$37  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) 10'h200;
  assign \$40  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$42  = \$39  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) \$41 ;
  assign \$43  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:352" *) \ready$25 ;
  assign \$45  = \$44  + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) 1'h1;
  assign \$46  = \$45  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:220" *) 10'h200;
  assign \$47  = \port$1347$0 [8] | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:221" *) \$46 ;
  assign \$48  = valid & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:221" *) \$47 ;
  assign \$50  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) \$49 ;
  assign \$55  = \$43  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:352" *) \$54 ;
  assign \$56  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:345" *) data_pid[0];
  assign \$57  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:355" *) buffer_toggle;
  assign \$58  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:356" *) data_pid[0];
  assign \$59  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$64  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$65  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$67  = \$66  != (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) 10'h200;
  assign \$69  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) \$68 ;
  assign \ready$25  = \$67  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:196" *) \$69 ;
  assign \$70  = valid & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:197" *) \ready$25 ;
  assign \$71  = active & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:233" *) is_in;
  assign \$72  = \$71  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:233" *) ready_for_response;
  assign \$73  = active & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:233" *) is_in;
  assign \$74  = \$73  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:233" *) ready_for_response;
  assign \$75  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$77  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:555" *) \$76 ;
  assign \$78  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$80  = send_position + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:292" *) 1'h1;
  assign \$81  = \$79  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ast.py:2413" *) \$80 ;
  assign \$82  = send_position + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:315" *) 1'h1;
  assign \$83  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  assign \$84  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$85  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$86  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$87  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:96" *)
  always @(posedge usb_clk)
    data_pid <= \$88 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:161" *)
  always @(posedge usb_clk)
    \$signal  <= \$89 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:161" *)
  always @(posedge usb_clk)
    \$signal$10  <= \$90 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:162" *)
  always @(posedge usb_clk)
    stream_ended_in_buffer0 <= \$91 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:162" *)
  always @(posedge usb_clk)
    stream_ended_in_buffer1 <= \$92 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$93 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:97" *)
  always @(posedge usb_clk)
    buffer_toggle <= \$94 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:173" *)
  always @(posedge usb_clk)
    send_position <= \$95 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  always @(posedge usb_clk)
    first <= \$96 ;
  assign \$3  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\transfer.py:148" *) buffer_toggle;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$5  = \$signal ;
      1'h1:
          \$5  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$7  = transmit_buffer_0_w_en;
      1'h1:
          \$7  = transmit_buffer_1_w_en;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$9  = \$signal ;
      1'h1:
          \$9  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$14  = \$signal ;
      1'h1:
          \$14  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (\$26 )
      1'h0:
          \$27  = \$signal ;
      1'h1:
          \$27  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (\$31 )
      1'h0:
          \$32  = \$signal ;
      1'h1:
          \$32  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (\$36 )
      1'h0:
          \$37  = \$signal ;
      1'h1:
          \$37  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (\$40 )
      1'h0:
          \$41  = stream_ended_in_buffer0;
      1'h1:
          \$41  = stream_ended_in_buffer1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$44  = \$signal ;
      1'h1:
          \$44  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$49  = \$signal ;
      1'h1:
          \$49  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$62  = \$signal ;
      1'h1:
          \$62  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$63  = \$signal ;
      1'h1:
          \$63  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (\$65 )
      1'h0:
          \payload$34  = transmit_buffer_0_r_data;
      1'h1:
          \payload$34  = transmit_buffer_1_r_data;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$66  = \$signal ;
      1'h1:
          \$66  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$68  = stream_ended_in_buffer0;
      1'h1:
          \$68  = stream_ended_in_buffer1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (\$75 )
      1'h0:
          \$76  = \$signal ;
      1'h1:
          \$76  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (\$78 )
      1'h0:
          \$79  = \$signal ;
      1'h1:
          \$79  = \$signal$10 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \$88  = data_pid;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      2'h0:
          if (\$19 ) begin
            \$88 [0] = \$21 ;
          end
      2'h1:
          /* empty */;
      2'h2:
          /* empty */;
      2'h3:
          casez ({ ack, 1'h0 })
            2'b1?:
                if (\$42 ) begin
                  \$88 [0] = \$56 ;
                end else if (\$55 ) begin
                  \$88 [0] = \$58 ;
                end
          endcase
    endcase
    if (usb_rst) begin
      \$88  = 2'h1;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \$89  = \$signal ;
    casez ({ \$2 , 1'h0 })
      2'b1?:
          casez (buffer_toggle)
            1'h0:
                \$89  = \$6 [9:0];
          endcase
    endcase
    (* full_case = 32'd1 *)
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          /* empty */;
      2'h3:
          casez ({ ack, 1'h0 })
            2'b1?:
                casez (\$35 )
                  1'h0:
                      \$89  = 10'h000;
                endcase
          endcase
    endcase
    if (usb_rst) begin
      \$89  = 10'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \$90  = \$signal$10 ;
    casez ({ \$2 , 1'h0 })
      2'b1?:
          (* full_case = 32'd1 *)
          casez (buffer_toggle)
            1'h0:
                /* empty */;
            1'h1:
                \$90  = \$6 [9:0];
          endcase
    endcase
    (* full_case = 32'd1 *)
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          /* empty */;
      2'h3:
          casez ({ ack, 1'h0 })
            2'b1?:
                (* full_case = 32'd1 *)
                casez (\$35 )
                  1'h0:
                      /* empty */;
                  1'h1:
                      \$90  = 10'h000;
                endcase
          endcase
    endcase
    if (usb_rst) begin
      \$90  = 10'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \$91  = stream_ended_in_buffer0;
    if (\$8 ) begin
      casez (buffer_toggle)
        1'h0:
            \$91  = 1'h1;
      endcase
    end
    (* full_case = 32'd1 *)
    casez (fsm_state)
      2'h0:
          if (\$19 ) begin
            casez (\$22 )
              1'h0:
                  \$91  = 1'h0;
            endcase
          end
      2'h1:
          casez ({ \$24 , 1'h0 })
            2'b1?:
                (* full_case = 32'd1 *)
                if (\$28 ) begin
                end else begin
                  casez (\$29 )
                    1'h0:
                        \$91  = 1'h0;
                  endcase
                end
          endcase
      2'h2:
          /* empty */;
      2'h3:
          casez ({ ack, 1'h0 })
            2'b1?:
                if (\$42 ) begin
                end else if (\$55 ) begin
                  casez (\$59 )
                    1'h0:
                        \$91  = 1'h0;
                  endcase
                end
          endcase
    endcase
    if (usb_rst) begin
      \$91  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \$92  = stream_ended_in_buffer1;
    if (\$8 ) begin
      (* full_case = 32'd1 *)
      casez (buffer_toggle)
        1'h0:
            /* empty */;
        1'h1:
            \$92  = 1'h1;
      endcase
    end
    (* full_case = 32'd1 *)
    casez (fsm_state)
      2'h0:
          if (\$19 ) begin
            (* full_case = 32'd1 *)
            casez (\$22 )
              1'h0:
                  /* empty */;
              1'h1:
                  \$92  = 1'h0;
            endcase
          end
      2'h1:
          casez ({ \$24 , 1'h0 })
            2'b1?:
                (* full_case = 32'd1 *)
                if (\$28 ) begin
                end else begin
                  (* full_case = 32'd1 *)
                  casez (\$29 )
                    1'h0:
                        /* empty */;
                    1'h1:
                        \$92  = 1'h0;
                  endcase
                end
          endcase
      2'h2:
          /* empty */;
      2'h3:
          casez ({ ack, 1'h0 })
            2'b1?:
                if (\$42 ) begin
                end else if (\$55 ) begin
                  (* full_case = 32'd1 *)
                  casez (\$59 )
                    1'h0:
                        /* empty */;
                    1'h1:
                        \$92  = 1'h0;
                  endcase
                end
          endcase
    endcase
    if (usb_rst) begin
      \$92  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \$93  = fsm_state;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      2'h0:
          if (\$19 ) begin
            \$93  = 2'h1;
          end
      2'h1:
          casez ({ \$24 , 1'h0 })
            2'b1?:
                (* full_case = 32'd1 *)
                if (\$28 ) begin
                  \$93  = 2'h2;
                end else begin
                  \$93  = 2'h3;
                end
          endcase
      2'h2:
          if (ready) begin
            if (\$34 ) begin
              \$93  = 2'h3;
            end
          end
      2'h3:
        begin
          casez ({ ack, 1'h0 })
            2'b1?:
                (* full_case = 32'd1 *)
                if (\$42 ) begin
                  \$93  = 2'h1;
                end else if (\$55 ) begin
                  \$93  = 2'h1;
                end else begin
                  \$93  = 2'h0;
                end
          endcase
          if (\$61 ) begin
            \$93  = 2'h1;
          end
        end
    endcase
    if (usb_rst) begin
      \$93  = 2'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \$94  = buffer_toggle;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      2'h0:
          if (\$19 ) begin
            \$94  = \$20 ;
          end
      2'h1:
          /* empty */;
      2'h2:
          /* empty */;
      2'h3:
          casez ({ ack, 1'h0 })
            2'b1?:
                if (\$42 ) begin
                end else if (\$55 ) begin
                  \$94  = \$57 ;
                end
          endcase
    endcase
    if (usb_rst) begin
      \$94  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \$95  = send_position;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          \$95  = 10'h000;
      2'h2:
          if (ready) begin
            \$95  = \$30 [9:0];
          end
    endcase
    if (usb_rst) begin
      \$95  = 10'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \$96  = first;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          casez ({ \$24 , 1'h0 })
            2'b1?:
                if (\$28 ) begin
                  \$96  = 1'h1;
                end
          endcase
      2'h2:
          if (ready) begin
            \$96  = 1'h0;
          end
    endcase
    if (usb_rst) begin
      \$96  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    transmit_buffer_0_r_addr = 9'h000;
    casez (\$64 )
      1'h0:
          transmit_buffer_0_r_addr = send_position[8:0];
    endcase
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (ready) begin
            casez (\$83 )
              1'h0:
                  transmit_buffer_0_r_addr = \$82 [8:0];
            endcase
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    transmit_buffer_1_r_addr = 9'h000;
    (* full_case = 32'd1 *)
    casez (\$64 )
      1'h0:
          /* empty */;
      1'h1:
          transmit_buffer_1_r_addr = send_position[8:0];
    endcase
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (ready) begin
            (* full_case = 32'd1 *)
            casez (\$83 )
              1'h0:
                  /* empty */;
              1'h1:
                  transmit_buffer_1_r_addr = \$82 [8:0];
            endcase
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    transmit_buffer_0_w_en = 1'h0;
    casez (buffer_toggle)
      1'h0:
          transmit_buffer_0_w_en = \$70 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    transmit_buffer_1_w_en = 1'h0;
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          /* empty */;
      1'h1:
          transmit_buffer_1_w_en = \$70 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    nak = 1'h0;
    casez (fsm_state)
      2'h0:
          nak = \$72 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \valid$38  = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          casez ({ \$74 , 1'h0 })
            2'b1?:
                (* full_case = 32'd1 *)
                if (\$77 ) begin
                end else begin
                  \valid$38  = 1'h1;
                end
          endcase
      2'h2:
          \valid$38  = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    \last$39  = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          casez ({ \$74 , 1'h0 })
            2'b1?:
                (* full_case = 32'd1 *)
                if (\$77 ) begin
                end else begin
                  \last$39  = 1'h1;
                end
          endcase
      2'h2:
          \last$39  = \$81 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$11 ) begin end
    (* full_case = 32'd1 *)
    casez (buffer_toggle)
      1'h0:
          \$2  = transmit_buffer_0_w_en;
      1'h1:
          \$2  = transmit_buffer_1_w_en;
    endcase
  end
  assign reset_sequence = 1'h0;
  assign start_with_data1 = 1'h0;
  assign discard = 1'h0;
  assign last = \port$1347$0 [8];
  assign flush = 1'h0;
  assign generate_zlps = 1'h1;
  assign transmit_buffer_0_w_data = \port$1347$0 [7:0];
  assign payload = \port$1347$0 [7:0];
  assign transmit_buffer_0_w_addr = \$62 [8:0];
  assign transmit_buffer_1_w_data = \port$1347$0 [7:0];
  assign transmit_buffer_1_w_addr = \$63 [8:0];
  assign \$1  = 1'h1;
  assign \$16  = 1'h0;
  assign \$17  = \$13 ;
  assign \$18  = 1'h1;
  assign \$19  = \$13 ;
  assign \$39  = \$38 ;
  assign \$51  = 1'h0;
  assign \$52  = \$48 ;
  assign \$53  = 1'h1;
  assign \$54  = \$48 ;
  assign \$60  = 1'h1;
  assign \$61  = new_token;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:290" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBStreamOutEndpoint (usb_rst, is_out, is_ping, ack, nak, \valid$35 , read_data, read_en, endpoint, ready_for_response, complete_in, invalid_in, \port$1710$3 , next, valid, payload, rx_ready_for_response, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$12  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$100 ;
  wire \$101 ;
  wire \$102 ;
  wire \$103 ;
  wire \$104 ;
  wire \$105 ;
  wire \$106 ;
  wire \$107 ;
  wire \$108 ;
  wire \$109 ;
  wire \$11 ;
  wire \$110 ;
  wire \$111 ;
  wire \$112 ;
  wire \$113 ;
  wire \$114 ;
  wire \$115 ;
  wire \$116 ;
  wire \$117 ;
  wire \$118 ;
  wire \$119 ;
  wire \$12 ;
  wire \$120 ;
  wire \$121 ;
  reg [8:0] \$122 ;
  reg \$123 ;
  reg \$124 ;
  reg \$125 ;
  wire \$13 ;
  wire \$14 ;
  wire \$15 ;
  wire \$16 ;
  wire \$17 ;
  wire \$18 ;
  wire \$19 ;
  wire \$2 ;
  wire \$20 ;
  wire \$21 ;
  wire \$22 ;
  wire \$23 ;
  wire \$24 ;
  wire \$25 ;
  wire \$26 ;
  wire \$27 ;
  wire \$28 ;
  wire \$29 ;
  wire \$3 ;
  wire \$30 ;
  wire \$31 ;
  wire \$32 ;
  wire \$33 ;
  wire \$34 ;
  wire \$35 ;
  wire \$36 ;
  wire \$37 ;
  wire \$38 ;
  wire \$39 ;
  wire \$4 ;
  wire \$40 ;
  wire \$41 ;
  wire \$42 ;
  wire \$43 ;
  wire \$44 ;
  wire \$45 ;
  wire \$46 ;
  wire \$47 ;
  wire \$48 ;
  wire \$49 ;
  wire \$5 ;
  wire \$50 ;
  wire \$51 ;
  wire \$52 ;
  wire \$53 ;
  wire \$54 ;
  wire \$55 ;
  wire \$56 ;
  wire \$57 ;
  wire \$58 ;
  wire \$59 ;
  wire \$6 ;
  wire \$60 ;
  wire \$61 ;
  wire \$62 ;
  wire \$63 ;
  wire \$64 ;
  wire \$65 ;
  wire \$66 ;
  wire \$67 ;
  wire \$68 ;
  wire \$69 ;
  wire \$7 ;
  wire \$70 ;
  wire \$71 ;
  wire \$72 ;
  wire \$73 ;
  wire \$74 ;
  wire \$75 ;
  wire \$76 ;
  wire \$77 ;
  wire \$78 ;
  wire \$79 ;
  wire \$8 ;
  wire \$80 ;
  wire \$81 ;
  wire \$82 ;
  wire \$83 ;
  wire \$84 ;
  wire \$85 ;
  wire \$86 ;
  wire \$87 ;
  wire \$88 ;
  wire \$89 ;
  wire \$9 ;
  wire \$90 ;
  wire [9:0] \$91 ;
  wire \$92 ;
  wire \$93 ;
  wire \$94 ;
  wire \$95 ;
  wire \$96 ;
  wire \$97 ;
  wire \$98 ;
  wire \$99 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output ack;
  wire ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:94" *)
  input complete_in;
  wire complete_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:147" *)
  wire complete_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:91" *)
  wire empty;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] endpoint;
  wire [3:0] endpoint;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:301" *)
  reg expected_data_toggle = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:150" *)
  wire first;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$40 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:97" *)
  wire full;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  input invalid_in;
  wire invalid_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:148" *)
  wire invalid_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_out;
  wire is_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_ping;
  wire is_ping;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:151" *)
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$39 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output nak;
  wire nak;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input next;
  wire next;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:304" *)
  reg overflow = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input [7:0] payload;
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$37 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$5 ;
  input \port$1710$3 ;
  wire \port$1710$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:89" *)
  wire read_commit;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:87" *)
  output [9:0] read_data;
  wire [9:0] read_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input read_en;
  wire read_en;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input ready_for_response;
  wire ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:307" *)
  reg [8:0] rx_cnt = 9'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:94" *)
  wire rx_complete;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  wire rx_invalid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:97" *)
  wire [1:0] rx_pid_toggle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:95" *)
  input rx_ready_for_response;
  wire rx_ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:99" *)
  wire [9:0] space_available;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:310" *)
  reg transfer_active = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input valid;
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$1 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$22 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \valid$35 ;
  wire \valid$35 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:95" *)
  wire write_commit;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:93" *)
  wire [9:0] write_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:96" *)
  wire write_discard;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:94" *)
  wire write_en;
  assign \$1  = rx_cnt == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:351" *) 9'h1ff;
  assign \$2  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:358" *) \$1 ;
  assign \$3  = last & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:358" *) \$2 ;
  assign \$4  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:359" *) transfer_active;
  assign \$5  = first & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:359" *) \$4 ;
  assign \$6  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$7  = \$6  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$8  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$9  = \$7  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:346" *) \$8 ;
  assign \$10  = \$9  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:360" *) \next$21 ;
  assign \$11  = \$10  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:360" *) \valid$22 ;
  assign \$12  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:360" *) full;
  assign write_en = \$11  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:360" *) \$12 ;
  assign \$13  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$14  = \$13  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$15  = \$14  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:363" *) complete_out;
  assign \$16  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:363" *) overflow;
  assign write_commit = \$15  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:363" *) \$16 ;
  assign \$17  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$18  = \$17  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$19  = complete_out & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:364" *) overflow;
  assign \$20  = invalid_out | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:364" *) \$19 ;
  assign write_discard = \$18  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:364" *) \$20 ;
  assign \$21  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$22  = \$21  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$23  = \$22  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:344" *) is_out;
  assign \$24  = \$23  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:344" *) rx_ready_for_response;
  assign \$25  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$26  = \$25  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$27  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$28  = \$26  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:346" *) \$27 ;
  assign \$29  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$30  = \$29  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$31  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$32  = \$30  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:346" *) \$31 ;
  assign \$33  = \$32  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) \next$21 ;
  assign \$34  = \$33  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) \valid$22 ;
  assign \$35  = \$34  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) full;
  assign \$36  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) \$35 ;
  assign \$37  = \$28  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) \$36 ;
  assign \$38  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) overflow;
  assign \$39  = \$37  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) \$38 ;
  assign \$40  = \$24  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:370" *) \$39 ;
  assign \$41  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$42  = \$41  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:343" *) is_ping;
  assign \$43  = \$42  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:343" *) ready_for_response;
  assign \$44  = space_available >= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:341" *) 10'h200;
  assign \$45  = \$43  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:371" *) \$44 ;
  assign \$46  = \$40  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:370" *) \$45 ;
  assign \$47  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$48  = \$47  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$49  = \$48  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:344" *) is_out;
  assign \$50  = \$49  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:344" *) rx_ready_for_response;
  assign \$51  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$52  = \$51  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$53  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$54  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:349" *) \$53 ;
  assign \$55  = \$52  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:349" *) \$54 ;
  assign \$56  = \$50  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:372" *) \$55 ;
  assign ack = \$46  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:370" *) \$56 ;
  assign \$57  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$58  = \$57  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$59  = \$58  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:344" *) is_out;
  assign \$60  = \$59  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:344" *) rx_ready_for_response;
  assign \$61  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$62  = \$61  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$63  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$64  = \$62  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:346" *) \$63 ;
  assign \$65  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$66  = \$65  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$67  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$68  = \$66  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:346" *) \$67 ;
  assign \$69  = \$68  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) \next$21 ;
  assign \$70  = \$69  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) \valid$22 ;
  assign \$71  = \$70  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) full;
  assign \$72  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) \$71 ;
  assign \$73  = \$64  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) \$72 ;
  assign \$74  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) overflow;
  assign \$75  = \$73  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) \$74 ;
  assign \$76  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:377" *) \$75 ;
  assign \$77  = \$60  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:377" *) \$76 ;
  assign \$78  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$79  = \$78  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$80  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$81  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:349" *) \$80 ;
  assign \$82  = \$79  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:349" *) \$81 ;
  assign \$83  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:377" *) \$82 ;
  assign \$84  = \$77  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:377" *) \$83 ;
  assign \$85  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$86  = \$85  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:343" *) is_ping;
  assign \$87  = \$86  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:343" *) ready_for_response;
  assign \$88  = space_available >= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:341" *) 10'h200;
  assign \$89  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:378" *) \$88 ;
  assign \$90  = \$87  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:378" *) \$89 ;
  assign nak = \$84  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:377" *) \$90 ;
  assign \valid$35  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:383" *) empty;
  assign \$91  = rx_cnt + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:398" *) 1'h1;
  assign \$92  = rx_cnt == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:351" *) 9'h1ff;
  assign \$93  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$94  = \$93  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$95  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$96  = \$94  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:346" *) \$95 ;
  assign \$97  = \$96  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) \next$21 ;
  assign \$98  = \$97  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) \valid$22 ;
  assign \$99  = \$98  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) full;
  assign \$100  = write_commit | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:409" *) write_discard;
  assign \$101  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$102  = \$101  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$103  = \$102  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:344" *) is_out;
  assign \$104  = \$103  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:344" *) rx_ready_for_response;
  assign \$105  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$106  = \$105  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$107  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$108  = \$106  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:346" *) \$107 ;
  assign \$109  = endpoint == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:337" *) 1'h1;
  assign \$110  = \$109  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:338" *) is_out;
  assign \$111  = \port$1710$3  == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:340" *) expected_data_toggle;
  assign \$112  = \$110  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:346" *) \$111 ;
  assign \$113  = \$112  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) \next$21 ;
  assign \$114  = \$113  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) \valid$22 ;
  assign \$115  = \$114  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:347" *) full;
  assign \$116  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) \$115 ;
  assign \$117  = \$108  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) \$116 ;
  assign \$118  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) overflow;
  assign \$119  = \$117  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:348" *) \$118 ;
  assign \$120  = \$104  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:414" *) \$119 ;
  assign \$121  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:415" *) expected_data_toggle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:307" *)
  always @(posedge usb_clk)
    rx_cnt <= \$122 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:310" *)
  always @(posedge usb_clk)
    transfer_active <= \$123 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:304" *)
  always @(posedge usb_clk)
    overflow <= \$124 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:301" *)
  always @(posedge usb_clk)
    expected_data_toggle <= \$125 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:318" *)
  \USBStreamOutDeviceExample.usb.USBStreamOutEndpoint.boundary_detector  boundary_detector (
    .complete_in(complete_in),
    .complete_out(complete_out),
    .first(first),
    .invalid_in(invalid_in),
    .invalid_out(invalid_out),
    .last(last),
    .next(\next$21 ),
    .\next$12 (next),
    .payload(payload),
    .\payload$18 (\payload$11 ),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .valid(\valid$22 ),
    .\valid$11 (valid)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoints\\stream.py:330" *)
  \USBStreamOutDeviceExample.usb.USBStreamOutEndpoint.fifo  fifo (
    .empty(empty),
    .full(full),
    .read_data(read_data),
    .read_en(read_en),
    .rx_fifo_w_data(write_data),
    .space_available(space_available),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst),
    .write_commit(write_commit),
    .write_discard(write_discard),
    .write_en(write_en)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$12 ) begin end
    \$122  = rx_cnt;
    if (write_en) begin
      \$122  = \$91 [8:0];
    end
    if (\$99 ) begin
    end else if (\$100 ) begin
      \$122  = 9'h000;
    end
    if (usb_rst) begin
      \$122  = 9'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$12 ) begin end
    \$123  = transfer_active;
    if (write_en) begin
      if (last) begin
        \$123  = \$92 ;
      end
    end
    if (usb_rst) begin
      \$123  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$12 ) begin end
    \$124  = overflow;
    if (\$99 ) begin
      \$124  = 1'h1;
    end else if (\$100 ) begin
      \$124  = 1'h0;
    end
    if (usb_rst) begin
      \$124  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$12 ) begin end
    \$125  = expected_data_toggle;
    if (\$120 ) begin
      \$125  = \$121 ;
    end
    if (usb_rst) begin
      \$125  = 1'h0;
    end
  end
  assign \valid$1  = valid;
  assign \next$3  = next;
  assign \payload$5  = payload;
  assign rx_complete = complete_in;
  assign rx_invalid = invalid_in;
  assign rx_pid_toggle = { 1'h0, \port$1710$3  };
  assign \payload$37  = read_data[7:0];
  assign \last$39  = read_data[8];
  assign \first$40  = read_data[9];
  assign ready = read_en;
  assign read_commit = 1'h1;
  assign write_data[9] = \$5 ;
  assign write_data[8] = \$3 ;
  assign write_data[7:0] = \payload$11 ;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:155" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBStreamOutEndpoint.boundary_detector (usb_rst, complete_in, invalid_in, \next$12 , \valid$11 , payload, valid, first, last, next, complete_out, invalid_out, \payload$18 , usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$13  = 0;
  wire \$1 ;
  reg \$10 ;
  reg \$11 ;
  reg \$12 ;
  reg \$13 ;
  reg \$14 ;
  reg \$15 ;
  reg \$16 ;
  reg [7:0] \$17 ;
  reg \$18 ;
  reg [1:0] \$19 ;
  wire \$2 ;
  reg [7:0] \$20 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  reg \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:161" *)
  reg [7:0] buffered_byte = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:164" *)
  reg buffered_complete = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:165" *)
  reg buffered_invalid = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:144" *)
  input complete_in;
  wire complete_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:147" *)
  output complete_out;
  reg complete_out = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:150" *)
  output first;
  reg first = 1'h0;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [1:0] fsm_state = 2'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:145" *)
  input invalid_in;
  wire invalid_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:148" *)
  output invalid_out;
  reg invalid_out = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:162" *)
  reg is_first_byte = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:151" *)
  output last;
  reg last = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  output next;
  reg next = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input \next$12 ;
  wire \next$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input [7:0] payload;
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  output [7:0] \payload$18 ;
  reg [7:0] \payload$18  = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  output valid;
  reg valid = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input \valid$11 ;
  wire \valid$11 ;
  assign \$1  = \valid$11  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:188" *) \next$12 ;
  assign \$2  = buffered_complete | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:207" *) complete_in;
  assign \$3  = buffered_invalid | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:208" *) invalid_in;
  assign \$4  = \valid$11  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:212" *) \next$12 ;
  assign \$5  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:228" *) \valid$11 ;
  assign \$6  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$7  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$8  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  always @(posedge usb_clk)
    valid <= \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:150" *)
  always @(posedge usb_clk)
    first <= \$10 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:151" *)
  always @(posedge usb_clk)
    last <= \$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  always @(posedge usb_clk)
    next <= \$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:164" *)
  always @(posedge usb_clk)
    buffered_complete <= \$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:165" *)
  always @(posedge usb_clk)
    buffered_invalid <= \$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:147" *)
  always @(posedge usb_clk)
    complete_out <= \$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:148" *)
  always @(posedge usb_clk)
    invalid_out <= \$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:161" *)
  always @(posedge usb_clk)
    buffered_byte <= \$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:162" *)
  always @(posedge usb_clk)
    is_first_byte <= \$18 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  always @(posedge usb_clk)
    \payload$18  <= \$20 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$9  = valid;
    casez (fsm_state)
      2'h0:
          \$9  = 1'h0;
      2'h1:
          \$9  = 1'h1;
    endcase
    if (usb_rst) begin
      \$9  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$10  = first;
    casez (fsm_state)
      2'h0:
          \$10  = 1'h0;
      2'h1:
        begin
          if (\$4 ) begin
            \$10  = is_first_byte;
          end
          if (\$5 ) begin
            \$10  = is_first_byte;
          end
        end
      2'h2:
          \$10  = 1'h0;
    endcase
    if (usb_rst) begin
      \$10  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$11  = last;
    casez (fsm_state)
      2'h0:
          \$11  = 1'h0;
      2'h1:
          if (\$5 ) begin
            \$11  = 1'h1;
          end
      2'h2:
          \$11  = 1'h0;
    endcase
    if (usb_rst) begin
      \$11  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$12  = next;
    casez (fsm_state)
      2'h0:
          \$12  = 1'h0;
      2'h1:
        begin
          \$12  = 1'h0;
          if (\$4 ) begin
            \$12  = 1'h1;
          end
          if (\$5 ) begin
            \$12  = 1'h1;
          end
        end
      2'h2:
          \$12  = 1'h0;
    endcase
    if (usb_rst) begin
      \$12  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$13  = buffered_complete;
    casez (fsm_state)
      2'h0:
          \$13  = 1'h0;
      2'h1:
          \$13  = \$2 ;
    endcase
    if (usb_rst) begin
      \$13  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$14  = buffered_invalid;
    casez (fsm_state)
      2'h0:
          \$14  = 1'h0;
      2'h1:
          \$14  = \$3 ;
    endcase
    if (usb_rst) begin
      \$14  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$15  = complete_out;
    casez (fsm_state)
      2'h0:
          \$15  = 1'h0;
      2'h1:
          /* empty */;
      2'h2:
          \$15  = buffered_complete;
    endcase
    if (usb_rst) begin
      \$15  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$16  = invalid_out;
    casez (fsm_state)
      2'h0:
          \$16  = 1'h0;
      2'h1:
          /* empty */;
      2'h2:
          \$16  = buffered_invalid;
    endcase
    if (usb_rst) begin
      \$16  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$17  = buffered_byte;
    casez (fsm_state)
      2'h0:
          if (\$1 ) begin
            \$17  = payload;
          end
      2'h1:
          if (\$4 ) begin
            \$17  = payload;
          end
    endcase
    if (usb_rst) begin
      \$17  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$18  = is_first_byte;
    casez (fsm_state)
      2'h0:
          if (\$1 ) begin
            \$18  = 1'h1;
          end
      2'h1:
          if (\$4 ) begin
            \$18  = 1'h0;
          end
    endcase
    if (usb_rst) begin
      \$18  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$19  = fsm_state;
    casez (fsm_state)
      2'h0:
          if (\$1 ) begin
            \$19  = 2'h1;
          end
      2'h1:
          if (\$5 ) begin
            \$19  = 2'h2;
          end
      2'h2:
          \$19  = 2'h0;
    endcase
    if (usb_rst) begin
      \$19  = 2'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$13 ) begin end
    \$20  = \payload$18 ;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
        begin
          if (\$4 ) begin
            \$20  = buffered_byte;
          end
          if (\$5 ) begin
            \$20  = buffered_byte;
          end
        end
    endcase
    if (usb_rst) begin
      \$20  = 8'h00;
    end
  end
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:103" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.USBStreamOutEndpoint.fifo (usb_rst, write_en, write_commit, write_discard, empty, full, read_data, read_en, rx_fifo_w_data, space_available, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$14  = 0;
  wire \$1 ;
  wire [11:0] \$10 ;
  wire [10:0] \$11 ;
  wire [11:0] \$12 ;
  wire \$13 ;
  wire \$14 ;
  wire \$15 ;
  wire \$16 ;
  reg [9:0] \$17 ;
  reg [9:0] \$18 ;
  reg [9:0] \$19 ;
  wire \$2 ;
  reg [9:0] \$20 ;
  wire [10:0] \$3 ;
  wire \$4 ;
  wire [10:0] \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire [10:0] \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:162" *)
  reg [9:0] committed_read_pointer = 10'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:129" *)
  reg [9:0] committed_write_pointer = 10'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:163" *)
  reg [9:0] current_read_pointer = 10'h000;
  (* init = 10'h000 *)
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:130" *)
  wire [9:0] current_write_pointer;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:91" *)
  output empty;
  wire empty;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:97" *)
  output full;
  wire full;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:168" *)
  reg [9:0] next_read_pointer;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:136" *)
  reg [9:0] next_write_pointer;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:89" *)
  wire read_commit;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:112" *)
  output [9:0] read_data;
  wire [9:0] read_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:90" *)
  wire read_discard;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:88" *)
  input read_en;
  wire read_en;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:112" *)
  reg [9:0] rx_fifo_r_addr;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:112" *)
  wire [9:0] rx_fifo_r_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:113" *)
  reg [9:0] rx_fifo_w_addr = 10'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:93" *)
  input [9:0] rx_fifo_w_data;
  wire [9:0] rx_fifo_w_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:113" *)
  wire rx_fifo_w_en;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:99" *)
  output [9:0] space_available;
  reg [9:0] space_available;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:95" *)
  input write_commit;
  wire write_commit;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:93" *)
  wire [9:0] write_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:96" *)
  input write_discard;
  wire write_discard;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:94" *)
  input write_en;
  wire write_en;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:111" *)
  reg [9:0] read_port [1023:0];
  initial begin
    read_port[0] = 10'h000;
    read_port[1] = 10'h000;
    read_port[2] = 10'h000;
    read_port[3] = 10'h000;
    read_port[4] = 10'h000;
    read_port[5] = 10'h000;
    read_port[6] = 10'h000;
    read_port[7] = 10'h000;
    read_port[8] = 10'h000;
    read_port[9] = 10'h000;
    read_port[10] = 10'h000;
    read_port[11] = 10'h000;
    read_port[12] = 10'h000;
    read_port[13] = 10'h000;
    read_port[14] = 10'h000;
    read_port[15] = 10'h000;
    read_port[16] = 10'h000;
    read_port[17] = 10'h000;
    read_port[18] = 10'h000;
    read_port[19] = 10'h000;
    read_port[20] = 10'h000;
    read_port[21] = 10'h000;
    read_port[22] = 10'h000;
    read_port[23] = 10'h000;
    read_port[24] = 10'h000;
    read_port[25] = 10'h000;
    read_port[26] = 10'h000;
    read_port[27] = 10'h000;
    read_port[28] = 10'h000;
    read_port[29] = 10'h000;
    read_port[30] = 10'h000;
    read_port[31] = 10'h000;
    read_port[32] = 10'h000;
    read_port[33] = 10'h000;
    read_port[34] = 10'h000;
    read_port[35] = 10'h000;
    read_port[36] = 10'h000;
    read_port[37] = 10'h000;
    read_port[38] = 10'h000;
    read_port[39] = 10'h000;
    read_port[40] = 10'h000;
    read_port[41] = 10'h000;
    read_port[42] = 10'h000;
    read_port[43] = 10'h000;
    read_port[44] = 10'h000;
    read_port[45] = 10'h000;
    read_port[46] = 10'h000;
    read_port[47] = 10'h000;
    read_port[48] = 10'h000;
    read_port[49] = 10'h000;
    read_port[50] = 10'h000;
    read_port[51] = 10'h000;
    read_port[52] = 10'h000;
    read_port[53] = 10'h000;
    read_port[54] = 10'h000;
    read_port[55] = 10'h000;
    read_port[56] = 10'h000;
    read_port[57] = 10'h000;
    read_port[58] = 10'h000;
    read_port[59] = 10'h000;
    read_port[60] = 10'h000;
    read_port[61] = 10'h000;
    read_port[62] = 10'h000;
    read_port[63] = 10'h000;
    read_port[64] = 10'h000;
    read_port[65] = 10'h000;
    read_port[66] = 10'h000;
    read_port[67] = 10'h000;
    read_port[68] = 10'h000;
    read_port[69] = 10'h000;
    read_port[70] = 10'h000;
    read_port[71] = 10'h000;
    read_port[72] = 10'h000;
    read_port[73] = 10'h000;
    read_port[74] = 10'h000;
    read_port[75] = 10'h000;
    read_port[76] = 10'h000;
    read_port[77] = 10'h000;
    read_port[78] = 10'h000;
    read_port[79] = 10'h000;
    read_port[80] = 10'h000;
    read_port[81] = 10'h000;
    read_port[82] = 10'h000;
    read_port[83] = 10'h000;
    read_port[84] = 10'h000;
    read_port[85] = 10'h000;
    read_port[86] = 10'h000;
    read_port[87] = 10'h000;
    read_port[88] = 10'h000;
    read_port[89] = 10'h000;
    read_port[90] = 10'h000;
    read_port[91] = 10'h000;
    read_port[92] = 10'h000;
    read_port[93] = 10'h000;
    read_port[94] = 10'h000;
    read_port[95] = 10'h000;
    read_port[96] = 10'h000;
    read_port[97] = 10'h000;
    read_port[98] = 10'h000;
    read_port[99] = 10'h000;
    read_port[100] = 10'h000;
    read_port[101] = 10'h000;
    read_port[102] = 10'h000;
    read_port[103] = 10'h000;
    read_port[104] = 10'h000;
    read_port[105] = 10'h000;
    read_port[106] = 10'h000;
    read_port[107] = 10'h000;
    read_port[108] = 10'h000;
    read_port[109] = 10'h000;
    read_port[110] = 10'h000;
    read_port[111] = 10'h000;
    read_port[112] = 10'h000;
    read_port[113] = 10'h000;
    read_port[114] = 10'h000;
    read_port[115] = 10'h000;
    read_port[116] = 10'h000;
    read_port[117] = 10'h000;
    read_port[118] = 10'h000;
    read_port[119] = 10'h000;
    read_port[120] = 10'h000;
    read_port[121] = 10'h000;
    read_port[122] = 10'h000;
    read_port[123] = 10'h000;
    read_port[124] = 10'h000;
    read_port[125] = 10'h000;
    read_port[126] = 10'h000;
    read_port[127] = 10'h000;
    read_port[128] = 10'h000;
    read_port[129] = 10'h000;
    read_port[130] = 10'h000;
    read_port[131] = 10'h000;
    read_port[132] = 10'h000;
    read_port[133] = 10'h000;
    read_port[134] = 10'h000;
    read_port[135] = 10'h000;
    read_port[136] = 10'h000;
    read_port[137] = 10'h000;
    read_port[138] = 10'h000;
    read_port[139] = 10'h000;
    read_port[140] = 10'h000;
    read_port[141] = 10'h000;
    read_port[142] = 10'h000;
    read_port[143] = 10'h000;
    read_port[144] = 10'h000;
    read_port[145] = 10'h000;
    read_port[146] = 10'h000;
    read_port[147] = 10'h000;
    read_port[148] = 10'h000;
    read_port[149] = 10'h000;
    read_port[150] = 10'h000;
    read_port[151] = 10'h000;
    read_port[152] = 10'h000;
    read_port[153] = 10'h000;
    read_port[154] = 10'h000;
    read_port[155] = 10'h000;
    read_port[156] = 10'h000;
    read_port[157] = 10'h000;
    read_port[158] = 10'h000;
    read_port[159] = 10'h000;
    read_port[160] = 10'h000;
    read_port[161] = 10'h000;
    read_port[162] = 10'h000;
    read_port[163] = 10'h000;
    read_port[164] = 10'h000;
    read_port[165] = 10'h000;
    read_port[166] = 10'h000;
    read_port[167] = 10'h000;
    read_port[168] = 10'h000;
    read_port[169] = 10'h000;
    read_port[170] = 10'h000;
    read_port[171] = 10'h000;
    read_port[172] = 10'h000;
    read_port[173] = 10'h000;
    read_port[174] = 10'h000;
    read_port[175] = 10'h000;
    read_port[176] = 10'h000;
    read_port[177] = 10'h000;
    read_port[178] = 10'h000;
    read_port[179] = 10'h000;
    read_port[180] = 10'h000;
    read_port[181] = 10'h000;
    read_port[182] = 10'h000;
    read_port[183] = 10'h000;
    read_port[184] = 10'h000;
    read_port[185] = 10'h000;
    read_port[186] = 10'h000;
    read_port[187] = 10'h000;
    read_port[188] = 10'h000;
    read_port[189] = 10'h000;
    read_port[190] = 10'h000;
    read_port[191] = 10'h000;
    read_port[192] = 10'h000;
    read_port[193] = 10'h000;
    read_port[194] = 10'h000;
    read_port[195] = 10'h000;
    read_port[196] = 10'h000;
    read_port[197] = 10'h000;
    read_port[198] = 10'h000;
    read_port[199] = 10'h000;
    read_port[200] = 10'h000;
    read_port[201] = 10'h000;
    read_port[202] = 10'h000;
    read_port[203] = 10'h000;
    read_port[204] = 10'h000;
    read_port[205] = 10'h000;
    read_port[206] = 10'h000;
    read_port[207] = 10'h000;
    read_port[208] = 10'h000;
    read_port[209] = 10'h000;
    read_port[210] = 10'h000;
    read_port[211] = 10'h000;
    read_port[212] = 10'h000;
    read_port[213] = 10'h000;
    read_port[214] = 10'h000;
    read_port[215] = 10'h000;
    read_port[216] = 10'h000;
    read_port[217] = 10'h000;
    read_port[218] = 10'h000;
    read_port[219] = 10'h000;
    read_port[220] = 10'h000;
    read_port[221] = 10'h000;
    read_port[222] = 10'h000;
    read_port[223] = 10'h000;
    read_port[224] = 10'h000;
    read_port[225] = 10'h000;
    read_port[226] = 10'h000;
    read_port[227] = 10'h000;
    read_port[228] = 10'h000;
    read_port[229] = 10'h000;
    read_port[230] = 10'h000;
    read_port[231] = 10'h000;
    read_port[232] = 10'h000;
    read_port[233] = 10'h000;
    read_port[234] = 10'h000;
    read_port[235] = 10'h000;
    read_port[236] = 10'h000;
    read_port[237] = 10'h000;
    read_port[238] = 10'h000;
    read_port[239] = 10'h000;
    read_port[240] = 10'h000;
    read_port[241] = 10'h000;
    read_port[242] = 10'h000;
    read_port[243] = 10'h000;
    read_port[244] = 10'h000;
    read_port[245] = 10'h000;
    read_port[246] = 10'h000;
    read_port[247] = 10'h000;
    read_port[248] = 10'h000;
    read_port[249] = 10'h000;
    read_port[250] = 10'h000;
    read_port[251] = 10'h000;
    read_port[252] = 10'h000;
    read_port[253] = 10'h000;
    read_port[254] = 10'h000;
    read_port[255] = 10'h000;
    read_port[256] = 10'h000;
    read_port[257] = 10'h000;
    read_port[258] = 10'h000;
    read_port[259] = 10'h000;
    read_port[260] = 10'h000;
    read_port[261] = 10'h000;
    read_port[262] = 10'h000;
    read_port[263] = 10'h000;
    read_port[264] = 10'h000;
    read_port[265] = 10'h000;
    read_port[266] = 10'h000;
    read_port[267] = 10'h000;
    read_port[268] = 10'h000;
    read_port[269] = 10'h000;
    read_port[270] = 10'h000;
    read_port[271] = 10'h000;
    read_port[272] = 10'h000;
    read_port[273] = 10'h000;
    read_port[274] = 10'h000;
    read_port[275] = 10'h000;
    read_port[276] = 10'h000;
    read_port[277] = 10'h000;
    read_port[278] = 10'h000;
    read_port[279] = 10'h000;
    read_port[280] = 10'h000;
    read_port[281] = 10'h000;
    read_port[282] = 10'h000;
    read_port[283] = 10'h000;
    read_port[284] = 10'h000;
    read_port[285] = 10'h000;
    read_port[286] = 10'h000;
    read_port[287] = 10'h000;
    read_port[288] = 10'h000;
    read_port[289] = 10'h000;
    read_port[290] = 10'h000;
    read_port[291] = 10'h000;
    read_port[292] = 10'h000;
    read_port[293] = 10'h000;
    read_port[294] = 10'h000;
    read_port[295] = 10'h000;
    read_port[296] = 10'h000;
    read_port[297] = 10'h000;
    read_port[298] = 10'h000;
    read_port[299] = 10'h000;
    read_port[300] = 10'h000;
    read_port[301] = 10'h000;
    read_port[302] = 10'h000;
    read_port[303] = 10'h000;
    read_port[304] = 10'h000;
    read_port[305] = 10'h000;
    read_port[306] = 10'h000;
    read_port[307] = 10'h000;
    read_port[308] = 10'h000;
    read_port[309] = 10'h000;
    read_port[310] = 10'h000;
    read_port[311] = 10'h000;
    read_port[312] = 10'h000;
    read_port[313] = 10'h000;
    read_port[314] = 10'h000;
    read_port[315] = 10'h000;
    read_port[316] = 10'h000;
    read_port[317] = 10'h000;
    read_port[318] = 10'h000;
    read_port[319] = 10'h000;
    read_port[320] = 10'h000;
    read_port[321] = 10'h000;
    read_port[322] = 10'h000;
    read_port[323] = 10'h000;
    read_port[324] = 10'h000;
    read_port[325] = 10'h000;
    read_port[326] = 10'h000;
    read_port[327] = 10'h000;
    read_port[328] = 10'h000;
    read_port[329] = 10'h000;
    read_port[330] = 10'h000;
    read_port[331] = 10'h000;
    read_port[332] = 10'h000;
    read_port[333] = 10'h000;
    read_port[334] = 10'h000;
    read_port[335] = 10'h000;
    read_port[336] = 10'h000;
    read_port[337] = 10'h000;
    read_port[338] = 10'h000;
    read_port[339] = 10'h000;
    read_port[340] = 10'h000;
    read_port[341] = 10'h000;
    read_port[342] = 10'h000;
    read_port[343] = 10'h000;
    read_port[344] = 10'h000;
    read_port[345] = 10'h000;
    read_port[346] = 10'h000;
    read_port[347] = 10'h000;
    read_port[348] = 10'h000;
    read_port[349] = 10'h000;
    read_port[350] = 10'h000;
    read_port[351] = 10'h000;
    read_port[352] = 10'h000;
    read_port[353] = 10'h000;
    read_port[354] = 10'h000;
    read_port[355] = 10'h000;
    read_port[356] = 10'h000;
    read_port[357] = 10'h000;
    read_port[358] = 10'h000;
    read_port[359] = 10'h000;
    read_port[360] = 10'h000;
    read_port[361] = 10'h000;
    read_port[362] = 10'h000;
    read_port[363] = 10'h000;
    read_port[364] = 10'h000;
    read_port[365] = 10'h000;
    read_port[366] = 10'h000;
    read_port[367] = 10'h000;
    read_port[368] = 10'h000;
    read_port[369] = 10'h000;
    read_port[370] = 10'h000;
    read_port[371] = 10'h000;
    read_port[372] = 10'h000;
    read_port[373] = 10'h000;
    read_port[374] = 10'h000;
    read_port[375] = 10'h000;
    read_port[376] = 10'h000;
    read_port[377] = 10'h000;
    read_port[378] = 10'h000;
    read_port[379] = 10'h000;
    read_port[380] = 10'h000;
    read_port[381] = 10'h000;
    read_port[382] = 10'h000;
    read_port[383] = 10'h000;
    read_port[384] = 10'h000;
    read_port[385] = 10'h000;
    read_port[386] = 10'h000;
    read_port[387] = 10'h000;
    read_port[388] = 10'h000;
    read_port[389] = 10'h000;
    read_port[390] = 10'h000;
    read_port[391] = 10'h000;
    read_port[392] = 10'h000;
    read_port[393] = 10'h000;
    read_port[394] = 10'h000;
    read_port[395] = 10'h000;
    read_port[396] = 10'h000;
    read_port[397] = 10'h000;
    read_port[398] = 10'h000;
    read_port[399] = 10'h000;
    read_port[400] = 10'h000;
    read_port[401] = 10'h000;
    read_port[402] = 10'h000;
    read_port[403] = 10'h000;
    read_port[404] = 10'h000;
    read_port[405] = 10'h000;
    read_port[406] = 10'h000;
    read_port[407] = 10'h000;
    read_port[408] = 10'h000;
    read_port[409] = 10'h000;
    read_port[410] = 10'h000;
    read_port[411] = 10'h000;
    read_port[412] = 10'h000;
    read_port[413] = 10'h000;
    read_port[414] = 10'h000;
    read_port[415] = 10'h000;
    read_port[416] = 10'h000;
    read_port[417] = 10'h000;
    read_port[418] = 10'h000;
    read_port[419] = 10'h000;
    read_port[420] = 10'h000;
    read_port[421] = 10'h000;
    read_port[422] = 10'h000;
    read_port[423] = 10'h000;
    read_port[424] = 10'h000;
    read_port[425] = 10'h000;
    read_port[426] = 10'h000;
    read_port[427] = 10'h000;
    read_port[428] = 10'h000;
    read_port[429] = 10'h000;
    read_port[430] = 10'h000;
    read_port[431] = 10'h000;
    read_port[432] = 10'h000;
    read_port[433] = 10'h000;
    read_port[434] = 10'h000;
    read_port[435] = 10'h000;
    read_port[436] = 10'h000;
    read_port[437] = 10'h000;
    read_port[438] = 10'h000;
    read_port[439] = 10'h000;
    read_port[440] = 10'h000;
    read_port[441] = 10'h000;
    read_port[442] = 10'h000;
    read_port[443] = 10'h000;
    read_port[444] = 10'h000;
    read_port[445] = 10'h000;
    read_port[446] = 10'h000;
    read_port[447] = 10'h000;
    read_port[448] = 10'h000;
    read_port[449] = 10'h000;
    read_port[450] = 10'h000;
    read_port[451] = 10'h000;
    read_port[452] = 10'h000;
    read_port[453] = 10'h000;
    read_port[454] = 10'h000;
    read_port[455] = 10'h000;
    read_port[456] = 10'h000;
    read_port[457] = 10'h000;
    read_port[458] = 10'h000;
    read_port[459] = 10'h000;
    read_port[460] = 10'h000;
    read_port[461] = 10'h000;
    read_port[462] = 10'h000;
    read_port[463] = 10'h000;
    read_port[464] = 10'h000;
    read_port[465] = 10'h000;
    read_port[466] = 10'h000;
    read_port[467] = 10'h000;
    read_port[468] = 10'h000;
    read_port[469] = 10'h000;
    read_port[470] = 10'h000;
    read_port[471] = 10'h000;
    read_port[472] = 10'h000;
    read_port[473] = 10'h000;
    read_port[474] = 10'h000;
    read_port[475] = 10'h000;
    read_port[476] = 10'h000;
    read_port[477] = 10'h000;
    read_port[478] = 10'h000;
    read_port[479] = 10'h000;
    read_port[480] = 10'h000;
    read_port[481] = 10'h000;
    read_port[482] = 10'h000;
    read_port[483] = 10'h000;
    read_port[484] = 10'h000;
    read_port[485] = 10'h000;
    read_port[486] = 10'h000;
    read_port[487] = 10'h000;
    read_port[488] = 10'h000;
    read_port[489] = 10'h000;
    read_port[490] = 10'h000;
    read_port[491] = 10'h000;
    read_port[492] = 10'h000;
    read_port[493] = 10'h000;
    read_port[494] = 10'h000;
    read_port[495] = 10'h000;
    read_port[496] = 10'h000;
    read_port[497] = 10'h000;
    read_port[498] = 10'h000;
    read_port[499] = 10'h000;
    read_port[500] = 10'h000;
    read_port[501] = 10'h000;
    read_port[502] = 10'h000;
    read_port[503] = 10'h000;
    read_port[504] = 10'h000;
    read_port[505] = 10'h000;
    read_port[506] = 10'h000;
    read_port[507] = 10'h000;
    read_port[508] = 10'h000;
    read_port[509] = 10'h000;
    read_port[510] = 10'h000;
    read_port[511] = 10'h000;
    read_port[512] = 10'h000;
    read_port[513] = 10'h000;
    read_port[514] = 10'h000;
    read_port[515] = 10'h000;
    read_port[516] = 10'h000;
    read_port[517] = 10'h000;
    read_port[518] = 10'h000;
    read_port[519] = 10'h000;
    read_port[520] = 10'h000;
    read_port[521] = 10'h000;
    read_port[522] = 10'h000;
    read_port[523] = 10'h000;
    read_port[524] = 10'h000;
    read_port[525] = 10'h000;
    read_port[526] = 10'h000;
    read_port[527] = 10'h000;
    read_port[528] = 10'h000;
    read_port[529] = 10'h000;
    read_port[530] = 10'h000;
    read_port[531] = 10'h000;
    read_port[532] = 10'h000;
    read_port[533] = 10'h000;
    read_port[534] = 10'h000;
    read_port[535] = 10'h000;
    read_port[536] = 10'h000;
    read_port[537] = 10'h000;
    read_port[538] = 10'h000;
    read_port[539] = 10'h000;
    read_port[540] = 10'h000;
    read_port[541] = 10'h000;
    read_port[542] = 10'h000;
    read_port[543] = 10'h000;
    read_port[544] = 10'h000;
    read_port[545] = 10'h000;
    read_port[546] = 10'h000;
    read_port[547] = 10'h000;
    read_port[548] = 10'h000;
    read_port[549] = 10'h000;
    read_port[550] = 10'h000;
    read_port[551] = 10'h000;
    read_port[552] = 10'h000;
    read_port[553] = 10'h000;
    read_port[554] = 10'h000;
    read_port[555] = 10'h000;
    read_port[556] = 10'h000;
    read_port[557] = 10'h000;
    read_port[558] = 10'h000;
    read_port[559] = 10'h000;
    read_port[560] = 10'h000;
    read_port[561] = 10'h000;
    read_port[562] = 10'h000;
    read_port[563] = 10'h000;
    read_port[564] = 10'h000;
    read_port[565] = 10'h000;
    read_port[566] = 10'h000;
    read_port[567] = 10'h000;
    read_port[568] = 10'h000;
    read_port[569] = 10'h000;
    read_port[570] = 10'h000;
    read_port[571] = 10'h000;
    read_port[572] = 10'h000;
    read_port[573] = 10'h000;
    read_port[574] = 10'h000;
    read_port[575] = 10'h000;
    read_port[576] = 10'h000;
    read_port[577] = 10'h000;
    read_port[578] = 10'h000;
    read_port[579] = 10'h000;
    read_port[580] = 10'h000;
    read_port[581] = 10'h000;
    read_port[582] = 10'h000;
    read_port[583] = 10'h000;
    read_port[584] = 10'h000;
    read_port[585] = 10'h000;
    read_port[586] = 10'h000;
    read_port[587] = 10'h000;
    read_port[588] = 10'h000;
    read_port[589] = 10'h000;
    read_port[590] = 10'h000;
    read_port[591] = 10'h000;
    read_port[592] = 10'h000;
    read_port[593] = 10'h000;
    read_port[594] = 10'h000;
    read_port[595] = 10'h000;
    read_port[596] = 10'h000;
    read_port[597] = 10'h000;
    read_port[598] = 10'h000;
    read_port[599] = 10'h000;
    read_port[600] = 10'h000;
    read_port[601] = 10'h000;
    read_port[602] = 10'h000;
    read_port[603] = 10'h000;
    read_port[604] = 10'h000;
    read_port[605] = 10'h000;
    read_port[606] = 10'h000;
    read_port[607] = 10'h000;
    read_port[608] = 10'h000;
    read_port[609] = 10'h000;
    read_port[610] = 10'h000;
    read_port[611] = 10'h000;
    read_port[612] = 10'h000;
    read_port[613] = 10'h000;
    read_port[614] = 10'h000;
    read_port[615] = 10'h000;
    read_port[616] = 10'h000;
    read_port[617] = 10'h000;
    read_port[618] = 10'h000;
    read_port[619] = 10'h000;
    read_port[620] = 10'h000;
    read_port[621] = 10'h000;
    read_port[622] = 10'h000;
    read_port[623] = 10'h000;
    read_port[624] = 10'h000;
    read_port[625] = 10'h000;
    read_port[626] = 10'h000;
    read_port[627] = 10'h000;
    read_port[628] = 10'h000;
    read_port[629] = 10'h000;
    read_port[630] = 10'h000;
    read_port[631] = 10'h000;
    read_port[632] = 10'h000;
    read_port[633] = 10'h000;
    read_port[634] = 10'h000;
    read_port[635] = 10'h000;
    read_port[636] = 10'h000;
    read_port[637] = 10'h000;
    read_port[638] = 10'h000;
    read_port[639] = 10'h000;
    read_port[640] = 10'h000;
    read_port[641] = 10'h000;
    read_port[642] = 10'h000;
    read_port[643] = 10'h000;
    read_port[644] = 10'h000;
    read_port[645] = 10'h000;
    read_port[646] = 10'h000;
    read_port[647] = 10'h000;
    read_port[648] = 10'h000;
    read_port[649] = 10'h000;
    read_port[650] = 10'h000;
    read_port[651] = 10'h000;
    read_port[652] = 10'h000;
    read_port[653] = 10'h000;
    read_port[654] = 10'h000;
    read_port[655] = 10'h000;
    read_port[656] = 10'h000;
    read_port[657] = 10'h000;
    read_port[658] = 10'h000;
    read_port[659] = 10'h000;
    read_port[660] = 10'h000;
    read_port[661] = 10'h000;
    read_port[662] = 10'h000;
    read_port[663] = 10'h000;
    read_port[664] = 10'h000;
    read_port[665] = 10'h000;
    read_port[666] = 10'h000;
    read_port[667] = 10'h000;
    read_port[668] = 10'h000;
    read_port[669] = 10'h000;
    read_port[670] = 10'h000;
    read_port[671] = 10'h000;
    read_port[672] = 10'h000;
    read_port[673] = 10'h000;
    read_port[674] = 10'h000;
    read_port[675] = 10'h000;
    read_port[676] = 10'h000;
    read_port[677] = 10'h000;
    read_port[678] = 10'h000;
    read_port[679] = 10'h000;
    read_port[680] = 10'h000;
    read_port[681] = 10'h000;
    read_port[682] = 10'h000;
    read_port[683] = 10'h000;
    read_port[684] = 10'h000;
    read_port[685] = 10'h000;
    read_port[686] = 10'h000;
    read_port[687] = 10'h000;
    read_port[688] = 10'h000;
    read_port[689] = 10'h000;
    read_port[690] = 10'h000;
    read_port[691] = 10'h000;
    read_port[692] = 10'h000;
    read_port[693] = 10'h000;
    read_port[694] = 10'h000;
    read_port[695] = 10'h000;
    read_port[696] = 10'h000;
    read_port[697] = 10'h000;
    read_port[698] = 10'h000;
    read_port[699] = 10'h000;
    read_port[700] = 10'h000;
    read_port[701] = 10'h000;
    read_port[702] = 10'h000;
    read_port[703] = 10'h000;
    read_port[704] = 10'h000;
    read_port[705] = 10'h000;
    read_port[706] = 10'h000;
    read_port[707] = 10'h000;
    read_port[708] = 10'h000;
    read_port[709] = 10'h000;
    read_port[710] = 10'h000;
    read_port[711] = 10'h000;
    read_port[712] = 10'h000;
    read_port[713] = 10'h000;
    read_port[714] = 10'h000;
    read_port[715] = 10'h000;
    read_port[716] = 10'h000;
    read_port[717] = 10'h000;
    read_port[718] = 10'h000;
    read_port[719] = 10'h000;
    read_port[720] = 10'h000;
    read_port[721] = 10'h000;
    read_port[722] = 10'h000;
    read_port[723] = 10'h000;
    read_port[724] = 10'h000;
    read_port[725] = 10'h000;
    read_port[726] = 10'h000;
    read_port[727] = 10'h000;
    read_port[728] = 10'h000;
    read_port[729] = 10'h000;
    read_port[730] = 10'h000;
    read_port[731] = 10'h000;
    read_port[732] = 10'h000;
    read_port[733] = 10'h000;
    read_port[734] = 10'h000;
    read_port[735] = 10'h000;
    read_port[736] = 10'h000;
    read_port[737] = 10'h000;
    read_port[738] = 10'h000;
    read_port[739] = 10'h000;
    read_port[740] = 10'h000;
    read_port[741] = 10'h000;
    read_port[742] = 10'h000;
    read_port[743] = 10'h000;
    read_port[744] = 10'h000;
    read_port[745] = 10'h000;
    read_port[746] = 10'h000;
    read_port[747] = 10'h000;
    read_port[748] = 10'h000;
    read_port[749] = 10'h000;
    read_port[750] = 10'h000;
    read_port[751] = 10'h000;
    read_port[752] = 10'h000;
    read_port[753] = 10'h000;
    read_port[754] = 10'h000;
    read_port[755] = 10'h000;
    read_port[756] = 10'h000;
    read_port[757] = 10'h000;
    read_port[758] = 10'h000;
    read_port[759] = 10'h000;
    read_port[760] = 10'h000;
    read_port[761] = 10'h000;
    read_port[762] = 10'h000;
    read_port[763] = 10'h000;
    read_port[764] = 10'h000;
    read_port[765] = 10'h000;
    read_port[766] = 10'h000;
    read_port[767] = 10'h000;
    read_port[768] = 10'h000;
    read_port[769] = 10'h000;
    read_port[770] = 10'h000;
    read_port[771] = 10'h000;
    read_port[772] = 10'h000;
    read_port[773] = 10'h000;
    read_port[774] = 10'h000;
    read_port[775] = 10'h000;
    read_port[776] = 10'h000;
    read_port[777] = 10'h000;
    read_port[778] = 10'h000;
    read_port[779] = 10'h000;
    read_port[780] = 10'h000;
    read_port[781] = 10'h000;
    read_port[782] = 10'h000;
    read_port[783] = 10'h000;
    read_port[784] = 10'h000;
    read_port[785] = 10'h000;
    read_port[786] = 10'h000;
    read_port[787] = 10'h000;
    read_port[788] = 10'h000;
    read_port[789] = 10'h000;
    read_port[790] = 10'h000;
    read_port[791] = 10'h000;
    read_port[792] = 10'h000;
    read_port[793] = 10'h000;
    read_port[794] = 10'h000;
    read_port[795] = 10'h000;
    read_port[796] = 10'h000;
    read_port[797] = 10'h000;
    read_port[798] = 10'h000;
    read_port[799] = 10'h000;
    read_port[800] = 10'h000;
    read_port[801] = 10'h000;
    read_port[802] = 10'h000;
    read_port[803] = 10'h000;
    read_port[804] = 10'h000;
    read_port[805] = 10'h000;
    read_port[806] = 10'h000;
    read_port[807] = 10'h000;
    read_port[808] = 10'h000;
    read_port[809] = 10'h000;
    read_port[810] = 10'h000;
    read_port[811] = 10'h000;
    read_port[812] = 10'h000;
    read_port[813] = 10'h000;
    read_port[814] = 10'h000;
    read_port[815] = 10'h000;
    read_port[816] = 10'h000;
    read_port[817] = 10'h000;
    read_port[818] = 10'h000;
    read_port[819] = 10'h000;
    read_port[820] = 10'h000;
    read_port[821] = 10'h000;
    read_port[822] = 10'h000;
    read_port[823] = 10'h000;
    read_port[824] = 10'h000;
    read_port[825] = 10'h000;
    read_port[826] = 10'h000;
    read_port[827] = 10'h000;
    read_port[828] = 10'h000;
    read_port[829] = 10'h000;
    read_port[830] = 10'h000;
    read_port[831] = 10'h000;
    read_port[832] = 10'h000;
    read_port[833] = 10'h000;
    read_port[834] = 10'h000;
    read_port[835] = 10'h000;
    read_port[836] = 10'h000;
    read_port[837] = 10'h000;
    read_port[838] = 10'h000;
    read_port[839] = 10'h000;
    read_port[840] = 10'h000;
    read_port[841] = 10'h000;
    read_port[842] = 10'h000;
    read_port[843] = 10'h000;
    read_port[844] = 10'h000;
    read_port[845] = 10'h000;
    read_port[846] = 10'h000;
    read_port[847] = 10'h000;
    read_port[848] = 10'h000;
    read_port[849] = 10'h000;
    read_port[850] = 10'h000;
    read_port[851] = 10'h000;
    read_port[852] = 10'h000;
    read_port[853] = 10'h000;
    read_port[854] = 10'h000;
    read_port[855] = 10'h000;
    read_port[856] = 10'h000;
    read_port[857] = 10'h000;
    read_port[858] = 10'h000;
    read_port[859] = 10'h000;
    read_port[860] = 10'h000;
    read_port[861] = 10'h000;
    read_port[862] = 10'h000;
    read_port[863] = 10'h000;
    read_port[864] = 10'h000;
    read_port[865] = 10'h000;
    read_port[866] = 10'h000;
    read_port[867] = 10'h000;
    read_port[868] = 10'h000;
    read_port[869] = 10'h000;
    read_port[870] = 10'h000;
    read_port[871] = 10'h000;
    read_port[872] = 10'h000;
    read_port[873] = 10'h000;
    read_port[874] = 10'h000;
    read_port[875] = 10'h000;
    read_port[876] = 10'h000;
    read_port[877] = 10'h000;
    read_port[878] = 10'h000;
    read_port[879] = 10'h000;
    read_port[880] = 10'h000;
    read_port[881] = 10'h000;
    read_port[882] = 10'h000;
    read_port[883] = 10'h000;
    read_port[884] = 10'h000;
    read_port[885] = 10'h000;
    read_port[886] = 10'h000;
    read_port[887] = 10'h000;
    read_port[888] = 10'h000;
    read_port[889] = 10'h000;
    read_port[890] = 10'h000;
    read_port[891] = 10'h000;
    read_port[892] = 10'h000;
    read_port[893] = 10'h000;
    read_port[894] = 10'h000;
    read_port[895] = 10'h000;
    read_port[896] = 10'h000;
    read_port[897] = 10'h000;
    read_port[898] = 10'h000;
    read_port[899] = 10'h000;
    read_port[900] = 10'h000;
    read_port[901] = 10'h000;
    read_port[902] = 10'h000;
    read_port[903] = 10'h000;
    read_port[904] = 10'h000;
    read_port[905] = 10'h000;
    read_port[906] = 10'h000;
    read_port[907] = 10'h000;
    read_port[908] = 10'h000;
    read_port[909] = 10'h000;
    read_port[910] = 10'h000;
    read_port[911] = 10'h000;
    read_port[912] = 10'h000;
    read_port[913] = 10'h000;
    read_port[914] = 10'h000;
    read_port[915] = 10'h000;
    read_port[916] = 10'h000;
    read_port[917] = 10'h000;
    read_port[918] = 10'h000;
    read_port[919] = 10'h000;
    read_port[920] = 10'h000;
    read_port[921] = 10'h000;
    read_port[922] = 10'h000;
    read_port[923] = 10'h000;
    read_port[924] = 10'h000;
    read_port[925] = 10'h000;
    read_port[926] = 10'h000;
    read_port[927] = 10'h000;
    read_port[928] = 10'h000;
    read_port[929] = 10'h000;
    read_port[930] = 10'h000;
    read_port[931] = 10'h000;
    read_port[932] = 10'h000;
    read_port[933] = 10'h000;
    read_port[934] = 10'h000;
    read_port[935] = 10'h000;
    read_port[936] = 10'h000;
    read_port[937] = 10'h000;
    read_port[938] = 10'h000;
    read_port[939] = 10'h000;
    read_port[940] = 10'h000;
    read_port[941] = 10'h000;
    read_port[942] = 10'h000;
    read_port[943] = 10'h000;
    read_port[944] = 10'h000;
    read_port[945] = 10'h000;
    read_port[946] = 10'h000;
    read_port[947] = 10'h000;
    read_port[948] = 10'h000;
    read_port[949] = 10'h000;
    read_port[950] = 10'h000;
    read_port[951] = 10'h000;
    read_port[952] = 10'h000;
    read_port[953] = 10'h000;
    read_port[954] = 10'h000;
    read_port[955] = 10'h000;
    read_port[956] = 10'h000;
    read_port[957] = 10'h000;
    read_port[958] = 10'h000;
    read_port[959] = 10'h000;
    read_port[960] = 10'h000;
    read_port[961] = 10'h000;
    read_port[962] = 10'h000;
    read_port[963] = 10'h000;
    read_port[964] = 10'h000;
    read_port[965] = 10'h000;
    read_port[966] = 10'h000;
    read_port[967] = 10'h000;
    read_port[968] = 10'h000;
    read_port[969] = 10'h000;
    read_port[970] = 10'h000;
    read_port[971] = 10'h000;
    read_port[972] = 10'h000;
    read_port[973] = 10'h000;
    read_port[974] = 10'h000;
    read_port[975] = 10'h000;
    read_port[976] = 10'h000;
    read_port[977] = 10'h000;
    read_port[978] = 10'h000;
    read_port[979] = 10'h000;
    read_port[980] = 10'h000;
    read_port[981] = 10'h000;
    read_port[982] = 10'h000;
    read_port[983] = 10'h000;
    read_port[984] = 10'h000;
    read_port[985] = 10'h000;
    read_port[986] = 10'h000;
    read_port[987] = 10'h000;
    read_port[988] = 10'h000;
    read_port[989] = 10'h000;
    read_port[990] = 10'h000;
    read_port[991] = 10'h000;
    read_port[992] = 10'h000;
    read_port[993] = 10'h000;
    read_port[994] = 10'h000;
    read_port[995] = 10'h000;
    read_port[996] = 10'h000;
    read_port[997] = 10'h000;
    read_port[998] = 10'h000;
    read_port[999] = 10'h000;
    read_port[1000] = 10'h000;
    read_port[1001] = 10'h000;
    read_port[1002] = 10'h000;
    read_port[1003] = 10'h000;
    read_port[1004] = 10'h000;
    read_port[1005] = 10'h000;
    read_port[1006] = 10'h000;
    read_port[1007] = 10'h000;
    read_port[1008] = 10'h000;
    read_port[1009] = 10'h000;
    read_port[1010] = 10'h000;
    read_port[1011] = 10'h000;
    read_port[1012] = 10'h000;
    read_port[1013] = 10'h000;
    read_port[1014] = 10'h000;
    read_port[1015] = 10'h000;
    read_port[1016] = 10'h000;
    read_port[1017] = 10'h000;
    read_port[1018] = 10'h000;
    read_port[1019] = 10'h000;
    read_port[1020] = 10'h000;
    read_port[1021] = 10'h000;
    read_port[1022] = 10'h000;
    read_port[1023] = 10'h000;
  end
  always @(posedge usb_clk) begin
    if (rx_fifo_w_en)
      read_port[rx_fifo_w_addr] <= rx_fifo_w_data;
  end
  reg [9:0] _0_;
  always @(posedge usb_clk) begin
    _0_ <= rx_fifo_r_addr;
  end
  assign read_data = read_port[_0_];
  assign \$1  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:120" *) full;
  assign rx_fifo_w_en = write_en & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:120" *) \$1 ;
  assign \$2  = rx_fifo_w_addr == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:137" *) 10'h3ff;
  assign \$3  = rx_fifo_w_addr + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:140" *) 1'h1;
  assign \$4  = current_read_pointer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:169" *) 10'h3ff;
  assign \$5  = current_read_pointer + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:172" *) 1'h1;
  assign \$6  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:178" *) empty;
  assign \$7  = read_en & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:178" *) \$6 ;
  assign empty = current_read_pointer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:203" *) committed_write_pointer;
  assign \$8  = committed_read_pointer <= (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:210" *) rx_fifo_w_addr;
  assign \$9  = rx_fifo_w_addr - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:211" *) committed_read_pointer;
  assign \$10  = $signed(11'h3ff) - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:211" *) $signed(\$9 );
  assign \$11  = committed_read_pointer - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:213" *) rx_fifo_w_addr;
  assign \$12  = $signed(\$11 ) - (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:213" *) $signed(2'h1);
  assign full = next_write_pointer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:216" *) committed_read_pointer;
  assign \$13  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:144" *) full;
  assign \$14  = write_en & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:144" *) \$13 ;
  assign \$15  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:185" *) empty;
  assign \$16  = read_en & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:185" *) \$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:130" *)
  always @(posedge usb_clk)
    rx_fifo_w_addr <= \$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:129" *)
  always @(posedge usb_clk)
    committed_write_pointer <= \$18 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:163" *)
  always @(posedge usb_clk)
    current_read_pointer <= \$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\memory.py:162" *)
  always @(posedge usb_clk)
    committed_read_pointer <= \$20 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$14 ) begin end
    (* full_case = 32'd1 *)
    if (\$2 ) begin
      next_write_pointer = 10'h000;
    end else begin
      next_write_pointer = \$3 [9:0];
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$14 ) begin end
    (* full_case = 32'd1 *)
    if (\$4 ) begin
      next_read_pointer = 10'h000;
    end else begin
      next_read_pointer = \$5 [9:0];
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$14 ) begin end
    (* full_case = 32'd1 *)
    if (\$7 ) begin
      rx_fifo_r_addr = next_read_pointer;
    end else begin
      rx_fifo_r_addr = current_read_pointer;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$14 ) begin end
    (* full_case = 32'd1 *)
    if (full) begin
      space_available = 10'h000;
    end else if (\$8 ) begin
      space_available = \$10 [9:0];
    end else begin
      space_available = \$12 [9:0];
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$14 ) begin end
    \$17  = rx_fifo_w_addr;
    if (\$14 ) begin
      \$17  = next_write_pointer;
    end
    if (write_discard) begin
      \$17  = committed_write_pointer;
    end
    if (usb_rst) begin
      \$17  = 10'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$14 ) begin end
    \$18  = committed_write_pointer;
    if (write_commit) begin
      \$18  = rx_fifo_w_addr;
    end
    if (usb_rst) begin
      \$18  = 10'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$14 ) begin end
    \$19  = current_read_pointer;
    if (\$16 ) begin
      \$19  = next_read_pointer;
    end
    if (usb_rst) begin
      \$19  = 10'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$14 ) begin end
    \$20  = current_read_pointer;
    if (usb_rst) begin
      \$20  = 10'h000;
    end
  end
  assign rx_fifo_r_data = read_data;
  assign write_data = rx_fifo_w_data;
  assign current_write_pointer = rx_fifo_w_addr;
  assign read_commit = 1'h1;
  assign read_discard = 1'h0;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:611" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.data_crc (usb_rst, tx_valid, output_crc, \start$4 , rx_data, rx_valid, start, \start$3 , tx_data, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$15  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$100 ;
  wire \$101 ;
  wire \$102 ;
  wire \$103 ;
  wire \$104 ;
  wire \$105 ;
  wire \$106 ;
  wire \$107 ;
  wire \$108 ;
  wire \$109 ;
  wire \$11 ;
  wire \$110 ;
  wire \$111 ;
  wire \$112 ;
  wire \$113 ;
  wire \$114 ;
  wire \$115 ;
  wire \$116 ;
  wire \$117 ;
  wire \$118 ;
  wire \$119 ;
  wire \$12 ;
  wire \$120 ;
  wire \$121 ;
  wire \$122 ;
  wire \$123 ;
  wire \$124 ;
  wire \$125 ;
  wire \$126 ;
  wire \$127 ;
  wire \$128 ;
  wire \$129 ;
  wire \$13 ;
  wire \$130 ;
  wire \$131 ;
  wire \$132 ;
  wire \$133 ;
  wire \$134 ;
  wire \$135 ;
  wire \$136 ;
  wire \$137 ;
  wire \$138 ;
  reg [15:0] \$139 ;
  wire \$14 ;
  wire \$15 ;
  wire \$16 ;
  wire \$17 ;
  wire \$18 ;
  wire \$19 ;
  wire \$2 ;
  wire \$20 ;
  wire \$21 ;
  wire \$22 ;
  wire \$23 ;
  wire \$24 ;
  wire \$25 ;
  wire \$26 ;
  wire \$27 ;
  wire \$28 ;
  wire \$29 ;
  wire \$3 ;
  wire \$30 ;
  wire \$31 ;
  wire \$32 ;
  wire \$33 ;
  wire \$34 ;
  wire \$35 ;
  wire \$36 ;
  wire \$37 ;
  wire \$38 ;
  wire \$39 ;
  wire \$4 ;
  wire \$40 ;
  wire \$41 ;
  wire \$42 ;
  wire \$43 ;
  wire \$44 ;
  wire \$45 ;
  wire \$46 ;
  wire \$47 ;
  wire \$48 ;
  wire \$49 ;
  wire \$5 ;
  wire \$50 ;
  wire \$51 ;
  wire \$52 ;
  wire \$53 ;
  wire \$54 ;
  wire \$55 ;
  wire \$56 ;
  wire \$57 ;
  wire \$58 ;
  wire \$59 ;
  wire \$6 ;
  wire \$60 ;
  wire \$61 ;
  wire \$62 ;
  wire \$63 ;
  wire \$64 ;
  wire \$65 ;
  wire \$66 ;
  wire \$67 ;
  wire \$68 ;
  wire \$69 ;
  wire \$7 ;
  wire \$70 ;
  wire \$71 ;
  wire \$72 ;
  wire \$73 ;
  wire \$74 ;
  wire \$75 ;
  wire \$76 ;
  wire \$77 ;
  wire \$78 ;
  wire \$79 ;
  wire \$8 ;
  wire \$80 ;
  wire \$81 ;
  wire \$82 ;
  wire \$83 ;
  wire \$84 ;
  wire \$85 ;
  wire \$86 ;
  wire \$87 ;
  wire \$88 ;
  wire \$89 ;
  wire \$9 ;
  wire \$90 ;
  wire \$91 ;
  wire \$92 ;
  wire \$93 ;
  wire \$94 ;
  wire \$95 ;
  wire \$96 ;
  wire \$97 ;
  wire \$98 ;
  wire \$99 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:614" *)
  reg [15:0] crc = 16'hffff;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  output [15:0] output_crc;
  wire [15:0] output_crc;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:558" *)
  input [7:0] rx_data;
  wire [7:0] rx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:559" *)
  input rx_valid;
  wire rx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input start;
  wire start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input \start$3 ;
  wire \start$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input \start$4 ;
  wire \start$4 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:561" *)
  input [7:0] tx_data;
  wire [7:0] tx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:562" *)
  input tx_valid;
  wire tx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  assign \$1  = start | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:621" *) \start$3 ;
  assign \$2  = \$1  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:621" *) \start$4 ;
  assign \$3  = rx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[1];
  assign \$4  = \$3  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[2];
  assign \$5  = \$4  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[3];
  assign \$6  = \$5  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[4];
  assign \$7  = \$6  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[5];
  assign \$8  = \$7  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[6];
  assign \$9  = \$8  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[7];
  assign \$10  = crc[8] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[9];
  assign \$11  = \$10  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[10];
  assign \$12  = \$11  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[11];
  assign \$13  = \$12  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[12];
  assign \$14  = \$13  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[13];
  assign \$15  = \$14  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[14];
  assign \$16  = \$15  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[15];
  assign \$17  = \$9  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:590" *) \$16 ;
  assign \$18  = rx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[1];
  assign \$19  = \$18  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[2];
  assign \$20  = \$19  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[3];
  assign \$21  = \$20  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[4];
  assign \$22  = \$21  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[5];
  assign \$23  = \$22  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[6];
  assign \$24  = crc[9] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[10];
  assign \$25  = \$24  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[11];
  assign \$26  = \$25  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[12];
  assign \$27  = \$26  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[13];
  assign \$28  = \$27  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[14];
  assign \$29  = \$28  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[15];
  assign \$30  = \$23  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:591" *) \$29 ;
  assign \$31  = rx_data[6] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[7];
  assign \$32  = crc[8] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[9];
  assign \$33  = \$31  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:592" *) \$32 ;
  assign \$34  = rx_data[5] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[6];
  assign \$35  = crc[9] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[10];
  assign \$36  = \$34  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:593" *) \$35 ;
  assign \$37  = rx_data[4] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[5];
  assign \$38  = crc[10] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[11];
  assign \$39  = \$37  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:594" *) \$38 ;
  assign \$40  = rx_data[3] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[4];
  assign \$41  = crc[11] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[12];
  assign \$42  = \$40  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:595" *) \$41 ;
  assign \$43  = rx_data[2] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[3];
  assign \$44  = crc[12] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[13];
  assign \$45  = \$43  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:596" *) \$44 ;
  assign \$46  = rx_data[1] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[2];
  assign \$47  = crc[13] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[14];
  assign \$48  = \$46  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:597" *) \$47 ;
  assign \$49  = rx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[1];
  assign \$50  = crc[14] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[15];
  assign \$51  = \$49  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:599" *) \$50 ;
  assign \$52  = \$51  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:599" *) crc[0];
  assign \$53  = rx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:600" *) crc[1];
  assign \$54  = \$53  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:600" *) crc[15];
  assign \$55  = rx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[1];
  assign \$56  = \$55  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[2];
  assign \$57  = \$56  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[3];
  assign \$58  = \$57  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[4];
  assign \$59  = \$58  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[5];
  assign \$60  = \$59  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[6];
  assign \$61  = \$60  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) rx_data[7];
  assign \$62  = crc[7] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[8];
  assign \$63  = \$62  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[9];
  assign \$64  = \$63  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[10];
  assign \$65  = \$64  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[11];
  assign \$66  = \$65  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[12];
  assign \$67  = \$66  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[13];
  assign \$68  = \$67  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[14];
  assign \$69  = \$68  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[15];
  assign \$70  = \$61  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:606" *) \$69 ;
  assign \$71  = tx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[1];
  assign \$72  = \$71  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[2];
  assign \$73  = \$72  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[3];
  assign \$74  = \$73  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[4];
  assign \$75  = \$74  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[5];
  assign \$76  = \$75  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[6];
  assign \$77  = \$76  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[7];
  assign \$78  = crc[8] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[9];
  assign \$79  = \$78  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[10];
  assign \$80  = \$79  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[11];
  assign \$81  = \$80  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[12];
  assign \$82  = \$81  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[13];
  assign \$83  = \$82  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[14];
  assign \$84  = \$83  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[15];
  assign \$85  = \$77  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:590" *) \$84 ;
  assign \$86  = tx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[1];
  assign \$87  = \$86  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[2];
  assign \$88  = \$87  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[3];
  assign \$89  = \$88  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[4];
  assign \$90  = \$89  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[5];
  assign \$91  = \$90  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[6];
  assign \$92  = crc[9] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[10];
  assign \$93  = \$92  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[11];
  assign \$94  = \$93  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[12];
  assign \$95  = \$94  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[13];
  assign \$96  = \$95  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[14];
  assign \$97  = \$96  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[15];
  assign \$98  = \$91  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:591" *) \$97 ;
  assign \$99  = tx_data[6] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[7];
  assign \$100  = crc[8] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[9];
  assign \$101  = \$99  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:592" *) \$100 ;
  assign \$102  = tx_data[5] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[6];
  assign \$103  = crc[9] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[10];
  assign \$104  = \$102  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:593" *) \$103 ;
  assign \$105  = tx_data[4] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[5];
  assign \$106  = crc[10] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[11];
  assign \$107  = \$105  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:594" *) \$106 ;
  assign \$108  = tx_data[3] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[4];
  assign \$109  = crc[11] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[12];
  assign \$110  = \$108  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:595" *) \$109 ;
  assign \$111  = tx_data[2] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[3];
  assign \$112  = crc[12] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[13];
  assign \$113  = \$111  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:596" *) \$112 ;
  assign \$114  = tx_data[1] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[2];
  assign \$115  = crc[13] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[14];
  assign \$116  = \$114  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:597" *) \$115 ;
  assign \$117  = tx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[1];
  assign \$118  = crc[14] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[15];
  assign \$119  = \$117  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:599" *) \$118 ;
  assign \$120  = \$119  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:599" *) crc[0];
  assign \$121  = tx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:600" *) crc[1];
  assign \$122  = \$121  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:600" *) crc[15];
  assign \$123  = tx_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[1];
  assign \$124  = \$123  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[2];
  assign \$125  = \$124  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[3];
  assign \$126  = \$125  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[4];
  assign \$127  = \$126  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[5];
  assign \$128  = \$127  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[6];
  assign \$129  = \$128  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) tx_data[7];
  assign \$130  = crc[7] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[8];
  assign \$131  = \$130  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[9];
  assign \$132  = \$131  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[10];
  assign \$133  = \$132  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[11];
  assign \$134  = \$133  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[12];
  assign \$135  = \$134  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[13];
  assign \$136  = \$135  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[14];
  assign \$137  = \$136  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:586" *) crc[15];
  assign \$138  = \$129  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:606" *) \$137 ;
  assign output_crc = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:635" *) { crc[0], crc[1], crc[2], crc[3], crc[4], crc[5], crc[6], crc[7], crc[8], crc[9], crc[10], crc[11], crc[12], crc[13], crc[14], crc[15] };
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:614" *)
  always @(posedge usb_clk)
    crc <= \$139 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$15 ) begin end
    \$139  = crc;
    if (\$2 ) begin
      \$139  = 16'hffff;
    end else if (rx_valid) begin
      \$139  = { \$70 , crc[6:2], \$54 , \$52 , \$48 , \$45 , \$42 , \$39 , \$36 , \$33 , \$30 , \$17  };
    end else if (tx_valid) begin
      \$139  = { \$138 , crc[6:2], \$122 , \$120 , \$116 , \$113 , \$110 , \$107 , \$104 , \$101 , \$98 , \$85  };
    end
    if (usb_rst) begin
      \$139  = 16'hffff;
    end
  end
  assign \crc$11  = output_crc;
  assign \crc$12  = output_crc;
  assign \crc$13  = output_crc;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:197" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.endpoint_mux (usb_rst, is_in, is_out, is_setup, is_ping, crc, \ack$142 , \nak$146 , \stall$150 , start, \start$158 , \valid$132 , first, last, \ack$144 , \nak$148 , \payload$178 , active_address, active_config, speed, new_frame
, new_token, frame, pid, address, endpoint, ready_for_response, ready, rx_complete, rx_invalid, \port$1710$3 , next, valid, payload, rx_ready_for_response, ack, nak, stall, nyet, tx_allowed, tx_timeout, rx_timeout
, \address_changed$119 , new_address, \config_changed$127 , new_config, tx_pid_toggle, \payload$138 , \ack$143 , \start$159 , \start$155 , \valid$162 , \first$172 , \last$173 , \payload$174 , \port$1865$0 , \nak$147 , \stall$151 , address_changed, \new_address$121 , config_changed, \new_config$129 , \tx_pid_toggle$169 
, \first$176 , \nak$149 , \valid$165 , \last$177 , usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$16  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  reg [2:0] \$14 ;
  wire \$2 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input ack;
  wire ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output \ack$142 ;
  wire \ack$142 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \ack$143 ;
  wire \ack$143 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \ack$144 ;
  wire \ack$144 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$145 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$62 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \ack$91 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:85" *)
  input [6:0] active_address;
  wire [6:0] active_address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:85" *)
  wire [6:0] \active_address$115 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:85" *)
  wire [6:0] \active_address$57 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:85" *)
  wire [6:0] \active_address$86 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:89" *)
  input [7:0] active_config;
  wire [7:0] active_config;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:89" *)
  wire [7:0] \active_config$114 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:89" *)
  wire [7:0] \active_config$55 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:89" *)
  wire [7:0] \active_config$85 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [6:0] address;
  wire [6:0] address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$67 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [6:0] \address$96 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:86" *)
  input address_changed;
  wire address_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:86" *)
  wire \address_changed$117 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:86" *)
  wire \address_changed$118 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:86" *)
  output \address_changed$119 ;
  reg \address_changed$119 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:90" *)
  input config_changed;
  wire config_changed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:90" *)
  wire \config_changed$125 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:90" *)
  wire \config_changed$126 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:90" *)
  output \config_changed$127 ;
  reg \config_changed$127 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input [15:0] crc;
  wire [15:0] crc;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$1 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$58 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire [15:0] \crc$87 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] endpoint;
  wire [3:0] endpoint;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$68 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \endpoint$97 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output first;
  wire first;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$135 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \first$172 ;
  wire \first$172 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \first$176 ;
  wire \first$176 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [10:0] frame;
  wire [10:0] frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$100 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$27 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [10:0] \frame$71 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_in;
  wire is_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$102 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$31 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_in$73 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_out;
  wire is_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$103 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$33 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_out$74 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_ping;
  wire is_ping;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$105 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$37 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_ping$76 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input is_setup;
  wire is_setup;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$104 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$35 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \is_setup$75 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output last;
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$137 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \last$173 ;
  wire \last$173 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \last$177 ;
  wire \last$177 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input nak;
  wire nak;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output \nak$146 ;
  wire \nak$146 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \nak$147 ;
  wire \nak$147 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \nak$148 ;
  wire \nak$148 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \nak$149 ;
  wire \nak$149 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$63 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nak$92 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:87" *)
  output [6:0] new_address;
  reg [6:0] new_address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:87" *)
  input [6:0] \new_address$121 ;
  wire [6:0] \new_address$121 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:87" *)
  wire [6:0] \new_address$122 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:87" *)
  wire [6:0] \new_address$123 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:91" *)
  output [7:0] new_config;
  reg [7:0] new_config;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:91" *)
  input [7:0] \new_config$129 ;
  wire [7:0] \new_config$129 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:91" *)
  wire [7:0] \new_config$130 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:91" *)
  wire [7:0] \new_config$131 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_frame;
  wire new_frame;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$101 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$29 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_frame$72 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input new_token;
  wire new_token;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$23 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$69 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \new_token$98 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input next;
  wire next;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$107 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$41 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \next$78 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input nyet;
  wire nyet;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$65 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \nyet$94 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:266" *)
  reg [2:0] past_valid = 3'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input [7:0] payload;
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$108 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output [7:0] \payload$138 ;
  wire [7:0] \payload$138 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$139 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input [7:0] \payload$174 ;
  wire [7:0] \payload$174 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input [7:0] \payload$178 ;
  wire [7:0] \payload$178 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$43 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire [7:0] \payload$79 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input [3:0] pid;
  wire [3:0] pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$66 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire [3:0] \pid$95 ;
  input \port$1710$3 ;
  wire \port$1710$3 ;
  input \port$1865$0 ;
  wire \port$1865$0 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$141 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$175 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$179 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  input ready_for_response;
  wire ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$25 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$70 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  wire \ready_for_response$99 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:94" *)
  input rx_complete;
  wire rx_complete;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:94" *)
  wire \rx_complete$109 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:94" *)
  wire \rx_complete$45 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:94" *)
  wire \rx_complete$80 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  input rx_invalid;
  wire rx_invalid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  wire \rx_invalid$111 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  wire \rx_invalid$49 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:96" *)
  wire \rx_invalid$82 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:97" *)
  wire [1:0] rx_pid_toggle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:97" *)
  wire [1:0] \rx_pid_toggle$112 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:97" *)
  wire [1:0] \rx_pid_toggle$51 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:97" *)
  wire [1:0] \rx_pid_toggle$83 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:95" *)
  input rx_ready_for_response;
  wire rx_ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:95" *)
  wire \rx_ready_for_response$110 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:95" *)
  wire \rx_ready_for_response$47 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:95" *)
  wire \rx_ready_for_response$81 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input rx_timeout;
  wire rx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \rx_timeout$61 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \rx_timeout$7 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \rx_timeout$90 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:83" *)
  input [1:0] speed;
  wire [1:0] speed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:83" *)
  wire [1:0] \speed$113 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:83" *)
  wire [1:0] \speed$53 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:83" *)
  wire [1:0] \speed$84 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input stall;
  wire stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output \stall$150 ;
  wire \stall$150 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  input \stall$151 ;
  wire \stall$151 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$152 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$153 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$64 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  wire \stall$93 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  output start;
  wire start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input \start$155 ;
  wire \start$155 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire \start$156 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  wire \start$157 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  output \start$158 ;
  wire \start$158 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input \start$159 ;
  wire \start$159 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \start$160 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \start$161 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input tx_allowed;
  wire tx_allowed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_allowed$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_allowed$59 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_allowed$88 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:100" *)
  output [1:0] tx_pid_toggle;
  reg [1:0] tx_pid_toggle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:100" *)
  wire [1:0] \tx_pid_toggle$167 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:100" *)
  wire [1:0] \tx_pid_toggle$168 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:100" *)
  input [1:0] \tx_pid_toggle$169 ;
  wire [1:0] \tx_pid_toggle$169 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input tx_timeout;
  wire tx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_timeout$5 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_timeout$60 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_timeout$89 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  input valid;
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$106 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \valid$132 ;
  wire \valid$132 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$133 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \valid$162 ;
  wire \valid$162 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$164 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \valid$165 ;
  wire \valid$165 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$39 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  wire \valid$77 ;
  assign \$2  = \$1  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:190" *) \ack$144 ;
  assign \$4  = \$3  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:190" *) \nak$148 ;
  assign \nak$146  = \$4  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:190" *) \nak$149 ;
  assign \$11  = \valid$162  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:269" *) past_valid[0];
  assign \$13  = \valid$165  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:269" *) past_valid[2];
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:266" *)
  always @(posedge usb_clk)
    past_valid <= \$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\endpoint.py:242" *)
  \USBStreamOutDeviceExample.usb.endpoint_mux.tx_mux  tx_mux (
    .first(first),
    .\first$11 (\first$172 ),
    .\first$13 (\first$176 ),
    .last(last),
    .\last$15 (\last$173 ),
    .\last$17 (\last$177 ),
    .payload(\payload$138 ),
    .\payload$6 (\payload$174 ),
    .\payload$8 (\payload$178 ),
    .ready(ready),
    .valid(\valid$162 ),
    .\valid$3 (\valid$165 ),
    .\valid$9 (\valid$132 )
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$16 ) begin end
    \address_changed$119  = 1'h0;
    if (address_changed) begin
      \address_changed$119  = address_changed;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$16 ) begin end
    new_address = 7'h00;
    if (address_changed) begin
      new_address = \new_address$121 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$16 ) begin end
    \config_changed$127  = 1'h0;
    if (config_changed) begin
      \config_changed$127  = config_changed;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$16 ) begin end
    new_config = 8'h00;
    if (config_changed) begin
      new_config = \new_config$129 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$16 ) begin end
    tx_pid_toggle = 2'h0;
    if (\$11 ) begin
      tx_pid_toggle = { 1'h0, \port$1865$0  };
    end else if (\$12 ) begin
      tx_pid_toggle = 2'h0;
    end else if (\$13 ) begin
      tx_pid_toggle = \tx_pid_toggle$169 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$16 ) begin end
    \$14  = { \valid$165 , 1'h0, \valid$162  };
    if (usb_rst) begin
      \$14  = 3'h0;
    end
  end
  assign \crc$1  = crc;
  assign \tx_allowed$3  = tx_allowed;
  assign \tx_timeout$5  = tx_timeout;
  assign \rx_timeout$7  = rx_timeout;
  assign \ack$9  = ack;
  assign \nak$11  = nak;
  assign \stall$13  = stall;
  assign \nyet$15  = nyet;
  assign \pid$17  = pid;
  assign \address$19  = address;
  assign \endpoint$21  = endpoint;
  assign \new_token$23  = new_token;
  assign \ready_for_response$25  = ready_for_response;
  assign \frame$27  = frame;
  assign \new_frame$29  = new_frame;
  assign \is_in$31  = is_in;
  assign \is_out$33  = is_out;
  assign \is_setup$35  = is_setup;
  assign \is_ping$37  = is_ping;
  assign \valid$39  = valid;
  assign \next$41  = next;
  assign \payload$43  = payload;
  assign \rx_complete$45  = rx_complete;
  assign \rx_ready_for_response$47  = rx_ready_for_response;
  assign \rx_invalid$49  = rx_invalid;
  assign rx_pid_toggle = { 1'h0, \port$1710$3  };
  assign \rx_pid_toggle$51  = { 1'h0, \port$1710$3  };
  assign \speed$53  = speed;
  assign \active_config$55  = active_config;
  assign \active_address$57  = active_address;
  assign \crc$58  = crc;
  assign \tx_allowed$59  = tx_allowed;
  assign \tx_timeout$60  = tx_timeout;
  assign \rx_timeout$61  = rx_timeout;
  assign \ack$62  = ack;
  assign \nak$63  = nak;
  assign \stall$64  = stall;
  assign \nyet$65  = nyet;
  assign \pid$66  = pid;
  assign \address$67  = address;
  assign \endpoint$68  = endpoint;
  assign \new_token$69  = new_token;
  assign \ready_for_response$70  = ready_for_response;
  assign \frame$71  = frame;
  assign \new_frame$72  = new_frame;
  assign \is_in$73  = is_in;
  assign \is_out$74  = is_out;
  assign \is_setup$75  = is_setup;
  assign \is_ping$76  = is_ping;
  assign \valid$77  = valid;
  assign \next$78  = next;
  assign \payload$79  = payload;
  assign \rx_complete$80  = rx_complete;
  assign \rx_ready_for_response$81  = rx_ready_for_response;
  assign \rx_invalid$82  = rx_invalid;
  assign \rx_pid_toggle$83  = { 1'h0, \port$1710$3  };
  assign \speed$84  = speed;
  assign \active_config$85  = active_config;
  assign \active_address$86  = active_address;
  assign \crc$87  = crc;
  assign \tx_allowed$88  = tx_allowed;
  assign \tx_timeout$89  = tx_timeout;
  assign \rx_timeout$90  = rx_timeout;
  assign \ack$91  = ack;
  assign \nak$92  = nak;
  assign \stall$93  = stall;
  assign \nyet$94  = nyet;
  assign \pid$95  = pid;
  assign \address$96  = address;
  assign \endpoint$97  = endpoint;
  assign \new_token$98  = new_token;
  assign \ready_for_response$99  = ready_for_response;
  assign \frame$100  = frame;
  assign \new_frame$101  = new_frame;
  assign \is_in$102  = is_in;
  assign \is_out$103  = is_out;
  assign \is_setup$104  = is_setup;
  assign \is_ping$105  = is_ping;
  assign \valid$106  = valid;
  assign \next$107  = next;
  assign \payload$108  = payload;
  assign \rx_complete$109  = rx_complete;
  assign \rx_ready_for_response$110  = rx_ready_for_response;
  assign \rx_invalid$111  = rx_invalid;
  assign \rx_pid_toggle$112  = { 1'h0, \port$1710$3  };
  assign \speed$113  = speed;
  assign \active_config$114  = active_config;
  assign \active_address$115  = active_address;
  assign \address_changed$117  = 1'h0;
  assign \address_changed$118  = 1'h0;
  assign \new_address$122  = 7'h00;
  assign \new_address$123  = 7'h00;
  assign \config_changed$125  = 1'h0;
  assign \config_changed$126  = 1'h0;
  assign \new_config$130  = 8'h00;
  assign \new_config$131  = 8'h00;
  assign \valid$133  = \valid$132 ;
  assign \first$135  = first;
  assign \last$137  = last;
  assign \payload$139  = \payload$138 ;
  assign \ready$141  = ready;
  assign \ack$145  = 1'h0;
  assign \stall$152  = 1'h0;
  assign \stall$153  = 1'h0;
  assign \start$156  = 1'h0;
  assign \start$157  = 1'h0;
  assign \start$160  = 1'h0;
  assign \start$161  = 1'h0;
  assign \valid$164  = 1'h0;
  assign \tx_pid_toggle$167  = { 1'h0, \port$1865$0  };
  assign \tx_pid_toggle$168  = 2'h0;
  assign \ready$175  = ready;
  assign \ready$179  = ready;
  assign \$1  = \ack$143 ;
  assign \ack$142  = \$2 ;
  assign \$3  = \nak$147 ;
  assign \$5  = \stall$151 ;
  assign \$6  = \stall$151 ;
  assign \stall$150  = \stall$151 ;
  assign \$7  = \start$155 ;
  assign \$8  = \start$155 ;
  assign start = \start$155 ;
  assign \$9  = \start$159 ;
  assign \$10  = \start$159 ;
  assign \start$158  = \start$159 ;
  assign \$12  = past_valid[1];
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\utils\\bus.py:94" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.endpoint_mux.tx_mux (first, last, \payload$8 , ready, payload, valid, \first$11 , \last$15 , \payload$6 , \first$13 , \valid$3 , \last$17 , \valid$9 );
  reg \$auto$verilog_backend.cc:2352:dump_module$17  = 0;
  wire \$1 ;
  wire \$2 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output first;
  wire first;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \first$11 ;
  wire \first$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \first$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \first$13 ;
  wire \first$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:41" *)
  wire [2:0] i;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output last;
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \last$15 ;
  wire \last$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \last$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \last$17 ;
  wire \last$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:42" *)
  wire [1:0] o;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output [7:0] payload;
  reg [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input [7:0] \payload$6 ;
  wire [7:0] \payload$6 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire [7:0] \payload$7 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input [7:0] \payload$8 ;
  wire [7:0] \payload$8 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \ready$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input valid;
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  wire \valid$2 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \valid$3 ;
  wire \valid$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output \valid$9 ;
  wire \valid$9 ;
  assign first = \$4  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\utils\\bus.py:133" *) \first$13 ;
  assign last = \$6  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\utils\\bus.py:133" *) \last$17 ;
  assign \valid$9  = \$2  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\utils\\bus.py:133" *) \valid$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\utils\\bus.py:103" *)
  \USBStreamOutDeviceExample.usb.endpoint_mux.tx_mux.encoder  encoder (
    .i(i),
    .o(o)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$17 ) begin end
    payload = 8'h00;
    casez (o)
      2'h0:
          payload = \payload$6 ;
      2'h1:
          payload = 8'h00;
      2'h2:
          payload = \payload$8 ;
    endcase
  end
  assign \valid$2  = 1'h0;
  assign \payload$7  = 8'h00;
  assign \first$12  = 1'h0;
  assign \last$16  = 1'h0;
  assign \ready$19  = ready;
  assign \ready$20  = ready;
  assign \ready$21  = ready;
  assign i[2] = \valid$3 ;
  assign i[1] = 1'h0;
  assign i[0] = valid;
  assign \$1  = valid;
  assign \$2  = valid;
  assign \$3  = \first$11 ;
  assign \$4  = \first$11 ;
  assign \$5  = \last$15 ;
  assign \$6  = \last$15 ;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:46" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.endpoint_mux.tx_mux.encoder (o, i);
  reg \$auto$verilog_backend.cc:2352:dump_module$18  = 0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:41" *)
  input [2:0] i;
  wire [2:0] i;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:43" *)
  reg n;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:42" *)
  output [1:0] o;
  reg [1:0] o;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$18 ) begin end
    o = 2'h0;
    casez (i)
      3'h1:
          o = 2'h0;
      3'h2:
          o = 2'h1;
      3'h4:
          o = 2'h2;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$18 ) begin end
    n = 1'h0;
    (* full_case = 32'd1 *)
    casez (i)
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      default:
          n = 1'h1;
    endcase
  end
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:447" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.handshake_detector (usb_rst, rx_active, rx_data, rx_valid, ack, nak, stall, nyet, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$19  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  reg \$14 ;
  reg \$15 ;
  reg \$16 ;
  reg \$17 ;
  reg [1:0] \$18 ;
  reg [3:0] \$19 ;
  wire [3:0] \$2 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output ack;
  reg ack = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:449" *)
  reg [3:0] active_pid = 4'h0;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [1:0] fsm_state = 2'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output nak;
  reg nak = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output nyet;
  reg nyet = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:753" *)
  input rx_active;
  wire rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:745" *)
  input [7:0] rx_data;
  wire [7:0] rx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:746" *)
  input rx_valid;
  wire rx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  output stall;
  reg stall = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  assign \$1  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:471" *) rx_active;
  assign \$2  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:475" *) rx_data[7:4];
  assign \$3  = rx_data[3:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:475" *) \$2 ;
  assign \$4  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:493" *) rx_active;
  assign \$5  = active_pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:495" *) 2'h2;
  assign \$6  = active_pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:496" *) 4'ha;
  assign \$7  = active_pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:497" *) 4'he;
  assign \$8  = active_pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:498" *) 3'h6;
  assign \$9  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:511" *) rx_active;
  assign \$10  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$11  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$12  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$13  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  always @(posedge usb_clk)
    ack <= \$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  always @(posedge usb_clk)
    nak <= \$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  always @(posedge usb_clk)
    stall <= \$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:53" *)
  always @(posedge usb_clk)
    nyet <= \$17 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$18 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:449" *)
  always @(posedge usb_clk)
    active_pid <= \$19 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$19 ) begin end
    \$14  = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$4 ) begin
            \$14  = \$5 ;
          end
    endcase
    if (usb_rst) begin
      \$14  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$19 ) begin end
    \$15  = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$4 ) begin
            \$15  = \$6 ;
          end
    endcase
    if (usb_rst) begin
      \$15  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$19 ) begin end
    \$16  = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$4 ) begin
            \$16  = \$7 ;
          end
    endcase
    if (usb_rst) begin
      \$16  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$19 ) begin end
    \$17  = 1'h0;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          /* empty */;
      2'h2:
          if (\$4 ) begin
            \$17  = \$8 ;
          end
    endcase
    if (usb_rst) begin
      \$17  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$19 ) begin end
    \$18  = fsm_state;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      2'h0:
          if (rx_active) begin
            \$18  = 2'h1;
          end
      2'h1:
          if (\$1 ) begin
            \$18  = 2'h0;
          end else if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$3 ) begin
              \$18  = 2'h2;
            end else begin
              \$18  = 2'h3;
            end
          end
      2'h2:
          if (\$4 ) begin
            \$18  = 2'h0;
          end else if (rx_valid) begin
            \$18  = 2'h3;
          end
      2'h3:
          if (\$9 ) begin
            \$18  = 2'h0;
          end
    endcase
    if (usb_rst) begin
      \$18  = 2'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$19 ) begin end
    \$19  = active_pid;
    casez (fsm_state)
      2'h0:
          /* empty */;
      2'h1:
          if (\$1 ) begin
          end else if (rx_valid) begin
            if (\$3 ) begin
              \$19  = rx_data[3:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$19  = 4'h0;
    end
  end
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1276" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.handshake_generator (usb_rst, issue_ack, issue_nak, issue_stall, ready, valid, data, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$20  = 0;
  wire \$1 ;
  wire \$2 ;
  reg [7:0] \$3 ;
  reg \$4 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  output [7:0] data;
  reg [7:0] data = 8'h00;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg fsm_state = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1268" *)
  input issue_ack;
  wire issue_ack;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1269" *)
  input issue_nak;
  wire issue_nak;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1270" *)
  input issue_stall;
  wire issue_stall;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  input ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  output valid;
  reg valid;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$4 ;
  assign \$1  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  always @(posedge usb_clk)
    data <= \$3 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$20 ) begin end
    \$4  = fsm_state;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      1'h0:
        begin
          if (issue_ack) begin
            \$4  = 1'h1;
          end
          if (issue_nak) begin
            \$4  = 1'h1;
          end
          if (issue_stall) begin
            \$4  = 1'h1;
          end
        end
      1'h1:
          if (ready) begin
            \$4  = 1'h0;
          end
    endcase
    if (usb_rst) begin
      \$4  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$20 ) begin end
    (* full_case = 32'd1 *)
    casez (fsm_state)
      1'h0:
          valid = 1'h0;
      1'h1:
          valid = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$20 ) begin end
    \$3  = data;
    casez (fsm_state)
      1'h0:
        begin
          if (issue_ack) begin
            \$3  = 8'hd2;
          end
          if (issue_nak) begin
            \$3  = 8'h5a;
          end
          if (issue_stall) begin
            \$3  = 8'h1e;
          end
        end
    endcase
    if (usb_rst) begin
      \$3  = 8'h00;
    end
  end
  assign \$2  = fsm_state;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:716" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.receiver (usb_rst, crc, rx_active, rx_data, rx_valid, packet_complete, crc_mismatch, active_pid, next, start, valid, payload, \start$19 , ready_for_response, tx_allowed, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$21  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  wire \$14 ;
  wire \$15 ;
  wire \$16 ;
  wire \$17 ;
  wire \$18 ;
  wire \$19 ;
  wire [3:0] \$2 ;
  reg \$20 ;
  reg \$21 ;
  reg [2:0] \$22 ;
  reg [3:0] \$23 ;
  reg [15:0] \$24 ;
  reg [15:0] \$25 ;
  reg [15:0] \$26 ;
  reg [3:0] \$27 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:707" *)
  output [3:0] active_pid;
  reg [3:0] active_pid = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input [15:0] crc;
  wire [15:0] crc;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:711" *)
  output crc_mismatch;
  reg crc_mismatch = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:746" *)
  reg [15:0] data_pipeline = 16'h0000;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [2:0] fsm_state = 3'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:742" *)
  reg [15:0] last_byte_crc = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:743" *)
  reg [15:0] last_word_crc = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  output next;
  reg next;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:709" *)
  output packet_complete;
  reg packet_complete = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:712" *)
  reg [3:0] packet_id = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  output [7:0] payload;
  reg [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:710" *)
  output ready_for_response;
  reg ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:753" *)
  input rx_active;
  wire rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:745" *)
  input [7:0] rx_data;
  wire [7:0] rx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:746" *)
  input rx_valid;
  wire rx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  output start;
  reg start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  output \start$19 ;
  reg \start$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input tx_allowed;
  wire tx_allowed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\stream.py:69" *)
  output valid;
  reg valid;
  assign \$1  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:773" *) rx_active;
  assign \$2  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:778" *) rx_data[7:4];
  assign \$3  = rx_data[3:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:778" *) \$2 ;
  assign \$4  = rx_data[1:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:777" *) 2'h3;
  assign \$5  = \$3  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:781" *) \$4 ;
  assign \$6  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:804" *) rx_active;
  assign \$7  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:823" *) rx_active;
  assign \$8  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:854" *) rx_active;
  assign \$9  = last_word_crc == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:857" *) data_pipeline;
  assign \$10  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:896" *) rx_active;
  assign \$11  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:854" *) rx_active;
  assign \$12  = last_word_crc == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:857" *) data_pipeline;
  assign \$13  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$14  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$15  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$16  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  assign \$17  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h4;
  assign \$18  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h5;
  assign \$19  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h6;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:709" *)
  always @(posedge usb_clk)
    packet_complete <= \$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:711" *)
  always @(posedge usb_clk)
    crc_mismatch <= \$21 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$22 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:707" *)
  always @(posedge usb_clk)
    active_pid <= \$23 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:746" *)
  always @(posedge usb_clk)
    data_pipeline <= \$24 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:742" *)
  always @(posedge usb_clk)
    last_byte_crc <= \$25 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:743" *)
  always @(posedge usb_clk)
    last_word_crc <= \$26 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:712" *)
  always @(posedge usb_clk)
    packet_id <= \$27 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    \$20  = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$8 ) begin
            if (\$9 ) begin
              \$20  = 1'h1;
            end
          end
    endcase
    if (usb_rst) begin
      \$20  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    \$21  = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$8 ) begin
            (* full_case = 32'd1 *)
            if (\$9 ) begin
            end else begin
              \$21  = 1'h1;
            end
          end
    endcase
    if (usb_rst) begin
      \$21  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    \$22  = fsm_state;
    casez (fsm_state)
      3'h0:
          if (rx_active) begin
            \$22  = 3'h1;
          end
      3'h1:
          if (\$1 ) begin
            \$22  = 3'h0;
          end else if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$5 ) begin
              \$22  = 3'h2;
            end else begin
              \$22  = 3'h3;
            end
          end
      3'h2:
        begin
          if (rx_valid) begin
            \$22  = 3'h4;
          end
          if (\$6 ) begin
            \$22  = 3'h0;
          end
        end
      3'h4:
          if (rx_valid) begin
            \$22  = 3'h5;
          end else if (\$7 ) begin
            \$22  = 3'h0;
          end
      3'h5:
          if (\$8 ) begin
            (* full_case = 32'd1 *)
            if (\$9 ) begin
              \$22  = 3'h6;
            end else begin
              \$22  = 3'h0;
            end
          end
      3'h6:
          if (tx_allowed) begin
            \$22  = 3'h0;
          end
      3'h3:
          if (\$10 ) begin
            \$22  = 3'h0;
          end
    endcase
    if (usb_rst) begin
      \$22  = 3'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    \$23  = active_pid;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          if (\$1 ) begin
          end else if (rx_valid) begin
            if (\$5 ) begin
              \$23  = rx_data[3:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$23  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    \$24  = data_pipeline;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          if (rx_valid) begin
            \$24 [15:8] = rx_data;
          end
      3'h4:
          if (rx_valid) begin
            \$24 [15:8] = rx_data;
            \$24 [7:0] = data_pipeline[15:8];
          end
      3'h5:
          if (rx_valid) begin
            \$24 [15:8] = rx_data;
            \$24 [7:0] = data_pipeline[15:8];
          end
    endcase
    if (usb_rst) begin
      \$24  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    \$25  = last_byte_crc;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          if (rx_valid) begin
            \$25  = crc;
          end
      3'h4:
          if (rx_valid) begin
            \$25  = crc;
          end
      3'h5:
          if (rx_valid) begin
            \$25  = crc;
          end
    endcase
    if (usb_rst) begin
      \$25  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    \$26  = last_word_crc;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          if (rx_valid) begin
            \$26  = last_byte_crc;
          end
      3'h5:
          if (rx_valid) begin
            \$26  = last_byte_crc;
          end
    endcase
    if (usb_rst) begin
      \$26  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    \$27  = packet_id;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$8 ) begin
            if (\$9 ) begin
              \$27  = active_pid;
            end
          end
    endcase
    if (usb_rst) begin
      \$27  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    next = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (rx_valid) begin
            next = 1'h1;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    start = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          start = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    valid = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          valid = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    payload = 8'h00;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (rx_valid) begin
            payload = data_pipeline[7:0];
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    \start$19  = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$11 ) begin
            if (\$12 ) begin
              \start$19  = 1'h1;
            end
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$21 ) begin end
    ready_for_response = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          /* empty */;
      3'h6:
          if (tx_allowed) begin
            ready_for_response = 1'h1;
          end
    endcase
  end
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:137" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.reset_sequencer (usb_rst, vbus_connected, low_speed_only, full_speed_only, bus_busy, line_state, current_speed, operating_mode, termination_select, bus_reset, valid, data, suspended, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$22  = 0;
  wire [18:0] \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  wire \$14 ;
  wire \$15 ;
  wire \$16 ;
  wire \$17 ;
  wire \$18 ;
  wire \$19 ;
  wire [18:0] \$2 ;
  wire \$20 ;
  wire \$21 ;
  wire \$22 ;
  wire \$23 ;
  wire \$24 ;
  wire \$25 ;
  wire \$26 ;
  wire [2:0] \$27 ;
  wire \$28 ;
  wire \$29 ;
  wire \$3 ;
  wire \$30 ;
  wire \$31 ;
  wire \$32 ;
  wire \$33 ;
  wire \$34 ;
  wire \$35 ;
  wire \$36 ;
  wire \$37 ;
  wire \$38 ;
  wire \$39 ;
  wire \$4 ;
  wire \$40 ;
  wire \$41 ;
  wire \$42 ;
  wire \$43 ;
  wire \$44 ;
  wire \$45 ;
  wire \$46 ;
  wire \$47 ;
  wire \$48 ;
  wire \$49 ;
  wire \$5 ;
  wire \$50 ;
  wire \$51 ;
  wire \$52 ;
  wire \$53 ;
  wire \$54 ;
  wire \$55 ;
  wire \$56 ;
  wire \$57 ;
  wire \$58 ;
  wire \$59 ;
  wire \$6 ;
  wire \$60 ;
  wire \$61 ;
  wire \$62 ;
  wire \$63 ;
  wire \$64 ;
  wire \$65 ;
  wire \$66 ;
  wire \$67 ;
  reg [17:0] \$68 ;
  reg [17:0] \$69 ;
  wire \$7 ;
  reg [1:0] \$70 ;
  reg [3:0] \$71 ;
  reg \$72 ;
  reg [1:0] \$73 ;
  reg \$74 ;
  reg [1:0] \$75 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:122" *)
  input bus_busy;
  wire bus_busy;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:163" *)
  reg bus_idle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:126" *)
  output bus_reset;
  reg bus_reset;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:129" *)
  output [1:0] current_speed;
  reg [1:0] current_speed = 2'h1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  output [7:0] data;
  reg [7:0] data;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [3:0] fsm_state = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:120" *)
  input full_speed_only;
  wire full_speed_only;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:124" *)
  input [1:0] line_state;
  wire [1:0] line_state;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:147" *)
  reg [17:0] line_state_time = 18'h00000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:119" *)
  input low_speed_only;
  wire low_speed_only;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:130" *)
  output [1:0] operating_mode;
  reg [1:0] operating_mode = 2'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:127" *)
  output suspended;
  reg suspended;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:131" *)
  output termination_select;
  reg termination_select = 1'h1;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:143" *)
  reg [17:0] timer = 18'h00000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  output valid;
  reg valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:151" *)
  reg [1:0] valid_pairs = 2'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:123" *)
  input vbus_connected;
  wire vbus_connected;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:154" *)
  reg was_hs_pre_suspend = 1'h0;
  assign \$25  = line_state_time == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:377" *) 8'h96;
  assign \$26  = valid_pairs == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:381" *) 2'h2;
  assign \$27  = valid_pairs + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:386" *) 1'h1;
  assign \$28  = line_state != (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:391" *) 1'h1;
  assign \$29  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:395" *) 18'h249f0;
  assign \$30  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:433" *) line_state;
  assign \$31  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:448" *) 14'h2ee0;
  assign \$32  = line_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:452" *) 1'h1;
  assign \$33  = line_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:469" *) 1'h1;
  assign \$34  = low_speed_only & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:469" *) \$33 ;
  assign \$35  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:470" *) low_speed_only;
  assign \$36  = line_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:470" *) 2'h2;
  assign \$37  = \$35  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:470" *) \$36 ;
  assign \$38  = \$34  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:471" *) \$37 ;
  assign \$39  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:489" *) line_state;
  assign \$40  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:495" *) 8'h96;
  assign \$41  = low_speed_only | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:500" *) full_speed_only;
  assign \$42  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:166" *) current_speed;
  assign \$43  = current_speed == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:171" *) 1'h1;
  assign \$44  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:167" *) line_state;
  assign \$45  = line_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:172" *) 1'h1;
  assign \$46  = line_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:174" *) 2'h2;
  assign \$47  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:209" *) vbus_connected;
  assign \$48  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:216" *) 9'h12c;
  assign \$49  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:249" *) vbus_connected;
  assign \$50  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:448" *) 14'h2ee0;
  assign \$51  = line_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:452" *) 1'h1;
  assign \$52  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:495" *) 8'h96;
  assign \$53  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$54  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$55  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$56  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  assign \$57  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h4;
  assign \$58  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h5;
  assign \$59  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h6;
  assign \$60  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h7;
  assign \$61  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 4'h8;
  assign \$62  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 4'h9;
  assign \$63  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 4'ha;
  assign \$64  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 4'hb;
  assign \$65  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 4'hc;
  assign \$66  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 4'hd;
  assign \$67  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 4'he;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:143" *)
  always @(posedge usb_clk)
    timer <= \$68 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:147" *)
  always @(posedge usb_clk)
    line_state_time <= \$69 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:129" *)
  always @(posedge usb_clk)
    current_speed <= \$70 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$71 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:154" *)
  always @(posedge usb_clk)
    was_hs_pre_suspend <= \$72 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:130" *)
  always @(posedge usb_clk)
    operating_mode <= \$73 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:131" *)
  always @(posedge usb_clk)
    termination_select <= \$74 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:151" *)
  always @(posedge usb_clk)
    valid_pairs <= \$75 ;
  assign \$1  = timer + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:29" *) 1'h1;
  assign \$2  = line_state_time + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:29" *) 1'h1;
  assign \$3  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:201" *) line_state;
  assign \$4  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:209" *) vbus_connected;
  assign \$5  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:216" *) 9'h12c;
  assign \$6  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:220" *) low_speed_only;
  assign \$7  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:220" *) full_speed_only;
  assign \$8  = \$6  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:220" *) \$7 ;
  assign \$9  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:225" *) bus_idle;
  assign \$10  = line_state_time == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:230" *) 18'h2bf20;
  assign \$11  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:243" *) line_state;
  assign \$12  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:249" *) vbus_connected;
  assign \$13  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:258" *) 18'h2bf20;
  assign \$14  = full_speed_only | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:271" *) low_speed_only;
  assign \$15  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:293" *) bus_busy;
  assign \$16  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:297" *) bus_busy;
  assign \$17  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:316" *) 17'h1d4c0;
  assign \$18  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:330" *) 18'h249f0;
  assign \$19  = line_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:334" *) 2'h2;
  assign \$20  = line_state_time == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:345" *) 8'h96;
  assign \$21  = line_state != (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:350" *) 2'h2;
  assign \$22  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:354" *) 18'h249f0;
  assign \$23  = timer == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:362" *) 18'h249f0;
  assign \$24  = line_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\reset.py:366" *) 1'h1;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    \$68  = \$1 [17:0];
    casez (fsm_state)
      4'h0:
          \$68  = 18'h00000;
      4'h1:
        begin
          if (\$3 ) begin
            \$68  = 18'h00000;
          end
          if (\$4 ) begin
            \$68  = 18'h00000;
          end
        end
      4'h4:
        begin
          if (\$11 ) begin
            \$68  = 18'h00000;
          end
          if (\$13 ) begin
            \$68  = 18'h00000;
          end
        end
      4'h2:
          \$68  = 18'h00000;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          if (\$17 ) begin
            \$68  = 18'h00000;
          end
      4'ha:
          /* empty */;
      4'hb:
          /* empty */;
      4'hc:
          /* empty */;
      4'hd:
          /* empty */;
      4'he:
          \$68  = 18'h00000;
      4'h5:
          if (\$30 ) begin
            \$68  = 18'h00000;
          end
      4'h6:
          if (\$31 ) begin
            \$68  = 18'h00000;
          end
      4'h3:
        begin
          if (\$38 ) begin
            \$68  = 18'h00000;
            (* full_case = 32'd1 *)
            if (was_hs_pre_suspend) begin
            end else begin
              \$68  = 18'h00000;
            end
          end
          if (\$39 ) begin
            \$68  = 18'h00000;
          end
          if (\$40 ) begin
            \$68  = 18'h00000;
            if (\$41 ) begin
              \$68  = 18'h00000;
            end
          end
        end
    endcase
    if (usb_rst) begin
      \$68  = 18'h00000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    \$69  = \$2 [17:0];
    casez (fsm_state)
      4'h0:
          \$69  = 18'h00000;
      4'h1:
          if (\$9 ) begin
            \$69  = 18'h00000;
          end
      4'h4:
          /* empty */;
      4'h2:
          /* empty */;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          /* empty */;
      4'ha:
          if (\$19 ) begin
            \$69  = 18'h00000;
          end
      4'hb:
          /* empty */;
      4'hc:
          if (\$24 ) begin
            \$69  = 18'h00000;
          end
      4'hd:
          /* empty */;
      4'he:
          \$69  = 18'h00000;
      4'h5:
          if (\$30 ) begin
            \$69  = 18'h00000;
          end
      4'h6:
          /* empty */;
      4'h3:
        begin
          if (\$38 ) begin
            (* full_case = 32'd1 *)
            if (was_hs_pre_suspend) begin
            end else begin
              \$69  = 18'h00000;
            end
          end
          if (\$40 ) begin
            if (\$41 ) begin
              \$69  = 18'h00000;
            end
          end
        end
    endcase
    if (usb_rst) begin
      \$69  = 18'h00000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    \$70  = current_speed;
    casez (fsm_state)
      4'h0:
          if (low_speed_only) begin
            \$70  = 2'h2;
          end
      4'h1:
          /* empty */;
      4'h4:
          if (\$13 ) begin
            \$70  = 2'h1;
          end
      4'h2:
          \$70  = 2'h0;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          /* empty */;
      4'ha:
          /* empty */;
      4'hb:
          /* empty */;
      4'hc:
          /* empty */;
      4'hd:
          /* empty */;
      4'he:
          \$70  = 2'h0;
      4'h5:
          (* full_case = 32'd1 *)
          if (low_speed_only) begin
            \$70  = 2'h2;
          end else begin
            \$70  = 2'h1;
          end
    endcase
    if (usb_rst) begin
      \$70  = 2'h1;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    \$71  = fsm_state;
    casez (fsm_state)
      4'h0:
          \$71  = 4'h1;
      4'h1:
        begin
          if (\$5 ) begin
            if (\$8 ) begin
              \$71  = 4'h2;
            end
          end
          if (\$10 ) begin
            \$71  = 4'h3;
          end
        end
      4'h4:
        begin
          if (\$12 ) begin
            \$71  = 4'h5;
          end
          if (\$13 ) begin
            \$71  = 4'h6;
          end
          if (\$14 ) begin
            \$71  = 4'h5;
          end
        end
      4'h2:
          \$71  = 4'h7;
      4'h7:
          if (\$15 ) begin
            \$71  = 4'h8;
          end
      4'h8:
          if (\$16 ) begin
            \$71  = 4'h9;
          end
      4'h9:
          if (\$17 ) begin
            \$71  = 4'ha;
          end
      4'ha:
        begin
          if (\$18 ) begin
            \$71  = 4'h5;
          end
          if (\$19 ) begin
            \$71  = 4'hb;
          end
        end
      4'hb:
        begin
          if (\$20 ) begin
            \$71  = 4'hc;
          end
          if (\$21 ) begin
            \$71  = 4'ha;
          end
          if (\$22 ) begin
            \$71  = 4'h5;
          end
        end
      4'hc:
        begin
          if (\$23 ) begin
            \$71  = 4'h5;
          end
          if (\$24 ) begin
            \$71  = 4'hd;
          end
        end
      4'hd:
        begin
          if (\$25 ) begin
            (* full_case = 32'd1 *)
            if (\$26 ) begin
              \$71  = 4'he;
            end else begin
              \$71  = 4'ha;
            end
          end
          if (\$28 ) begin
            \$71  = 4'hc;
          end
          if (\$29 ) begin
            \$71  = 4'h5;
          end
        end
      4'he:
          \$71  = 4'h4;
      4'h5:
          if (\$30 ) begin
            \$71  = 4'h1;
          end
      4'h6:
          if (\$31 ) begin
            (* full_case = 32'd1 *)
            if (\$32 ) begin
              \$71  = 4'h3;
            end else begin
              \$71  = 4'h2;
            end
          end
      4'h3:
        begin
          if (\$38 ) begin
            (* full_case = 32'd1 *)
            if (was_hs_pre_suspend) begin
              \$71  = 4'he;
            end else begin
              \$71  = 4'h1;
            end
          end
          if (\$40 ) begin
            (* full_case = 32'd1 *)
            if (\$41 ) begin
              \$71  = 4'h1;
            end else begin
              \$71  = 4'h2;
            end
          end
        end
    endcase
    if (usb_rst) begin
      \$71  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    \$72  = was_hs_pre_suspend;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          if (\$10 ) begin
            \$72  = 1'h0;
          end
      4'h4:
          /* empty */;
      4'h2:
          /* empty */;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          /* empty */;
      4'ha:
          /* empty */;
      4'hb:
          /* empty */;
      4'hc:
          /* empty */;
      4'hd:
          /* empty */;
      4'he:
          /* empty */;
      4'h5:
          /* empty */;
      4'h6:
          if (\$31 ) begin
            if (\$32 ) begin
              \$72  = 1'h1;
            end
          end
    endcase
    if (usb_rst) begin
      \$72  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    \$73  = operating_mode;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h4:
          if (\$13 ) begin
            \$73  = 2'h0;
          end
      4'h2:
          \$73  = 2'h2;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          /* empty */;
      4'ha:
          /* empty */;
      4'hb:
          /* empty */;
      4'hc:
          /* empty */;
      4'hd:
          /* empty */;
      4'he:
          \$73  = 2'h0;
      4'h5:
          \$73  = 2'h0;
    endcase
    if (usb_rst) begin
      \$73  = 2'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    \$74  = termination_select;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h4:
          if (\$13 ) begin
            \$74  = 1'h1;
          end
      4'h2:
          \$74  = 1'h1;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          /* empty */;
      4'ha:
          /* empty */;
      4'hb:
          /* empty */;
      4'hc:
          /* empty */;
      4'hd:
          /* empty */;
      4'he:
          \$74  = 1'h0;
      4'h5:
          \$74  = 1'h1;
    endcase
    if (usb_rst) begin
      \$74  = 1'h1;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    \$75  = valid_pairs;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h4:
          /* empty */;
      4'h2:
          /* empty */;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          if (\$17 ) begin
            \$75  = 2'h0;
          end
      4'ha:
          /* empty */;
      4'hb:
          /* empty */;
      4'hc:
          /* empty */;
      4'hd:
          if (\$25 ) begin
            (* full_case = 32'd1 *)
            if (\$26 ) begin
            end else begin
              \$75  = \$27 [1:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$75  = 2'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    (* full_case = 32'd1 *)
    if (\$42 ) begin
      bus_idle = \$44 ;
    end else if (\$43 ) begin
      bus_idle = \$45 ;
    end else begin
      bus_idle = \$46 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    bus_reset = 1'h0;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
        begin
          if (\$47 ) begin
            bus_reset = 1'h1;
          end
          if (\$48 ) begin
            bus_reset = 1'h1;
          end
        end
      4'h4:
          if (\$49 ) begin
            bus_reset = 1'h1;
          end
      4'h2:
          /* empty */;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          /* empty */;
      4'ha:
          /* empty */;
      4'hb:
          /* empty */;
      4'hc:
          /* empty */;
      4'hd:
          /* empty */;
      4'he:
          /* empty */;
      4'h5:
          /* empty */;
      4'h6:
          if (\$50 ) begin
            (* full_case = 32'd1 *)
            if (\$51 ) begin
            end else begin
              bus_reset = 1'h1;
            end
          end
      4'h3:
          if (\$52 ) begin
            bus_reset = 1'h1;
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    valid = 1'h0;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h4:
          /* empty */;
      4'h2:
          /* empty */;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          valid = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    data = 8'h00;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h4:
          /* empty */;
      4'h2:
          /* empty */;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          data = 8'h00;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$22 ) begin end
    suspended = 1'h0;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h4:
          /* empty */;
      4'h2:
          /* empty */;
      4'h7:
          /* empty */;
      4'h8:
          /* empty */;
      4'h9:
          /* empty */;
      4'ha:
          /* empty */;
      4'hb:
          /* empty */;
      4'hc:
          /* empty */;
      4'hd:
          /* empty */;
      4'he:
          /* empty */;
      4'h5:
          /* empty */;
      4'h6:
          /* empty */;
      4'h3:
          suspended = 1'h1;
    endcase
  end
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1404" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.timer (usb_rst, \start$3 , speed, start, rx_to_tx_at_min, rx_to_tx_at_max, tx_to_rx_timeout, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$23  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  wire \$14 ;
  reg [9:0] \$15 ;
  wire \$2 ;
  wire [10:0] \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1415" *)
  reg [9:0] counter = 10'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire rx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \rx_timeout$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  output rx_to_tx_at_max;
  reg rx_to_tx_at_max;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  output rx_to_tx_at_min;
  reg rx_to_tx_at_min;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1387" *)
  input [1:0] speed;
  wire [1:0] speed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input start;
  wire start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input \start$3 ;
  wire \start$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire tx_allowed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_allowed$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire tx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire \tx_timeout$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  output tx_to_rx_timeout;
  reg tx_to_rx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  assign \$1  = start | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1419" *) \start$3 ;
  assign \$2  = counter < (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1424" *) 10'h281;
  assign \$3  = counter + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1425" *) 1'h1;
  assign \$4  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1432" *) speed;
  assign \$5  = speed == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1439" *) 1'h1;
  assign \$6  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1435" *) 1'h1;
  assign \$7  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1436" *) 5'h18;
  assign \$8  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1437" *) 7'h5c;
  assign \$9  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1441" *) 4'ha;
  assign \$10  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1442" *) 6'h20;
  assign \$11  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1443" *) 7'h50;
  assign \$12  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1448" *) 1'h1;
  assign \$13  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1449" *) 5'h18;
  assign \$14  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1450" *) 7'h5c;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1415" *)
  always @(posedge usb_clk)
    counter <= \$15 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$23 ) begin end
    \$15  = counter;
    if (\$1 ) begin
      \$15  = 10'h000;
    end else if (\$2 ) begin
      \$15  = \$3 [9:0];
    end
    if (usb_rst) begin
      \$15  = 10'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$23 ) begin end
    (* full_case = 32'd1 *)
    if (\$4 ) begin
      rx_to_tx_at_min = \$6 ;
    end else if (\$5 ) begin
      rx_to_tx_at_min = \$9 ;
    end else begin
      rx_to_tx_at_min = \$12 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$23 ) begin end
    (* full_case = 32'd1 *)
    if (\$4 ) begin
      rx_to_tx_at_max = \$7 ;
    end else if (\$5 ) begin
      rx_to_tx_at_max = \$10 ;
    end else begin
      rx_to_tx_at_max = \$13 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$23 ) begin end
    (* full_case = 32'd1 *)
    if (\$4 ) begin
      tx_to_rx_timeout = \$8 ;
    end else if (\$5 ) begin
      tx_to_rx_timeout = \$11 ;
    end else begin
      tx_to_rx_timeout = \$14 ;
    end
  end
  assign tx_allowed = rx_to_tx_at_min;
  assign tx_timeout = rx_to_tx_at_max;
  assign rx_timeout = tx_to_rx_timeout;
  assign \tx_allowed$12  = rx_to_tx_at_min;
  assign \tx_timeout$13  = rx_to_tx_at_max;
  assign \rx_timeout$14  = tx_to_rx_timeout;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:261" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.token_detector (usb_rst, is_in, is_out, is_setup, is_ping, address, rx_active, rx_data, rx_valid, speed, new_frame, new_token, frame, pid, \address$22 , endpoint, ready_for_response, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$24  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  wire [3:0] \$14 ;
  wire \$15 ;
  wire \$16 ;
  wire \$17 ;
  wire \$18 ;
  wire \$19 ;
  wire \$2 ;
  wire \$20 ;
  wire \$21 ;
  wire \$22 ;
  wire \$23 ;
  wire \$24 ;
  wire \$25 ;
  wire \$26 ;
  wire \$27 ;
  wire \$28 ;
  wire \$29 ;
  wire \$3 ;
  wire \$30 ;
  wire \$31 ;
  wire \$32 ;
  wire \$33 ;
  wire \$34 ;
  wire \$35 ;
  wire \$36 ;
  wire \$37 ;
  wire \$38 ;
  wire \$39 ;
  wire \$4 ;
  wire \$40 ;
  wire \$41 ;
  wire \$42 ;
  wire \$43 ;
  wire \$44 ;
  wire \$45 ;
  wire \$46 ;
  wire \$47 ;
  wire \$48 ;
  wire \$49 ;
  wire \$5 ;
  wire \$50 ;
  wire \$51 ;
  reg \$52 ;
  reg \$53 ;
  reg [2:0] \$54 ;
  reg [3:0] \$55 ;
  reg [10:0] \$56 ;
  reg [10:0] \$57 ;
  reg [3:0] \$58 ;
  reg [6:0] \$59 ;
  wire \$6 ;
  reg [3:0] \$60 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:239" *)
  input [6:0] address;
  wire [6:0] address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output [6:0] \address$22 ;
  reg [6:0] \address$22  = 7'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:264" *)
  reg [3:0] current_pid = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output [3:0] endpoint;
  reg [3:0] endpoint = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output [10:0] frame;
  reg [10:0] frame = 11'h000;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [2:0] fsm_state = 3'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output is_in;
  wire is_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output is_out;
  wire is_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output is_ping;
  wire is_ping;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output is_setup;
  wire is_setup;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output new_frame;
  reg new_frame = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output new_token;
  reg new_token = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  output [3:0] pid;
  reg [3:0] pid = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  output ready_for_response;
  wire ready_for_response;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:753" *)
  input rx_active;
  wire rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:745" *)
  input [7:0] rx_data;
  wire [7:0] rx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:746" *)
  input rx_valid;
  wire rx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:238" *)
  input [1:0] speed;
  wire [1:0] speed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:238" *)
  wire [1:0] \speed$1 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  reg start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:263" *)
  reg [10:0] token_data = 11'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire tx_allowed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  assign \$36  = \$35  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) rx_data[0];
  assign \$37  = \$36  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) rx_data[2];
  assign \$38  = token_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[3];
  assign \$39  = \$38  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[4];
  assign \$40  = \$39  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[6];
  assign \$41  = \$40  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) rx_data[1];
  assign \$42  = token_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[1];
  assign \$43  = \$42  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[4];
  assign \$44  = \$43  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[5];
  assign \$45  = \$44  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[7];
  assign \$46  = \$45  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) rx_data[2];
  assign \$47  = rx_data[7:3] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:352" *) { \$46 , \$41 , \$37 , \$30 , \$23  };
  assign \$48  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:367" *) rx_active;
  assign \$49  = current_pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:373" *) 3'h5;
  assign \$50  = token_data[6:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:385" *) address;
  assign \$51  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:411" *) rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  always @(posedge usb_clk)
    new_frame <= \$52 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  always @(posedge usb_clk)
    new_token <= \$53 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$54 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:264" *)
  always @(posedge usb_clk)
    current_pid <= \$55 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:263" *)
  always @(posedge usb_clk)
    token_data <= \$56 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  always @(posedge usb_clk)
    frame <= \$57 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  always @(posedge usb_clk)
    pid <= \$58 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  always @(posedge usb_clk)
    \address$22  <= \$59 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:114" *)
  always @(posedge usb_clk)
    endpoint <= \$60 ;
  assign is_in = pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:283" *) 4'h9;
  assign is_out = pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:284" *) 1'h1;
  assign is_setup = pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:285" *) 4'hd;
  assign is_ping = pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:286" *) 3'h4;
  assign \$1  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:367" *) rx_active;
  assign \$2  = current_pid == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:373" *) 3'h5;
  assign \$3  = token_data[6:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:385" *) address;
  assign \$4  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$5  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$6  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$7  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  assign \$8  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h4;
  assign \$9  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h5;
  assign \$10  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:306" *) rx_active;
  assign \$11  = rx_data[1:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:310" *) 1'h1;
  assign \$12  = rx_data[3:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:311" *) 3'h4;
  assign \$13  = \$11  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:317" *) \$12 ;
  assign \$14  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:312" *) rx_data[7:4];
  assign \$15  = rx_data[3:0] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:312" *) \$14 ;
  assign \$16  = \$13  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:317" *) \$15 ;
  assign \$17  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:331" *) rx_active;
  assign \$18  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:342" *) rx_active;
  assign \$19  = token_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[1];
  assign \$20  = \$19  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[2];
  assign \$21  = \$20  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[5];
  assign \$22  = \$21  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[6];
  assign \$23  = \$22  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) rx_data[0];
  assign \$24  = token_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[1];
  assign \$25  = \$24  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[2];
  assign \$26  = \$25  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[3];
  assign \$27  = \$26  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[6];
  assign \$28  = \$27  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[7];
  assign \$29  = \$28  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) rx_data[1];
  assign \$30  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:253" *) \$29 ;
  assign \$31  = token_data[0] ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[1];
  assign \$32  = \$31  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[2];
  assign \$33  = \$32  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[3];
  assign \$34  = \$33  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[4];
  assign \$35  = \$34  ^ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:248" *) token_data[7];
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:272" *)
  \USBStreamOutDeviceExample.usb.token_detector.timer  timer (
    .rx_to_tx_at_min(ready_for_response),
    .speed(speed),
    .start(start),
    .usb_clk(usb_clk),
    .usb_rst(usb_rst)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    start = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$1 ) begin
            (* full_case = 32'd1 *)
            if (\$2 ) begin
            end else begin
              if (\$3 ) begin
                start = 1'h1;
              end
            end
          end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    \$52  = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$48 ) begin
            if (\$49 ) begin
              \$52  = 1'h1;
            end
          end
    endcase
    if (usb_rst) begin
      \$52  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    \$53  = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$48 ) begin
            (* full_case = 32'd1 *)
            if (\$49 ) begin
            end else begin
              if (\$50 ) begin
                \$53  = 1'h1;
              end
            end
          end
    endcase
    if (usb_rst) begin
      \$53  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    \$54  = fsm_state;
    casez (fsm_state)
      3'h0:
          if (rx_active) begin
            \$54  = 3'h1;
          end
      3'h1:
          if (\$10 ) begin
            \$54  = 3'h0;
          end else if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$16 ) begin
              \$54  = 3'h2;
            end else begin
              \$54  = 3'h3;
            end
          end
      3'h2:
          if (\$17 ) begin
            \$54  = 3'h0;
          end else if (rx_valid) begin
            \$54  = 3'h4;
          end
      3'h4:
          if (\$18 ) begin
            \$54  = 3'h0;
          end else if (rx_valid) begin
            (* full_case = 32'd1 *)
            if (\$47 ) begin
              \$54  = 3'h5;
            end else begin
              \$54  = 3'h3;
            end
          end
      3'h5:
          if (\$48 ) begin
            \$54  = 3'h0;
          end else if (rx_valid) begin
            \$54  = 3'h3;
          end
      3'h3:
          if (\$51 ) begin
            \$54  = 3'h0;
          end
    endcase
    if (usb_rst) begin
      \$54  = 3'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    \$55  = current_pid;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          if (\$10 ) begin
          end else if (rx_valid) begin
            if (\$16 ) begin
              \$55  = rx_data[3:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$55  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    \$56  = token_data;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          if (\$17 ) begin
          end else if (rx_valid) begin
            \$56  = { 3'h0, rx_data };
          end
      3'h4:
          if (\$18 ) begin
          end else if (rx_valid) begin
            if (\$47 ) begin
              \$56 [10:8] = rx_data[2:0];
            end
          end
    endcase
    if (usb_rst) begin
      \$56  = 11'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    \$57  = frame;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$48 ) begin
            if (\$49 ) begin
              \$57  = token_data;
            end
          end
    endcase
    if (usb_rst) begin
      \$57  = 11'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    \$58  = pid;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$48 ) begin
            (* full_case = 32'd1 *)
            if (\$49 ) begin
            end else begin
              (* full_case = 32'd1 *)
              if (\$50 ) begin
                \$58  = current_pid;
              end else begin
                \$58  = 4'h0;
              end
            end
          end
    endcase
    if (usb_rst) begin
      \$58  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    \$59  = \address$22 ;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$48 ) begin
            (* full_case = 32'd1 *)
            if (\$49 ) begin
            end else begin
              if (\$50 ) begin
                \$59  = token_data[6:0];
              end
            end
          end
    endcase
    if (usb_rst) begin
      \$59  = 7'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$24 ) begin end
    \$60  = endpoint;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      3'h5:
          if (\$48 ) begin
            (* full_case = 32'd1 *)
            if (\$49 ) begin
            end else begin
              if (\$50 ) begin
                \$60  = token_data[10:7];
              end
            end
          end
    endcase
    if (usb_rst) begin
      \$60  = 4'h0;
    end
  end
  assign \speed$1  = speed;
  assign tx_allowed = ready_for_response;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1404" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.token_detector.timer (usb_rst, speed, start, rx_to_tx_at_min, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$25  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  reg [9:0] \$14 ;
  wire [10:0] \$2 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1415" *)
  reg [9:0] counter = 10'h000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire rx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1408" *)
  reg rx_to_tx_at_max;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  output rx_to_tx_at_min;
  reg rx_to_tx_at_min;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1387" *)
  input [1:0] speed;
  wire [1:0] speed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  input start;
  wire start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire tx_allowed;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:150" *)
  wire tx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1409" *)
  reg tx_to_rx_timeout;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  assign \$1  = counter < (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1424" *) 10'h281;
  assign \$2  = counter + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1425" *) 1'h1;
  assign \$3  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1432" *) speed;
  assign \$4  = speed == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1439" *) 1'h1;
  assign \$5  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1435" *) 1'h1;
  assign \$6  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1436" *) 5'h18;
  assign \$7  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1437" *) 7'h5c;
  assign \$8  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1441" *) 4'ha;
  assign \$9  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1442" *) 6'h20;
  assign \$10  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1443" *) 7'h50;
  assign \$11  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1448" *) 1'h1;
  assign \$12  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1449" *) 5'h18;
  assign \$13  = counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1450" *) 7'h5c;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1415" *)
  always @(posedge usb_clk)
    counter <= \$14 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$25 ) begin end
    \$14  = counter;
    if (start) begin
      \$14  = 10'h000;
    end else if (\$1 ) begin
      \$14  = \$2 [9:0];
    end
    if (usb_rst) begin
      \$14  = 10'h000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$25 ) begin end
    (* full_case = 32'd1 *)
    if (\$3 ) begin
      rx_to_tx_at_min = \$5 ;
    end else if (\$4 ) begin
      rx_to_tx_at_min = \$8 ;
    end else begin
      rx_to_tx_at_min = \$11 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$25 ) begin end
    (* full_case = 32'd1 *)
    if (\$3 ) begin
      rx_to_tx_at_max = \$6 ;
    end else if (\$4 ) begin
      rx_to_tx_at_max = \$9 ;
    end else begin
      rx_to_tx_at_max = \$12 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$25 ) begin end
    (* full_case = 32'd1 *)
    if (\$3 ) begin
      tx_to_rx_timeout = \$7 ;
    end else if (\$4 ) begin
      tx_to_rx_timeout = \$10 ;
    end else begin
      tx_to_rx_timeout = \$13 ;
    end
  end
  assign tx_allowed = rx_to_tx_at_min;
  assign tx_timeout = rx_to_tx_at_max;
  assign rx_timeout = tx_to_rx_timeout;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:800" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.translator (ulpi_nxt, ulpi_data_in, ulpi__clk__o, ulpi__rst__o, term_select, ulpi__data__oe, busy, session_end, tx_valid, ulpi__data__o, ulpi__stp__o, rx_active, rx_data, rx_valid, line_state, tx_ready, xcvr_select, op_mode, tx_data, ulpi__dir__i);
  reg \$auto$verilog_backend.cc:2352:dump_module$26  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  wire \$14 ;
  wire \$15 ;
  reg [15:0] \$16 ;
  reg \$17 ;
  reg \$18 ;
  reg \$19 ;
  wire \$2 ;
  reg [7:0] \$20 ;
  reg \$21 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire [16:0] \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:74" *)
  wire [5:0] address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:568" *)
  wire bus_idle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:399" *)
  wire \bus_idle$25 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:742" *)
  output busy;
  wire busy;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:73" *)
  wire \busy$7 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:575" *)
  wire \busy$8 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:412" *)
  wire \busy$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:409" *)
  wire chrg_vbus;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire \chrg_vbus$65 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:410" *)
  wire dischrg_vbus;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire \dischrg_vbus$67 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:407" *)
  wire dm_pulldown;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire \dm_pulldown$61 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:75" *)
  wire done;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:406" *)
  wire dp_pulldown;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire \dp_pulldown$63 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:757" *)
  wire host_disconnect;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:297" *)
  wire \host_disconnect$48 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:757" *)
  wire id_digital;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:298" *)
  wire \id_digital$50 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:405" *)
  wire id_pullup;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire \id_pullup$59 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:764" *)
  wire [7:0] last_rx_command;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:292" *)
  wire [7:0] \last_rx_command$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:294" *)
  output [1:0] line_state;
  wire [1:0] line_state;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:294" *)
  wire [1:0] \line_state$38 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:402" *)
  input [1:0] op_mode;
  wire [1:0] op_mode;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire [1:0] \op_mode$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:402" *)
  wire [1:0] \op_mode$55 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:931" *)
  reg past_dir = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:855" *)
  reg phy_ready = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:77" *)
  wire read_request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:289" *)
  wire register_operation_in_progress;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:753" *)
  output rx_active;
  reg rx_active = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:745" *)
  output [7:0] rx_data;
  reg [7:0] rx_data = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:757" *)
  wire rx_error;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:296" *)
  wire \rx_error$46 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:304" *)
  wire rx_start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:305" *)
  wire rx_stop;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:746" *)
  output rx_valid;
  reg rx_valid = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:301" *)
  output session_end;
  wire session_end;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:301" *)
  wire \session_end$44 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:757" *)
  wire session_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:300" *)
  wire \session_valid$42 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:861" *)
  reg [15:0] startup_counter = 16'h0000;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:403" *)
  wire suspend;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire \suspend$57 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  input term_select;
  wire term_select;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire \term_select$54 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:748" *)
  input [7:0] tx_data;
  wire [7:0] tx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:748" *)
  wire [7:0] \tx_data$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:565" *)
  output tx_ready;
  wire tx_ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:565" *)
  wire \tx_ready$24 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:749" *)
  input tx_valid;
  wire tx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:749" *)
  wire \tx_valid$22 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input ulpi__clk__o;
  wire ulpi__clk__o;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire [7:0] ulpi__data__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  output [7:0] ulpi__data__o;
  reg [7:0] ulpi__data__o;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  output ulpi__data__oe;
  wire ulpi__data__oe;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:69" *)
  input ulpi__dir__i;
  wire ulpi__dir__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  wire ulpi__nxt__i;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input ulpi__rst__o;
  wire ulpi__rst__o;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  output ulpi__stp__o;
  reg ulpi__stp__o;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input [7:0] ulpi_data_in;
  wire [7:0] ulpi_data_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:571" *)
  wire [7:0] ulpi_data_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:67" *)
  wire [7:0] \ulpi_data_out$35 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:69" *)
  wire ulpi_dir;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:70" *)
  wire ulpi_next;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:70" *)
  input ulpi_nxt;
  wire ulpi_nxt;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:570" *)
  wire ulpi_out_req;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:71" *)
  wire ulpi_stop;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:573" *)
  wire ulpi_stp;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:415" *)
  wire use_external_vbus_indicator;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire \use_external_vbus_indicator$69 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:757" *)
  wire vbus_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:299" *)
  wire \vbus_valid$40 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:81" *)
  wire [7:0] write_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:80" *)
  wire write_request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  input [1:0] xcvr_select;
  wire [1:0] xcvr_select;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:761" *)
  wire [1:0] \xcvr_select$52 ;
  assign ulpi__data__oe = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:873" *) ulpi__dir__i;
  assign \$1  = \busy$7  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:828" *) \busy$8 ;
  assign \$2  = \$1  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:828" *) \busy$9 ;
  assign busy = \$2  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:828" *) ulpi__dir__i;
  assign \$3  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:886" *) \busy$9 ;
  assign \$4  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:886" *) ulpi__dir__i;
  assign \$5  = \$3  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:886" *) \$4 ;
  assign bus_idle = \$5  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:886" *) phy_ready;
  assign \$6  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:892" *) \busy$8 ;
  assign \bus_idle$25  = \$6  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:892" *) phy_ready;
  assign \$7  = startup_counter + (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:862" *) 1'h1;
  assign \$8  = startup_counter == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:863" *) 16'hea60;
  assign \$9  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:937" *) ulpi__dir__i;
  assign \$10  = \$9  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:937" *) rx_stop;
  assign \$11  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:933" *) past_dir;
  assign \$12  = \$11  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:933" *) ulpi__dir__i;
  assign \$13  = \$12  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:934" *) ulpi_nxt;
  assign \$14  = \$13  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:940" *) rx_start;
  assign \$15  = ulpi_nxt & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:951" *) rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:861" *)
  always @(posedge ulpi__clk__o)
    startup_counter <= \$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:855" *)
  always @(posedge ulpi__clk__o)
    phy_ready <= \$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:931" *)
  always @(posedge ulpi__clk__o)
    past_dir <= \$18 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:753" *)
  always @(posedge ulpi__clk__o)
    rx_active <= \$19 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:745" *)
  always @(posedge ulpi__clk__o)
    rx_data <= \$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:746" *)
  always @(posedge ulpi__clk__o)
    rx_valid <= \$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:804" *)
  \USBStreamOutDeviceExample.usb.translator.control_translator  control_translator (
    .address(address),
    .bus_idle(\bus_idle$25 ),
    .busy(\busy$9 ),
    .\busy$23 (\busy$7 ),
    .done(done),
    .op_mode(op_mode),
    .term_select(term_select),
    .usb_clk(ulpi__clk__o),
    .usb_rst(ulpi__rst__o),
    .write_data(write_data),
    .write_request(write_request),
    .xcvr_select(xcvr_select)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:803" *)
  \USBStreamOutDeviceExample.usb.translator.register_window  register_window (
    .address(address),
    .busy(\busy$7 ),
    .done(done),
    .ulpi_data_in(ulpi_data_in),
    .ulpi_data_out(\ulpi_data_out$35 ),
    .ulpi_dir(ulpi__dir__i),
    .ulpi_next(ulpi_nxt),
    .ulpi_stop(ulpi_stop),
    .usb_clk(ulpi__clk__o),
    .usb_rst(ulpi__rst__o),
    .write_data(write_data),
    .write_request(write_request)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:805" *)
  \USBStreamOutDeviceExample.usb.translator.rxevent_decoder  rxevent_decoder (
    .host_disconnect(host_disconnect),
    .last_rx_command(last_rx_command),
    .register_operation_in_progress(\busy$7 ),
    .rx_error(rx_error),
    .rx_start(rx_start),
    .rx_stop(rx_stop),
    .session_end(session_end),
    .session_valid(session_valid),
    .ulpi__data__i(ulpi_data_in),
    .ulpi__dir__i(ulpi__dir__i),
    .ulpi__nxt__i(ulpi_nxt),
    .usb_clk(ulpi__clk__o),
    .usb_rst(ulpi__rst__o),
    .vbus_valid(vbus_valid)
  );
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:806" *)
  \USBStreamOutDeviceExample.usb.translator.transmit_translator  transmit_translator (
    .bus_idle(bus_idle),
    .busy(\busy$8 ),
    .op_mode(op_mode),
    .tx_data(tx_data),
    .tx_ready(tx_ready),
    .tx_valid(tx_valid),
    .ulpi_data_out(ulpi_data_out),
    .ulpi_nxt(ulpi_nxt),
    .ulpi_out_req(ulpi_out_req),
    .ulpi_stp(ulpi_stp),
    .usb_clk(ulpi__clk__o),
    .usb_rst(ulpi__rst__o)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$26 ) begin end
    (* full_case = 32'd1 *)
    if (ulpi_out_req) begin
      ulpi__data__o = ulpi_data_out;
    end else begin
      ulpi__data__o = \ulpi_data_out$35 ;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$26 ) begin end
    (* full_case = 32'd1 *)
    if (ulpi_out_req) begin
      ulpi__stp__o = ulpi_stp;
    end else begin
      ulpi__stp__o = ulpi_stop;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$26 ) begin end
    \$16  = \$7 [15:0];
    if (ulpi__rst__o) begin
      \$16  = 16'h0000;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$26 ) begin end
    \$17  = phy_ready;
    if (\$8 ) begin
      \$17  = 1'h1;
    end
    if (ulpi__rst__o) begin
      \$17  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$26 ) begin end
    \$18  = ulpi__dir__i;
    if (ulpi__rst__o) begin
      \$18  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$26 ) begin end
    \$19  = rx_active;
    if (\$10 ) begin
      \$19  = 1'h0;
    end else if (\$14 ) begin
      \$19  = 1'h1;
    end
    if (ulpi__rst__o) begin
      \$19  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$26 ) begin end
    \$20  = ulpi_data_in;
    if (ulpi__rst__o) begin
      \$20  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$26 ) begin end
    \$21  = \$15 ;
    if (ulpi__rst__o) begin
      \$21  = 1'h0;
    end
  end
  assign usb_clk = ulpi__clk__o;
  assign usb_rst = ulpi__rst__o;
  assign register_operation_in_progress = \busy$7 ;
  assign \last_rx_command$12  = last_rx_command;
  assign ulpi__nxt__i = ulpi_nxt;
  assign \op_mode$16  = op_mode;
  assign \tx_data$20  = tx_data;
  assign \tx_valid$22  = tx_valid;
  assign \tx_ready$24  = tx_ready;
  assign ulpi__data__i = ulpi_data_in;
  assign ulpi_dir = ulpi__dir__i;
  assign ulpi_next = ulpi_nxt;
  assign \line_state$38  = last_rx_command[1:0];
  assign \vbus_valid$40  = vbus_valid;
  assign \session_valid$42  = session_valid;
  assign \session_end$44  = session_end;
  assign \rx_error$46  = rx_error;
  assign \host_disconnect$48  = host_disconnect;
  assign id_digital = last_rx_command[6];
  assign \id_digital$50  = last_rx_command[6];
  assign \xcvr_select$52  = xcvr_select;
  assign \term_select$54  = term_select;
  assign \op_mode$55  = op_mode;
  assign suspend = 1'h0;
  assign \suspend$57  = 1'h0;
  assign id_pullup = 1'h0;
  assign \id_pullup$59  = 1'h0;
  assign dm_pulldown = 1'h0;
  assign \dm_pulldown$61  = 1'h0;
  assign dp_pulldown = 1'h0;
  assign \dp_pulldown$63  = 1'h0;
  assign chrg_vbus = 1'h0;
  assign \chrg_vbus$65  = 1'h0;
  assign dischrg_vbus = 1'h0;
  assign \dischrg_vbus$67  = 1'h0;
  assign use_external_vbus_indicator = 1'h0;
  assign \use_external_vbus_indicator$69  = 1'h0;
  assign read_request = 1'h0;
  assign line_state = last_rx_command[1:0];
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:475" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.translator.control_translator (usb_rst, term_select, bus_idle, \busy$23 , done, busy, address, write_data, write_request, xcvr_select, op_mode, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$27  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  wire \$14 ;
  wire \$15 ;
  wire \$16 ;
  wire \$17 ;
  wire \$18 ;
  wire \$19 ;
  wire \$2 ;
  reg [7:0] \$20 ;
  reg [7:0] \$21 ;
  reg [7:0] \$22 ;
  reg [7:0] \$23 ;
  reg \$24 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:74" *)
  output [5:0] address;
  reg [5:0] address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:399" *)
  input bus_idle;
  wire bus_idle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:412" *)
  output busy;
  reg busy = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:73" *)
  input \busy$23 ;
  wire \busy$23 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:409" *)
  wire chrg_vbus;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:435" *)
  reg [7:0] current_register_value_04 = 8'h41;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:435" *)
  reg [7:0] current_register_value_0a = 8'h06;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:410" *)
  wire dischrg_vbus;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:407" *)
  wire dm_pulldown;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:75" *)
  input done;
  wire done;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:406" *)
  wire dp_pulldown;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:405" *)
  wire id_pullup;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:402" *)
  input [1:0] op_mode;
  wire [1:0] op_mode;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:77" *)
  wire read_request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:403" *)
  wire suspend;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:401" *)
  input term_select;
  wire term_select;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:415" *)
  wire use_external_vbus_indicator;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:81" *)
  output [7:0] write_data;
  reg [7:0] write_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:440" *)
  reg write_done_04;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:440" *)
  reg write_done_0a;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:80" *)
  output write_request;
  reg write_request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:438" *)
  wire write_requested_04;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:438" *)
  wire write_requested_0a;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:439" *)
  reg [7:0] write_value_04 = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:439" *)
  reg [7:0] write_value_0a = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:400" *)
  input [1:0] xcvr_select;
  wire [1:0] xcvr_select;
  assign \$2  = current_register_value_04 != (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:455" *) { \$1 , 1'h0, op_mode, term_select, xcvr_select };
  assign \$4  = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:455" *) current_register_value_0a;
  assign \$5  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:499" *) done;
  assign \$6  = write_requested_04 & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:498" *) \$5 ;
  assign \$7  = \$6  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:498" *) bus_idle;
  assign \$8  = \$7  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:514" *) \busy$23 ;
  assign \$9  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:499" *) done;
  assign \$10  = write_requested_0a & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:498" *) \$9 ;
  assign \$11  = \$10  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:498" *) bus_idle;
  assign \$12  = \$11  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:514" *) \busy$23 ;
  assign write_requested_04 = current_register_value_04 != (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:454" *) { \$13 , 1'h0, op_mode, term_select, xcvr_select };
  assign write_requested_0a = | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:454" *) current_register_value_0a;
  assign \$14  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:499" *) done;
  assign \$15  = write_requested_04 & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:498" *) \$14 ;
  assign \$16  = \$15  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:498" *) bus_idle;
  assign \$17  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:499" *) done;
  assign \$18  = write_requested_0a & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:498" *) \$17 ;
  assign \$19  = \$18  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:498" *) bus_idle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:435" *)
  always @(posedge usb_clk)
    current_register_value_04 <= \$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:439" *)
  always @(posedge usb_clk)
    write_value_04 <= \$21 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:435" *)
  always @(posedge usb_clk)
    current_register_value_0a <= \$22 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:439" *)
  always @(posedge usb_clk)
    write_value_0a <= \$23 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:412" *)
  always @(posedge usb_clk)
    busy <= \$24 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    \$20  = current_register_value_04;
    if (write_done_04) begin
      \$20  = write_value_04;
    end
    if (usb_rst) begin
      \$20  = 8'h41;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    \$21  = write_value_04;
    if (\$2 ) begin
      \$21  = { 1'h0, \$3 , 1'h0, op_mode, term_select, xcvr_select };
    end
    if (usb_rst) begin
      \$21  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    \$22  = current_register_value_0a;
    if (write_done_0a) begin
      \$22  = write_value_0a;
    end
    if (usb_rst) begin
      \$22  = 8'h06;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    \$23  = write_value_0a;
    if (\$4 ) begin
      \$23  = 8'h00;
    end
    if (usb_rst) begin
      \$23  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    (* full_case = 32'd1 *)
    if (write_requested_04) begin
      \$24  = \$8 ;
    end else if (write_requested_0a) begin
      \$24  = \$12 ;
    end else begin
      \$24  = \busy$23 ;
    end
    if (usb_rst) begin
      \$24  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    write_done_04 = 1'h0;
    if (write_requested_04) begin
      write_done_04 = done;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    address = 6'h00;
    if (write_requested_04) begin
      address = 6'h04;
    end else if (write_requested_0a) begin
      address = 6'h0a;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    write_data = 8'h00;
    if (write_requested_04) begin
      write_data = write_value_04;
    end else if (write_requested_0a) begin
      write_data = write_value_0a;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    (* full_case = 32'd1 *)
    if (write_requested_04) begin
      write_request = \$16 ;
    end else if (write_requested_0a) begin
      write_request = \$19 ;
    end else begin
      write_request = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$27 ) begin end
    write_done_0a = 1'h0;
    if (write_requested_04) begin
    end else if (write_requested_0a) begin
      write_done_0a = done;
    end
  end
  assign suspend = 1'h0;
  assign id_pullup = 1'h0;
  assign dp_pulldown = 1'h0;
  assign dm_pulldown = 1'h0;
  assign dischrg_vbus = 1'h0;
  assign chrg_vbus = 1'h0;
  assign use_external_vbus_indicator = 1'h0;
  assign read_request = 1'h0;
  assign \$1  = 1'h1;
  assign \$3  = 1'h1;
  assign \$13  = 1'h1;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:85" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.translator.register_window (ulpi_next, ulpi_data_in, usb_clk, usb_rst, busy, ulpi_stop, done, ulpi_data_out, address, write_data, write_request, ulpi_dir);
  reg \$auto$verilog_backend.cc:2352:dump_module$28  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  wire \$12 ;
  wire \$13 ;
  reg \$14 ;
  reg \$15 ;
  reg \$16 ;
  reg [7:0] \$17 ;
  reg [5:0] \$18 ;
  reg [7:0] \$19 ;
  wire [7:0] \$2 ;
  reg [3:0] \$20 ;
  reg [7:0] \$21 ;
  wire \$3 ;
  wire [7:0] \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:74" *)
  input [5:0] address;
  wire [5:0] address;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:73" *)
  output busy;
  wire busy;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:87" *)
  reg [5:0] current_address = 6'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:88" *)
  reg [7:0] current_write = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:75" *)
  output done;
  reg done = 1'h0;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [3:0] fsm_state = 4'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:78" *)
  reg [7:0] read_data = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:77" *)
  wire read_request;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:66" *)
  input [7:0] ulpi_data_in;
  wire [7:0] ulpi_data_in;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:67" *)
  output [7:0] ulpi_data_out;
  reg [7:0] ulpi_data_out = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:69" *)
  input ulpi_dir;
  wire ulpi_dir;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:70" *)
  input ulpi_next;
  wire ulpi_next;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:68" *)
  reg ulpi_out_req = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:71" *)
  output ulpi_stop;
  reg ulpi_stop = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:81" *)
  input [7:0] write_data;
  wire [7:0] write_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:80" *)
  input write_request;
  wire write_request;
  assign \$1  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:134" *) ulpi_dir;
  assign \$3  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:193" *) ulpi_dir;
  assign busy = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:100" *) \$5 ;
  assign \$5  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$6  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$7  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$8  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  assign \$9  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h4;
  assign \$10  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h5;
  assign \$11  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h6;
  assign \$12  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h7;
  assign \$13  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 4'h8;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:68" *)
  always @(posedge usb_clk)
    ulpi_out_req <= \$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:71" *)
  always @(posedge usb_clk)
    ulpi_stop <= \$15 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:75" *)
  always @(posedge usb_clk)
    done <= \$16 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:67" *)
  always @(posedge usb_clk)
    ulpi_data_out <= \$17 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:87" *)
  always @(posedge usb_clk)
    current_address <= \$18 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:88" *)
  always @(posedge usb_clk)
    current_write <= \$19 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$20 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:78" *)
  always @(posedge usb_clk)
    read_data <= \$21 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$28 ) begin end
    \$14  = 1'h0;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          if (\$1 ) begin
            \$14  = 1'h1;
          end
      4'h3:
        begin
          \$14  = 1'h1;
          if (ulpi_dir) begin
            \$14  = 1'h0;
          end else if (ulpi_next) begin
            \$14  = 1'h0;
          end
        end
      4'h4:
          /* empty */;
      4'h5:
          /* empty */;
      4'h2:
          if (\$3 ) begin
            \$14  = 1'h1;
          end
      4'h6:
        begin
          \$14  = 1'h1;
          if (ulpi_dir) begin
            \$14  = 1'h0;
          end
        end
      4'h7:
        begin
          \$14  = 1'h1;
          if (ulpi_dir) begin
            \$14  = 1'h0;
          end
        end
      4'h8:
          (* full_case = 32'd1 *)
          if (ulpi_dir) begin
            \$14  = 1'h0;
          end else begin
            \$14  = 1'h0;
          end
    endcase
    if (usb_rst) begin
      \$14  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$28 ) begin end
    \$15  = 1'h0;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h3:
          /* empty */;
      4'h4:
          /* empty */;
      4'h5:
          /* empty */;
      4'h2:
          /* empty */;
      4'h6:
          /* empty */;
      4'h7:
          if (ulpi_dir) begin
          end else if (ulpi_next) begin
            \$15  = 1'h1;
          end
      4'h8:
          \$15  = 1'h0;
    endcase
    if (usb_rst) begin
      \$15  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$28 ) begin end
    \$16  = 1'h0;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h3:
          /* empty */;
      4'h4:
          /* empty */;
      4'h5:
          \$16  = 1'h1;
      4'h2:
          /* empty */;
      4'h6:
          /* empty */;
      4'h7:
          /* empty */;
      4'h8:
          (* full_case = 32'd1 *)
          if (ulpi_dir) begin
          end else begin
            \$16  = 1'h1;
          end
    endcase
    if (usb_rst) begin
      \$16  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$28 ) begin end
    \$17  = ulpi_data_out;
    casez (fsm_state)
      4'h0:
          \$17  = 8'h00;
      4'h1:
          if (\$1 ) begin
            \$17  = \$2 ;
          end
      4'h3:
          if (ulpi_dir) begin
          end else if (ulpi_next) begin
            \$17  = 8'h00;
          end
      4'h4:
          /* empty */;
      4'h5:
          /* empty */;
      4'h2:
          if (\$3 ) begin
            \$17  = \$4 ;
          end
      4'h6:
          if (ulpi_dir) begin
          end else if (ulpi_next) begin
            \$17  = write_data;
          end
      4'h7:
          if (ulpi_dir) begin
          end else if (ulpi_next) begin
            \$17  = 8'h00;
          end
    endcase
    if (usb_rst) begin
      \$17  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$28 ) begin end
    \$18  = current_address;
    casez (fsm_state)
      4'h0:
          \$18  = address;
    endcase
    if (usb_rst) begin
      \$18  = 6'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$28 ) begin end
    \$19  = current_write;
    casez (fsm_state)
      4'h0:
          \$19  = write_data;
    endcase
    if (usb_rst) begin
      \$19  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$28 ) begin end
    \$20  = fsm_state;
    casez (fsm_state)
      4'h0:
          if (write_request) begin
            \$20  = 4'h2;
          end
      4'h1:
          if (\$1 ) begin
            \$20  = 4'h3;
          end
      4'h3:
          if (ulpi_dir) begin
            \$20  = 4'h1;
          end else if (ulpi_next) begin
            \$20  = 4'h4;
          end
      4'h4:
          \$20  = 4'h5;
      4'h5:
          \$20  = 4'h0;
      4'h2:
          if (\$3 ) begin
            \$20  = 4'h6;
          end
      4'h6:
          if (ulpi_dir) begin
            \$20  = 4'h2;
          end else if (ulpi_next) begin
            \$20  = 4'h7;
          end
      4'h7:
          if (ulpi_dir) begin
            \$20  = 4'h2;
          end else if (ulpi_next) begin
            \$20  = 4'h8;
          end
      4'h8:
          (* full_case = 32'd1 *)
          if (ulpi_dir) begin
            \$20  = 4'h2;
          end else begin
            \$20  = 4'h0;
          end
    endcase
    if (usb_rst) begin
      \$20  = 4'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$28 ) begin end
    \$21  = read_data;
    casez (fsm_state)
      4'h0:
          /* empty */;
      4'h1:
          /* empty */;
      4'h3:
          /* empty */;
      4'h4:
          /* empty */;
      4'h5:
          \$21  = ulpi_data_in;
    endcase
    if (usb_rst) begin
      \$21  = 8'h00;
    end
  end
  assign read_request = 1'h0;
  assign \$2 [5:0] = address;
  assign \$2 [7:6] = 2'h3;
  assign \$4 [6:0] = { 1'h0, address };
  assign \$4 [7] = 1'h1;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:309" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.translator.rxevent_decoder (ulpi__nxt__i, ulpi__data__i, usb_clk, usb_rst, register_operation_in_progress, vbus_valid, session_valid, session_end, rx_error, host_disconnect, rx_start, rx_stop, last_rx_command, ulpi__dir__i);
  reg \$auto$verilog_backend.cc:2352:dump_module$29  = 0;
  wire \$1 ;
  reg \$10 ;
  reg \$11 ;
  reg [7:0] \$12 ;
  wire \$2 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  reg \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:318" *)
  reg direction_delayed = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:297" *)
  output host_disconnect;
  wire host_disconnect;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:298" *)
  wire id_digital;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:292" *)
  output [7:0] last_rx_command;
  reg [7:0] last_rx_command = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:294" *)
  wire [1:0] line_state;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:321" *)
  wire receiving;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:289" *)
  input register_operation_in_progress;
  wire register_operation_in_progress;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:295" *)
  wire rx_active;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:296" *)
  output rx_error;
  wire rx_error;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:304" *)
  output rx_start;
  reg rx_start = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:305" *)
  output rx_stop;
  reg rx_stop = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:301" *)
  output session_end;
  wire session_end;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:300" *)
  output session_valid;
  wire session_valid;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input [7:0] ulpi__data__i;
  wire [7:0] ulpi__data__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input ulpi__dir__i;
  wire ulpi__dir__i;
  (* src = "c:\\projects\\amaranth\\usb\\luna\\examples\\usb\\to_verilog.py:18" *)
  input ulpi__nxt__i;
  wire ulpi__nxt__i;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:299" *)
  output vbus_valid;
  wire vbus_valid;
  assign \$1  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:331" *) ulpi__nxt__i;
  assign \$2  = receiving & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:331" *) \$1 ;
  assign \$3  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:331" *) register_operation_in_progress;
  assign \$4  = \$2  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:331" *) \$3 ;
  assign \$5  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:336" *) last_rx_command[4];
  assign \$6  = \$5  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:336" *) ulpi__data__i[4];
  assign \$7  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:338" *) ulpi__data__i[4];
  assign \$8  = last_rx_command[4] & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:338" *) \$7 ;
  assign receiving = direction_delayed & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:322" *) ulpi__dir__i;
  assign vbus_valid = last_rx_command[3:2] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:346" *) 2'h3;
  assign session_valid = last_rx_command[3:2] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:347" *) 2'h2;
  assign session_end = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:348" *) last_rx_command[3:2];
  assign rx_error = last_rx_command[5:4] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:350" *) 2'h3;
  assign host_disconnect = last_rx_command[5:4] == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:351" *) 2'h2;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:318" *)
  always @(posedge usb_clk)
    direction_delayed <= \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:304" *)
  always @(posedge usb_clk)
    rx_start <= \$10 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:305" *)
  always @(posedge usb_clk)
    rx_stop <= \$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:292" *)
  always @(posedge usb_clk)
    last_rx_command <= \$12 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$29 ) begin end
    \$9  = ulpi__dir__i;
    if (usb_rst) begin
      \$9  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$29 ) begin end
    \$10  = 1'h0;
    if (\$4 ) begin
      if (\$6 ) begin
        \$10  = 1'h1;
      end
    end
    if (usb_rst) begin
      \$10  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$29 ) begin end
    \$11  = 1'h0;
    if (\$4 ) begin
      if (\$8 ) begin
        \$11  = 1'h1;
      end
    end
    if (usb_rst) begin
      \$11  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$29 ) begin end
    \$12  = last_rx_command;
    if (\$4 ) begin
      \$12  = ulpi__data__i;
    end
    if (usb_rst) begin
      \$12  = 8'h00;
    end
  end
  assign rx_active = last_rx_command[4];
  assign line_state = last_rx_command[1:0];
  assign id_digital = last_rx_command[6];
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:579" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.translator.transmit_translator (usb_clk, usb_rst, bus_idle, busy, tx_valid, ulpi_stp, ulpi_data_out, tx_ready, ulpi_out_req, op_mode, tx_data, ulpi_nxt);
  reg \$auto$verilog_backend.cc:2352:dump_module$30  = 0;
  wire \$1 ;
  wire \$10 ;
  reg \$11 ;
  reg \$12 ;
  wire \$2 ;
  wire [6:0] \$3 ;
  wire \$4 ;
  wire \$5 ;
  wire \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:568" *)
  input bus_idle;
  wire bus_idle;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:575" *)
  output busy;
  wire busy;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg fsm_state = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:567" *)
  input [1:0] op_mode;
  wire [1:0] op_mode;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:563" *)
  input [7:0] tx_data;
  wire [7:0] tx_data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:565" *)
  output tx_ready;
  reg tx_ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:564" *)
  input tx_valid;
  wire tx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:571" *)
  output [7:0] ulpi_data_out;
  reg [7:0] ulpi_data_out;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:572" *)
  input ulpi_nxt;
  wire ulpi_nxt;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:570" *)
  output ulpi_out_req;
  reg ulpi_out_req = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:573" *)
  output ulpi_stp;
  reg ulpi_stp;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  assign \$1  = tx_valid & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:592" *) bus_idle;
  assign \$2  = op_mode == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:580" *) 2'h2;
  assign \$4  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:630" *) tx_valid;
  assign \$5  = op_mode == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:580" *) 2'h2;
  assign \$6  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$8  = tx_valid & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:592" *) bus_idle;
  assign \$9  = op_mode == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:580" *) 2'h2;
  assign \$10  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:630" *) tx_valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\ulpi.py:570" *)
  always @(posedge usb_clk)
    ulpi_out_req <= \$11 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$12 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$30 ) begin end
    (* full_case = 32'd1 *)
    casez (fsm_state)
      1'h0:
          ulpi_stp = 1'h0;
      1'h1:
        begin
          ulpi_stp = 1'h0;
          if (\$4 ) begin
            ulpi_stp = 1'h1;
          end
        end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$30 ) begin end
    ulpi_data_out = 8'h00;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      1'h0:
          if (\$1 ) begin
            (* full_case = 32'd1 *)
            if (\$2 ) begin
              ulpi_data_out = 8'h40;
            end else begin
              ulpi_data_out = { 1'h0, \$3  };
            end
          end
      1'h1:
        begin
          ulpi_data_out = tx_data;
          if (\$4 ) begin
            (* full_case = 32'd1 *)
            if (\$5 ) begin
              ulpi_data_out = 8'hff;
            end else begin
              ulpi_data_out = 8'h00;
            end
          end
        end
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$30 ) begin end
    tx_ready = 1'h0;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      1'h0:
          if (\$1 ) begin
            (* full_case = 32'd1 *)
            if (\$2 ) begin
              tx_ready = 1'h0;
            end else begin
              tx_ready = ulpi_nxt;
            end
          end
      1'h1:
          tx_ready = ulpi_nxt;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$30 ) begin end
    \$11  = ulpi_out_req;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      1'h0:
          if (\$8 ) begin
            (* full_case = 32'd1 *)
            if (\$9 ) begin
              \$11  = 1'h1;
            end else begin
              \$11  = 1'h1;
            end
          end
      1'h1:
          if (\$10 ) begin
            \$11  = 1'h0;
          end
    endcase
    if (usb_rst) begin
      \$11  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$30 ) begin end
    \$12  = fsm_state;
    (* full_case = 32'd1 *)
    casez (fsm_state)
      1'h0:
          if (\$8 ) begin
            if (ulpi_nxt) begin
              \$12  = 1'h1;
            end
          end
      1'h1:
          if (\$10 ) begin
            \$12  = 1'h0;
          end
    endcase
    if (usb_rst) begin
      \$12  = 1'h0;
    end
  end
  assign \$3 [5:0] = { 2'h0, tx_data[3:0] };
  assign \$3 [6] = 1'h1;
  assign \$7  = fsm_state;
  assign busy = fsm_state;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1109" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.transmitter (usb_rst, crc, \valid$6 , first, last, \ready$8 , ready, start, data, valid, data_pid, payload, usb_clk);
  reg \$auto$verilog_backend.cc:2352:dump_module$31  = 0;
  wire \$1 ;
  wire \$10 ;
  wire \$11 ;
  reg [7:0] \$12 ;
  reg \$13 ;
  reg [2:0] \$14 ;
  reg [7:0] \$15 ;
  wire \$2 ;
  wire \$3 ;
  wire \$4 ;
  wire \$5 ;
  reg [7:0] \$6 ;
  wire \$7 ;
  wire \$8 ;
  wire \$9 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  input [15:0] crc;
  wire [15:0] crc;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1120" *)
  reg [7:0] current_data_pid = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  output [7:0] data;
  reg [7:0] data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1101" *)
  input [1:0] data_pid;
  wire [1:0] data_pid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input first;
  wire first;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  reg [2:0] fsm_state = 3'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1129" *)
  reg is_zlp = 1'h0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input last;
  wire last;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input [7:0] payload;
  wire [7:0] payload;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  output ready;
  reg ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  input \ready$8 ;
  wire \ready$8 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1126" *)
  reg [7:0] remaining_crc = 8'h00;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:74" *)
  output start;
  reg start;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_clk;
  wire usb_clk;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_ir.py:277" *)
  input usb_rst;
  wire usb_rst;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  output valid;
  reg valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\stream\\__init__.py:58" *)
  input \valid$6 ;
  wire \valid$6 ;
  assign \$1  = ! (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) fsm_state;
  assign \$2  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 1'h1;
  assign \$3  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h2;
  assign \$4  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 2'h3;
  assign \$5  = fsm_state == (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\hdl\\_dsl.py:490" *) 3'h4;
  assign \$7  = first & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1156" *) \valid$6 ;
  assign \$8  = last & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1162" *) \valid$6 ;
  assign \$9  = ~ (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1203" *) \valid$6 ;
  assign \$10  = last | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1203" *) \$9 ;
  assign \$11  = \ready$8  & (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1203" *) \$10 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1120" *)
  always @(posedge usb_clk)
    current_data_pid <= \$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1129" *)
  always @(posedge usb_clk)
    is_zlp <= \$13 ;
  (* src = "C:\\tools\\Python312\\Lib\\contextlib.py:144" *)
  always @(posedge usb_clk)
    fsm_state <= \$14 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\usb\\usb2\\packet.py:1126" *)
  always @(posedge usb_clk)
    remaining_crc <= \$15 ;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$31 ) begin end
    (* full_case = 32'd1 *)
    casez (data_pid)
      2'h0:
          \$6  = 8'hc3;
      2'h1:
          \$6  = 8'h4b;
      2'h2:
          \$6  = 8'h87;
      2'h3:
          \$6  = 8'h0f;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$31 ) begin end
    ready = 1'h0;
    casez (fsm_state)
      3'h0:
          ready = 1'h0;
      3'h1:
          ready = 1'h0;
      3'h3:
          ready = \ready$8 ;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$31 ) begin end
    start = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          start = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$31 ) begin end
    data = 8'h00;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          data = current_data_pid;
      3'h3:
          data = payload;
      3'h2:
          data = crc[7:0];
      3'h4:
          data = remaining_crc;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$31 ) begin end
    valid = 1'h0;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          valid = 1'h1;
      3'h3:
          valid = \valid$6 ;
      3'h2:
          valid = 1'h1;
      3'h4:
          valid = 1'h1;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$31 ) begin end
    \$12  = current_data_pid;
    casez (fsm_state)
      3'h0:
          \$12  = \$6 ;
    endcase
    if (usb_rst) begin
      \$12  = 8'h00;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$31 ) begin end
    \$13  = is_zlp;
    casez (fsm_state)
      3'h0:
          if (\$7 ) begin
            \$13  = 1'h0;
          end else if (\$8 ) begin
            \$13  = 1'h1;
          end
    endcase
    if (usb_rst) begin
      \$13  = 1'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$31 ) begin end
    \$14  = fsm_state;
    casez (fsm_state)
      3'h0:
          if (\$7 ) begin
            \$14  = 3'h1;
          end else if (\$8 ) begin
            \$14  = 3'h1;
          end
      3'h1:
          if (\ready$8 ) begin
            (* full_case = 32'd1 *)
            if (is_zlp) begin
              \$14  = 3'h2;
            end else begin
              \$14  = 3'h3;
            end
          end
      3'h3:
          if (\$11 ) begin
            \$14  = 3'h2;
          end
      3'h2:
          if (\ready$8 ) begin
            \$14  = 3'h4;
          end
      3'h4:
          if (\ready$8 ) begin
            \$14  = 3'h0;
          end
    endcase
    if (usb_rst) begin
      \$14  = 3'h0;
    end
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$31 ) begin end
    \$15  = remaining_crc;
    casez (fsm_state)
      3'h0:
          /* empty */;
      3'h1:
          /* empty */;
      3'h3:
          /* empty */;
      3'h2:
          \$15  = crc[15:8];
    endcase
    if (usb_rst) begin
      \$15  = 8'h00;
    end
  end
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\utils\\bus.py:94" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.tx_multiplexer (ready, valid, \data$6 , \data$7 , \valid$2 , \valid$3 , \data$8 , data, \valid$9 );
  reg \$auto$verilog_backend.cc:2352:dump_module$32  = 0;
  wire \$1 ;
  wire \$2 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  output [7:0] data;
  reg [7:0] data;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  input [7:0] \data$6 ;
  wire [7:0] \data$6 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  input [7:0] \data$7 ;
  wire [7:0] \data$7 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  input [7:0] \data$8 ;
  wire [7:0] \data$8 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:41" *)
  wire [2:0] i;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:42" *)
  wire [1:0] o;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  input ready;
  wire ready;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \ready$11 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \ready$12 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  wire \ready$13 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  input valid;
  wire valid;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  input \valid$2 ;
  wire \valid$2 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  input \valid$3 ;
  wire \valid$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\interface\\utmi.py:54" *)
  output \valid$9 ;
  wire \valid$9 ;
  assign \$2  = \$1  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\utils\\bus.py:133" *) \valid$2 ;
  assign \valid$9  = \$2  | (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\utils\\bus.py:133" *) \valid$3 ;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\luna\\gateware\\utils\\bus.py:103" *)
  \USBStreamOutDeviceExample.usb.tx_multiplexer.encoder  encoder (
    .i(i),
    .o(o)
  );
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$32 ) begin end
    data = 8'h00;
    casez (o)
      2'h0:
          data = \data$6 ;
      2'h1:
          data = \data$7 ;
      2'h2:
          data = \data$8 ;
    endcase
  end
  assign \ready$11  = ready;
  assign \ready$12  = ready;
  assign \ready$13  = ready;
  assign i[2] = \valid$3 ;
  assign i[1] = \valid$2 ;
  assign i[0] = valid;
  assign \$1  = valid;
endmodule

(* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:46" *)
(* generator = "Amaranth" *)
module \USBStreamOutDeviceExample.usb.tx_multiplexer.encoder (o, i);
  reg \$auto$verilog_backend.cc:2352:dump_module$33  = 0;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:41" *)
  input [2:0] i;
  wire [2:0] i;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:43" *)
  reg n;
  (* src = "C:\\Users\\admin\\envs\\cocotb\\Lib\\site-packages\\amaranth\\lib\\coding.py:42" *)
  output [1:0] o;
  reg [1:0] o;
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$33 ) begin end
    o = 2'h0;
    casez (i)
      3'h1:
          o = 2'h0;
      3'h2:
          o = 2'h1;
      3'h4:
          o = 2'h2;
    endcase
  end
  always @* begin
    if (\$auto$verilog_backend.cc:2352:dump_module$33 ) begin end
    n = 1'h0;
    (* full_case = 32'd1 *)
    casez (i)
      3'h1:
          /* empty */;
      3'h2:
          /* empty */;
      3'h4:
          /* empty */;
      default:
          n = 1'h1;
    endcase
  end
endmodule
